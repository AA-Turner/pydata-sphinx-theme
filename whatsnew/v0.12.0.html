
<!doctype html>
<html lang="en">
  <head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="docsearch:language" content="en">

<title>Pandas documentation</title>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>


<link href="../_static/fontawesome-5.10.2/css/all.css", rel="stylesheet">
<link href="../_static/css/custom.css" rel="stylesheet"> 

  </head> 
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60"> 
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
        <div class="container">
<a class="navbar-brand" href="../index.html">
  <img src="../_static/img/pandas_logo.svg" alt="Pandas">
</a>

<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
</button>

<div id="navbar-menu" class="collapse navbar-collapse">
  <ul id="navbar-main-elements" class="navbar-nav mr-auto">
    <li class="nav-item">
        <a class="nav-link" href="../index.html">Home</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="../getting_started/index.html">Getting Started</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="../user_guide/index.html">User Guide</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="../reference/index.html">API Reference</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="../development/index.html">Development</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="index.html">Release Notes</a>
    </li>        
  </ul>
  <ul class="navbar-nav ml-auto">
    <li class="nav-item">
      <a class="nav-link" href="https://github.com/pandas-dev/pandas" target="_blank" rel="noopener">
        <span><i class="fab fa-github-alt" style="color:#333;font-size:1rem;line-height:1.25"></i></span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="https://twitter.com/pandas_dev" target="_blank" rel="noopener">
        <span><i class="fab fa-twitter" style="color:#55acee;font-size:1rem;line-height:1.25"></i></span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="../install.html">
        <span>
          <span class="btn btn-primary d-lg-inline-block mb-3 mb-md-0 ml-md-3">Install</span>
        </span>
      </a>
    </li>
  </ul>
        </div>
    </nav>

    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 bd-sidebar">
              

<form class="bd-search d-flex align-items-center">
  <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
        
          
              <li class="">
                  <a href="index.html#version-0-24">Version 0.24</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-23">Version 0.23</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-22">Version 0.22</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-21">Version 0.21</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-20">Version 0.20</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-19">Version 0.19</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-18">Version 0.18</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-17">Version 0.17</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-16">Version 0.16</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-15">Version 0.15</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-14">Version 0.14</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-13">Version 0.13</a>
              </li>
          
        
          
              <li class="active">
                  <a href="index.html#version-0-12">Version 0.12</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-11">Version 0.11</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-10">Version 0.10</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-9">Version 0.9</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-8">Version 0.8</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-7">Version 0.7</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-6">Version 0.6</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-5">Version 0.5</a>
              </li>
          
        
          
              <li class="">
                  <a href="index.html#version-0-4">Version 0.4</a>
              </li>
          
        
      
      
    </ul>

<!--

<div class="bd-toc-item active">
  <ul class="current nav bd-sidenav active">
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-24">Version 0.24</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-23">Version 0.23</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-22">Version 0.22</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-21">Version 0.21</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-20">Version 0.20</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-19">Version 0.19</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-18">Version 0.18</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-17">Version 0.17</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-16">Version 0.16</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-15">Version 0.15</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-14">Version 0.14</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-13">Version 0.13</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#version-0-12">Version 0.12</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-11">Version 0.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-10">Version 0.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-9">Version 0.9</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-8">Version 0.8</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-7">Version 0.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-6">Version 0.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-5">Version 0.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#version-0-4">Version 0.4</a></li>
</ul>

</div>
-->
</nav>


              
          </div>
          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              

<nav id="bd-toc-nav">
    <ul class="nav nav-tabs section-nav flex-column" role="tablist">
    
        <li class="toc-entry toc-h2">
            <a href="#api-changes" class="nav-item nav-link">API changes</a>
        </li>
    
        <li class="toc-entry toc-h2">
            <a href="#i-o-enhancements" class="nav-item nav-link">I/O Enhancements</a>
        </li>
    
        <li class="toc-entry toc-h2">
            <a href="#other-enhancements" class="nav-item nav-link">Other Enhancements</a>
        </li>
    
        <li class="toc-entry toc-h2">
            <a href="#experimental-features" class="nav-item nav-link">Experimental Features</a>
        </li>
    
        <li class="toc-entry toc-h2">
            <a href="#bug-fixes" class="nav-item nav-link">Bug Fixes</a>
        </li>
    
        <li class="toc-entry toc-h2">
            <a href="#contributors" class="nav-item nav-link">Contributors</a>
        </li>
    
    </ul>
</nav>
              
            </div>

          <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
              <div>
                
  <div class="section" id="v0-12-0-july-24-2013">
<span id="whatsnew-0120"></span><h1>v0.12.0 (July 24, 2013)<a class="headerlink" href="#v0-12-0-july-24-2013" title="Permalink to this headline">¶</a></h1>
<p>This is a major release from 0.11.0 and includes several new features and
enhancements along with a large number of bug fixes.</p>
<p>Highlights include a consistent I/O API naming scheme, routines to read html,
write MultiIndexes to csv files, read &amp; write STATA data files, read &amp; write JSON format
files, Python 3 support for <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code>, filtering of groupby expressions via <code class="docutils literal notranslate"><span class="pre">filter</span></code>, and a
revamped <code class="docutils literal notranslate"><span class="pre">replace</span></code> routine that accepts regular expressions.</p>
<div class="section" id="api-changes">
<h2>API changes<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p>The I/O API is now much more consistent with a set of top level <code class="docutils literal notranslate"><span class="pre">reader</span></code> functions
accessed like <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> that generally return a <code class="docutils literal notranslate"><span class="pre">pandas</span></code> object.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_csv</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_excel</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_hdf</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_sql</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_json</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_html</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_stata</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_clipboard</span></code></p></li>
</ul>
<p>The corresponding <code class="docutils literal notranslate"><span class="pre">writer</span></code> functions are object methods that are accessed like <code class="docutils literal notranslate"><span class="pre">df.to_csv()</span></code></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">to_csv</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_excel</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_hdf</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_sql</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_json</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_html</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_stata</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_clipboard</span></code></p></li>
</ul>
</li>
<li><p>Fix modulo and integer division on Series,DataFrames to act similarly to <code class="docutils literal notranslate"><span class="pre">float</span></code> dtypes to return
<code class="docutils literal notranslate"><span class="pre">np.nan</span></code> or <code class="docutils literal notranslate"><span class="pre">np.inf</span></code> as appropriate (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3590">GH3590</a>). This correct a numpy bug that treats <code class="docutils literal notranslate"><span class="pre">integer</span></code>
and <code class="docutils literal notranslate"><span class="pre">float</span></code> dtypes differently.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;first&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="s1">&#39;second&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">]})</span>

<span class="gp">In [10]: </span><span class="n">p</span> <span class="o">%</span> <span class="mi">0</span>

<span class="gp">In [11]: </span><span class="n">p</span> <span class="o">%</span> <span class="n">p</span>

<span class="gp">In [12]: </span><span class="n">p</span> <span class="o">/</span> <span class="n">p</span>

<span class="gp">In [13]: </span><span class="n">p</span> <span class="o">/</span> <span class="mi">0</span>
</pre></div>
</div>
</li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">squeeze</span></code> keyword to <code class="docutils literal notranslate"><span class="pre">groupby</span></code> to allow reduction from
DataFrame -&gt; Series if groups are unique. This is a Regression from 0.10.1.
We are reverting back to the prior behavior. This means groupby will return the
same shaped objects whether the groups are unique or not. Revert this issue (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/2893">GH2893</a>)
with (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3596">GH3596</a>).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([{</span><span class="s2">&quot;val1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;val2&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">},</span>
<span class="gp">   ....: </span>                    <span class="p">{</span><span class="s2">&quot;val1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;val2&quot;</span><span class="p">:</span> <span class="mi">19</span><span class="p">},</span>
<span class="gp">   ....: </span>                    <span class="p">{</span><span class="s2">&quot;val1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;val2&quot;</span><span class="p">:</span> <span class="mi">27</span><span class="p">},</span>
<span class="gp">   ....: </span>                    <span class="p">{</span><span class="s2">&quot;val1&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;val2&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">}])</span>
<span class="gp">   ....: </span>

<span class="gp">In [15]: </span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">dataf</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="k">return</span> <span class="n">dataf</span><span class="p">[</span><span class="s2">&quot;val2&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">dataf</span><span class="p">[</span><span class="s2">&quot;val2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="gp">   ....: </span>

<span class="go"># squeezing the result frame to a series (because we have unique groups)</span>
<span class="gp">In [16]: </span><span class="n">df2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;val1&quot;</span><span class="p">,</span> <span class="n">squeeze</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

<span class="go"># no squeezing (the default, and behavior in 0.10.1)</span>
<span class="gp">In [17]: </span><span class="n">df2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;val1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Raise on <code class="docutils literal notranslate"><span class="pre">iloc</span></code> when boolean indexing with a label based indexer mask
e.g. a boolean Series, even with integer labels, will raise. Since <code class="docutils literal notranslate"><span class="pre">iloc</span></code>
is purely positional based, the labels on the Series are not alignable (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3631">GH3631</a>)</p>
<p>This case is rarely used, and there are plenty of alternatives. This preserves the
<code class="docutils literal notranslate"><span class="pre">iloc</span></code> API to be <em>purely</em> positional based.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [19]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">lrange</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABCDE&#39;</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">])</span>

<span class="gp">In [20]: </span><span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">a</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>

<span class="gp">In [21]: </span><span class="n">mask</span>

<span class="go"># this is what you should use</span>
<span class="gp">In [22]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span>

<span class="go"># this will work as well</span>
<span class="gp">In [23]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">mask</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">df.iloc[mask]</span></code> will raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code></p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">raise_on_error</span></code> argument to plotting functions is removed. Instead,
plotting functions raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> of the object
is <code class="docutils literal notranslate"><span class="pre">object</span></code> to remind you to avoid <code class="docutils literal notranslate"><span class="pre">object</span></code> arrays whenever possible
and thus you should cast to an appropriate numeric dtype if you need to
plot something.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">colormap</span></code> keyword to DataFrame plotting methods. Accepts either a
matplotlib colormap object (ie, matplotlib.cm.jet) or a string name of such
an object (ie, ‘jet’). The colormap is sampled to select the color for each
column. Please see <a class="reference internal" href="../user_guide/visualization.html#visualization-colormaps"><span class="std std-ref">Colormaps</span></a> for more information.
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3860">GH3860</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.interpolate()</span></code> is now deprecated. Please use
<code class="docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code> instead. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3582">GH3582</a>,
<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3675">GH3675</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3676">GH3676</a>)</p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">method</span></code> and <code class="docutils literal notranslate"><span class="pre">axis</span></code> arguments of <code class="docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code> are
deprecated</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.replace</span></code> ‘s <code class="docutils literal notranslate"><span class="pre">infer_types</span></code> parameter is removed and now
performs conversion by default. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3907">GH3907</a>)</p></li>
<li><p>Add the keyword <code class="docutils literal notranslate"><span class="pre">allow_duplicates</span></code> to <code class="docutils literal notranslate"><span class="pre">DataFrame.insert</span></code> to allow a duplicate column
to be inserted if <code class="docutils literal notranslate"><span class="pre">True</span></code>, default is <code class="docutils literal notranslate"><span class="pre">False</span></code> (same as prior to 0.12) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3679">GH3679</a>)</p></li>
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">__nonzero__</span></code> for <code class="docutils literal notranslate"><span class="pre">NDFrame</span></code> objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3691">GH3691</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3696">GH3696</a>)</p></li>
<li><p>IO api</p>
<ul>
<li><p>added top-level function <code class="docutils literal notranslate"><span class="pre">read_excel</span></code> to replace the following,
The original API is deprecated and will be removed in a future version</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pandas.io.parsers</span> <span class="kn">import</span> <span class="n">ExcelFile</span>
<span class="n">xls</span> <span class="o">=</span> <span class="n">ExcelFile</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">)</span>
<span class="n">xls</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NA&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>With</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;path_to_file.xls&#39;</span><span class="p">,</span> <span class="s1">&#39;Sheet1&#39;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NA&#39;</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><p>added top-level function <code class="docutils literal notranslate"><span class="pre">read_sql</span></code> that is equivalent to the following</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pandas.io.sql</span> <span class="kn">import</span> <span class="n">read_frame</span>
<span class="n">read_frame</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_html</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.to_latex</span></code> now accept a path for
their first argument (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3702">GH3702</a>)</p></li>
<li><p>Do not allow astypes on <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> except to <code class="docutils literal notranslate"><span class="pre">object</span></code>, and
<code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> to <code class="docutils literal notranslate"><span class="pre">object/int</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3425">GH3425</a>)</p></li>
<li><p>The behavior of <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> dtypes has changed with respect to certain
so-called reduction operations (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3726">GH3726</a>). The following operations now
raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when performed on a <code class="docutils literal notranslate"><span class="pre">Series</span></code> and return an <em>empty</em>
<code class="docutils literal notranslate"><span class="pre">Series</span></code> when performed on a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> similar to performing these
operations on, for example, a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> of <code class="docutils literal notranslate"><span class="pre">slice</span></code> objects:</p>
<ul class="simple">
<li><p>sum, prod, mean, std, var, skew, kurt, corr, and cov</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_html</span></code> now defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code> when reading, and falls back on
<code class="docutils literal notranslate"><span class="pre">bs4</span></code> + <code class="docutils literal notranslate"><span class="pre">html5lib</span></code> when lxml fails to parse. a list of parsers to try
until success is also valid</p></li>
<li><p>The internal <code class="docutils literal notranslate"><span class="pre">pandas</span></code> class hierarchy has changed (slightly). The
previous <code class="docutils literal notranslate"><span class="pre">PandasObject</span></code> now is called <code class="docutils literal notranslate"><span class="pre">PandasContainer</span></code> and a new
<code class="docutils literal notranslate"><span class="pre">PandasObject</span></code> has become the base class for <code class="docutils literal notranslate"><span class="pre">PandasContainer</span></code> as well
as <code class="docutils literal notranslate"><span class="pre">Index</span></code>, <code class="docutils literal notranslate"><span class="pre">Categorical</span></code>, <code class="docutils literal notranslate"><span class="pre">GroupBy</span></code>, <code class="docutils literal notranslate"><span class="pre">SparseList</span></code>, and
<code class="docutils literal notranslate"><span class="pre">SparseArray</span></code> (+ their base classes). Currently, <code class="docutils literal notranslate"><span class="pre">PandasObject</span></code>
provides string methods (from <code class="docutils literal notranslate"><span class="pre">StringMixin</span></code>). (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4090">GH4090</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4092">GH4092</a>)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">StringMixin</span></code> that, given a <code class="docutils literal notranslate"><span class="pre">__unicode__</span></code> method, gets python 2 and
python 3 compatible string methods (<code class="docutils literal notranslate"><span class="pre">__str__</span></code>, <code class="docutils literal notranslate"><span class="pre">__bytes__</span></code>, and
<code class="docutils literal notranslate"><span class="pre">__repr__</span></code>). Plus string safety throughout. Now employed in many places
throughout the pandas library. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4090">GH4090</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4092">GH4092</a>)</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="i-o-enhancements">
<h2>I/O Enhancements<a class="headerlink" href="#i-o-enhancements" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_html()</span></code> can now parse HTML strings, files or urls and return
DataFrames, courtesy of &#64;cpcloud. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3477">GH3477</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3605">GH3605</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3606">GH3606</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3616">GH3616</a>).
It works with a <em>single</em> parser backend: BeautifulSoup4 + html5lib <a class="reference internal" href="../user_guide/io.html#io-html"><span class="std std-ref">See the docs</span></a></p>
<p>You can use <code class="docutils literal notranslate"><span class="pre">pd.read_html()</span></code> to read the output from <code class="docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code> like so</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [24]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)})</span>

<span class="gp">In [25]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="gp">In [26]: </span><span class="n">html</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_html</span><span class="p">()</span>

<span class="gp">In [27]: </span><span class="n">alist</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="gp">In [28]: </span><span class="k">print</span><span class="p">(</span><span class="n">df</span> <span class="o">==</span> <span class="n">alist</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>Note that <code class="docutils literal notranslate"><span class="pre">alist</span></code> here is a Python <code class="docutils literal notranslate"><span class="pre">list</span></code> so <code class="docutils literal notranslate"><span class="pre">pd.read_html()</span></code> and
<code class="docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code> are not inverses.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_html()</span></code> no longer performs hard conversion of date strings
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3656">GH3656</a>).</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You may have to install an older version of BeautifulSoup4,
<a class="reference internal" href="../install.html#install-optional-dependencies"><span class="std std-ref">See the installation docs</span></a></p>
</div>
</li>
<li><p>Added module for reading and writing Stata files: <code class="docutils literal notranslate"><span class="pre">pandas.io.stata</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/1512">GH1512</a>)
accessible via <code class="docutils literal notranslate"><span class="pre">read_stata</span></code> top-level function for reading,
and <code class="docutils literal notranslate"><span class="pre">to_stata</span></code> DataFrame method for writing, <a class="reference internal" href="../user_guide/io.html#io-stata"><span class="std std-ref">See the docs</span></a></p></li>
<li><p>Added module for reading and writing json format files: <code class="docutils literal notranslate"><span class="pre">pandas.io.json</span></code>
accessible via <code class="docutils literal notranslate"><span class="pre">read_json</span></code> top-level function for reading,
and <code class="docutils literal notranslate"><span class="pre">to_json</span></code> DataFrame method for writing, <a class="reference internal" href="../user_guide/io.html#io-json"><span class="std std-ref">See the docs</span></a>
various issues (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/1226">GH1226</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3804">GH3804</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3876">GH3876</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3867">GH3867</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/1305">GH1305</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> column support for reading and writing csv format files</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">header</span></code> option in <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> now accepts a
list of the rows from which to read the index.</p></li>
<li><p>The option, <code class="docutils literal notranslate"><span class="pre">tupleize_cols</span></code> can now be specified in both <code class="docutils literal notranslate"><span class="pre">to_csv</span></code> and
<code class="docutils literal notranslate"><span class="pre">read_csv</span></code>, to provide compatibility for the pre 0.12 behavior of
writing and reading <code class="docutils literal notranslate"><span class="pre">MultIndex</span></code> columns via a list of tuples. The default in
0.12 is to write lists of tuples and <em>not</em> interpret list of tuples as a
<code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> column.</p>
<p>Note: The default behavior in 0.12 remains unchanged from prior versions, but starting with 0.13,
the default <em>to</em> write and read <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> columns will be in the new
format. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3571">GH3571</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/1651">GH1651</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3141">GH3141</a>)</p>
</li>
<li><p>If an <code class="docutils literal notranslate"><span class="pre">index_col</span></code> is not specified (e.g. you don’t have an index, or wrote it
with <code class="docutils literal notranslate"><span class="pre">df.to_csv(...,</span> <span class="pre">index=False</span></code>), then any <code class="docutils literal notranslate"><span class="pre">names</span></code> on the columns index will
be <em>lost</em>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="kn">from</span> <span class="nn">pandas.util.testing</span> <span class="kn">import</span> <span class="n">makeCustomDataframe</span> <span class="k">as</span> <span class="n">mkdf</span>

<span class="gp">In [30]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">mkdf</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">r_idx_nlevels</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c_idx_nlevels</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="gp">In [31]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;mi.csv&#39;</span><span class="p">)</span>

<span class="gp">In [32]: </span><span class="k">print</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s1">&#39;mi.csv&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

<span class="gp">In [33]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;mi.csv&#39;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index_col</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> (via <code class="docutils literal notranslate"><span class="pre">PyTables</span> <span class="pre">3.0.0</span></code>) on Python3</p></li>
<li><p>Iterator support via <code class="docutils literal notranslate"><span class="pre">read_hdf</span></code> that automatically opens and closes the
store when iteration is finished. This is only for <em>tables</em></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;store_iterator.h5&#39;</span>

<span class="gp">In [26]: </span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [27]: </span><span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;df&#39;</span><span class="p">,</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">   ....:</span>
<span class="go">          0         1</span>
<span class="go">0  0.713216 -0.778461</span>
<span class="go">1 -0.661062  0.862877</span>
<span class="go">2  0.344342  0.149565</span>
<span class="go">          0         1</span>
<span class="go">3 -0.626968 -0.875772</span>
<span class="go">4 -0.930687 -0.218983</span>
<span class="go">5  0.949965 -0.442354</span>
<span class="go">          0         1</span>
<span class="go">6 -0.402985  1.111358</span>
<span class="go">7 -0.241527 -0.670477</span>
<span class="go">8  0.049355  0.632633</span>
<span class="go">          0         1</span>
<span class="go">9 -1.502767 -1.225492</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> will now throw a more informative error message when a file
contains no columns, e.g., all newline characters</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="other-enhancements">
<h2>Other Enhancements<a class="headerlink" href="#other-enhancements" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code> now allows regular expressions on contained
<code class="docutils literal notranslate"><span class="pre">Series</span></code> with object dtype. See the examples section in the regular docs
<a class="reference internal" href="../user_guide/missing_data.html#missing-data-replace-expression"><span class="std std-ref">Replacing via String Expression</span></a></p>
<p>For example you can do</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [36]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ab..&#39;</span><span class="p">),</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="gp">In [37]: </span><span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;\s*\.\s*&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</pre></div>
</div>
<p>to replace all occurrences of the string <code class="docutils literal notranslate"><span class="pre">'.'</span></code> with zero or more
instances of surrounding white space with <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
<p>Regular string replacement still works as expected. For example, you can do</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [38]: </span><span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</pre></div>
</div>
<p>to replace all occurrences of the string <code class="docutils literal notranslate"><span class="pre">'.'</span></code> with <code class="docutils literal notranslate"><span class="pre">NaN</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.melt()</span></code> now accepts the optional parameters <code class="docutils literal notranslate"><span class="pre">var_name</span></code> and <code class="docutils literal notranslate"><span class="pre">value_name</span></code>
to specify custom column names of the returned DataFrame.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.set_option()</span></code> now allows N option, value pairs (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3667">GH3667</a>).</p>
<blockquote>
<div><p>Let’s say that we had an option <code class="docutils literal notranslate"><span class="pre">'a.b'</span></code> and another option <code class="docutils literal notranslate"><span class="pre">'b.c'</span></code>.
We can set them at the same time:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [41]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_option</span><span class="p">(</span><span class="s1">&#39;a.b&#39;</span><span class="p">)</span>

<span class="gp">In [42]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_option</span><span class="p">(</span><span class="s1">&#39;b.c&#39;</span><span class="p">)</span>

<span class="gp">In [43]: </span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;a.b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b.c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="gp">In [44]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_option</span><span class="p">(</span><span class="s1">&#39;a.b&#39;</span><span class="p">)</span>

<span class="gp">In [45]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_option</span><span class="p">(</span><span class="s1">&#39;b.c&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">filter</span></code> method for group objects returns a subset of the original
object. Suppose we want to take only elements that belong to groups with a
group sum greater than 2.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [46]: </span><span class="n">sf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [47]: </span><span class="n">sf</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">sf</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>The argument of <code class="docutils literal notranslate"><span class="pre">filter</span></code> must a function that, applied to the group as a
whole, returns <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>Another useful operation is filtering out elements that belong to groups
with only a couple members.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [48]: </span><span class="n">dff</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">),</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;aabbbbcc&#39;</span><span class="p">)})</span>

<span class="gp">In [49]: </span><span class="n">dff</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, instead of dropping the offending groups, we can return a
like-indexed objects where the groups that do not pass the filter are
filled with NaNs.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [50]: </span><span class="n">dff</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">,</span> <span class="n">dropna</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>Series and DataFrame hist methods now take a <code class="docutils literal notranslate"><span class="pre">figsize</span></code> argument (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3834">GH3834</a>)</p></li>
<li><p>DatetimeIndexes no longer try to convert mixed-integer indexes during join
operations (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3877">GH3877</a>)</p></li>
<li><p>Timestamp.min and Timestamp.max now represent valid Timestamp instances instead
of the default datetime.min and datetime.max (respectively), thanks &#64;SleepingPills</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_html</span></code> now raises when no tables are found and BeautifulSoup==4.2.0
is detected (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4214">GH4214</a>)</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="experimental-features">
<h2>Experimental Features<a class="headerlink" href="#experimental-features" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p>Added experimental <code class="docutils literal notranslate"><span class="pre">CustomBusinessDay</span></code> class to support <code class="docutils literal notranslate"><span class="pre">DateOffsets</span></code>
with custom holiday calendars and custom weekmasks. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/2301">GH2301</a>)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This uses the <code class="docutils literal notranslate"><span class="pre">numpy.busdaycalendar</span></code> API introduced in Numpy 1.7 and
therefore requires Numpy 1.7.0 or newer.</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [51]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="n">CustomBusinessDay</span>

<span class="gp">In [52]: </span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="go"># As an interesting example, let&#39;s look at Egypt where</span>
<span class="go"># a Friday-Saturday weekend is observed.</span>
<span class="gp">In [53]: </span><span class="n">weekmask_egypt</span> <span class="o">=</span> <span class="s1">&#39;Sun Mon Tue Wed Thu&#39;</span>

<span class="go"># They also observe International Workers&#39; Day so let&#39;s</span>
<span class="go"># add that for a couple of years</span>
<span class="gp">In [54]: </span><span class="n">holidays</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;2012-05-01&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="s1">&#39;2014-05-01&#39;</span><span class="p">)]</span>

<span class="gp">In [55]: </span><span class="n">bday_egypt</span> <span class="o">=</span> <span class="n">CustomBusinessDay</span><span class="p">(</span><span class="n">holidays</span><span class="o">=</span><span class="n">holidays</span><span class="p">,</span> <span class="n">weekmask</span><span class="o">=</span><span class="n">weekmask_egypt</span><span class="p">)</span>

<span class="gp">In [56]: </span><span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>

<span class="gp">In [57]: </span><span class="k">print</span><span class="p">(</span><span class="n">dt</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">bday_egypt</span><span class="p">)</span>

<span class="gp">In [58]: </span><span class="n">dts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">bday_egypt</span><span class="p">)</span>

<span class="gp">In [59]: </span><span class="k">print</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">dts</span><span class="o">.</span><span class="n">weekday</span><span class="p">,</span> <span class="n">dts</span><span class="p">)</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">&#39;Mon Tue Wed Thu Fri Sat Sun&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())))</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="bug-fixes">
<h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p>Plotting functions now raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> before trying to plot anything
if the associated objects have have a dtype of <code class="docutils literal notranslate"><span class="pre">object</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/1818">GH1818</a>,
<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3572">GH3572</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3911">GH3911</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3912">GH3912</a>), but they will try to convert object arrays to
numeric arrays if possible so that you can still plot, for example, an
object array with floats. This happens before any drawing takes place which
eliminates any spurious plots from showing up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fillna</span></code> methods now raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> if the <code class="docutils literal notranslate"><span class="pre">value</span></code> parameter is
a list or tuple.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.str</span></code> now supports iteration (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3638">GH3638</a>). You can iterate over the
individual elements of each string in the <code class="docutils literal notranslate"><span class="pre">Series</span></code>. Each iteration yields
yields a <code class="docutils literal notranslate"><span class="pre">Series</span></code> with either a single character at each index of the
original <code class="docutils literal notranslate"><span class="pre">Series</span></code> or <code class="docutils literal notranslate"><span class="pre">NaN</span></code>. For example,</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [60]: </span><span class="n">strs</span> <span class="o">=</span> <span class="s1">&#39;go&#39;</span><span class="p">,</span> <span class="s1">&#39;bow&#39;</span><span class="p">,</span> <span class="s1">&#39;joe&#39;</span><span class="p">,</span> <span class="s1">&#39;slow&#39;</span>

<span class="gp">In [61]: </span><span class="n">ds</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">strs</span><span class="p">)</span>

<span class="gp">In [62]: </span><span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">str</span><span class="p">:</span>
<span class="gp">   ....: </span>    <span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [63]: </span><span class="n">s</span>

<span class="gp">In [64]: </span><span class="n">s</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">item</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;w&#39;</span>
</pre></div>
</div>
<p>The last element yielded by the iterator will be a <code class="docutils literal notranslate"><span class="pre">Series</span></code> containing
the last element of the longest string in the <code class="docutils literal notranslate"><span class="pre">Series</span></code> with all other
elements being <code class="docutils literal notranslate"><span class="pre">NaN</span></code>. Here since <code class="docutils literal notranslate"><span class="pre">'slow'</span></code> is the longest string
and there are no other strings with the same length <code class="docutils literal notranslate"><span class="pre">'w'</span></code> is the only
non-null string in the yielded <code class="docutils literal notranslate"><span class="pre">Series</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">HDFStore</span></code></p>
<ul class="simple">
<li><p>will retain index attributes (freq,tz,name) on recreation (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3499">GH3499</a>)</p></li>
<li><p>will warn with a <code class="docutils literal notranslate"><span class="pre">AttributeConflictWarning</span></code> if you are attempting to append
an index with a different frequency than the existing, or attempting
to append an index with a different name than the existing</p></li>
<li><p>support datelike columns with a timezone as data_columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/2852">GH2852</a>)</p></li>
</ul>
</li>
<li><p>Non-unique index support clarified (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3468">GH3468</a>).</p>
<ul class="simple">
<li><p>Fix assigning a new index to a duplicate index in a DataFrame would fail (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3468">GH3468</a>)</p></li>
<li><p>Fix construction of a DataFrame with a duplicate index</p></li>
<li><p>ref_locs support to allow duplicative indices across dtypes,
allows iget support to always find the index (even across dtypes) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/2194">GH2194</a>)</p></li>
<li><p>applymap on a DataFrame with a non-unique index now works
(removed warning) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/2786">GH2786</a>), and fix (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3230">GH3230</a>)</p></li>
<li><p>Fix to_csv to handle non-unique columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3495">GH3495</a>)</p></li>
<li><p>Duplicate indexes with getitem will return items in the correct order (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3455">GH3455</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3457">GH3457</a>)
and handle missing elements like unique indices (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3561">GH3561</a>)</p></li>
<li><p>Duplicate indexes with and empty DataFrame.from_records will return a correct frame (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3562">GH3562</a>)</p></li>
<li><p>Concat to produce a non-unique columns when duplicates are across dtypes is fixed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3602">GH3602</a>)</p></li>
<li><p>Allow insert/delete to non-unique columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3679">GH3679</a>)</p></li>
<li><p>Non-unique indexing with a slice via <code class="docutils literal notranslate"><span class="pre">loc</span></code> and friends fixed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3659">GH3659</a>)</p></li>
<li><p>Allow insert/delete to non-unique columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3679">GH3679</a>)</p></li>
<li><p>Extend <code class="docutils literal notranslate"><span class="pre">reindex</span></code> to correctly deal with non-unique indices (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3679">GH3679</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.itertuples()</span></code> now works with frames with duplicate column
names (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3873">GH3873</a>)</p></li>
<li><p>Bug in non-unique indexing via <code class="docutils literal notranslate"><span class="pre">iloc</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4017">GH4017</a>); added <code class="docutils literal notranslate"><span class="pre">takeable</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">reindex</span></code> for location-based taking</p></li>
<li><p>Allow non-unique indexing in series via <code class="docutils literal notranslate"><span class="pre">.ix/.loc</span></code> and <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4246">GH4246</a>)</p></li>
<li><p>Fixed non-unique indexing memory allocation issue with <code class="docutils literal notranslate"><span class="pre">.ix/.loc</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4280">GH4280</a>)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.from_records</span></code> did not accept empty recarrays (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3682">GH3682</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_html</span></code> now correctly skips tests (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3741">GH3741</a>)</p></li>
<li><p>Fixed a bug where <code class="docutils literal notranslate"><span class="pre">DataFrame.replace</span></code> with a compiled regular expression
in the <code class="docutils literal notranslate"><span class="pre">to_replace</span></code> argument wasn’t working (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3907">GH3907</a>)</p></li>
<li><p>Improved <code class="docutils literal notranslate"><span class="pre">network</span></code> test decorator to catch <code class="docutils literal notranslate"><span class="pre">IOError</span></code> (and therefore
<code class="docutils literal notranslate"><span class="pre">URLError</span></code> as well). Added <code class="docutils literal notranslate"><span class="pre">with_connectivity_check</span></code> decorator to allow
explicitly checking a website as a proxy for seeing if there is network
connectivity. Plus, new <code class="docutils literal notranslate"><span class="pre">optional_args</span></code> decorator factory for decorators.
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3910">GH3910</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3914">GH3914</a>)</p></li>
<li><p>Fixed testing issue where too many sockets where open thus leading to a
connection reset issue (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3982">GH3982</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3985">GH3985</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4028">GH4028</a>,
<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4054">GH4054</a>)</p></li>
<li><p>Fixed failing tests in test_yahoo, test_google where symbols were not
retrieved but were being accessed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3982">GH3982</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3985">GH3985</a>,
<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4028">GH4028</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4054">GH4054</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.hist</span></code> will now take the figure from the current environment if
one is not passed</p></li>
<li><p>Fixed bug where a 1xN DataFrame would barf on a 1xN mask (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4071">GH4071</a>)</p></li>
<li><p>Fixed running of <code class="docutils literal notranslate"><span class="pre">tox</span></code> under python3 where the pickle import was getting
rewritten in an incompatible way (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4062">GH4062</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4063">GH4063</a>)</p></li>
<li><p>Fixed bug where sharex and sharey were not being passed to grouped_hist
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4089">GH4089</a>)</p></li>
<li><p>Fixed bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.replace</span></code> where a nested dict wasn’t being
iterated over when regex=False (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4115">GH4115</a>)</p></li>
<li><p>Fixed bug in the parsing of microseconds when using the <code class="docutils literal notranslate"><span class="pre">format</span></code>
argument in <code class="docutils literal notranslate"><span class="pre">to_datetime</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4152">GH4152</a>)</p></li>
<li><p>Fixed bug in <code class="docutils literal notranslate"><span class="pre">PandasAutoDateLocator</span></code> where <code class="docutils literal notranslate"><span class="pre">invert_xaxis</span></code> triggered
incorrectly <code class="docutils literal notranslate"><span class="pre">MilliSecondLocator</span></code>  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3990">GH3990</a>)</p></li>
<li><p>Fixed bug in plotting that wasn’t raising on invalid colormap for
matplotlib 1.1.1 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4215">GH4215</a>)</p></li>
<li><p>Fixed the legend displaying in <code class="docutils literal notranslate"><span class="pre">DataFrame.plot(kind='kde')</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4216">GH4216</a>)</p></li>
<li><p>Fixed bug where Index slices weren’t carrying the name attribute
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4226">GH4226</a>)</p></li>
<li><p>Fixed bug in initializing <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> with an array of strings
in a certain time zone (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4229">GH4229</a>)</p></li>
<li><p>Fixed bug where html5lib wasn’t being properly skipped (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4265">GH4265</a>)</p></li>
<li><p>Fixed bug where get_data_famafrench wasn’t using the correct file edges
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4281">GH4281</a>)</p></li>
</ul>
</div></blockquote>
<p>See the <a class="reference internal" href="index.html#release"><span class="std std-ref">full release notes</span></a> or issue tracker
on GitHub for a complete list.</p>
</div>
<div class="section" id="contributors">
<span id="whatsnew-0-12-0-contributors"></span><h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
</div>
</div>


              </div>
          </main>

      </div>
    </div>

    
  </body>
</html>