<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>What’s New in 0.24.0 (Month XX, 2018) &#8212; pandas 0.23.4 documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/pandas_styles.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/carousel.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/pandas_logo.png"></span>
           </a>
        <span class="navbar-text navbar-version pull-left"><b>0.23.4</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../../install.html">Install</a></li>
                <li><a href="../../getting_started/index.html">Getting started</a></li>
                <li><a href="../../user_guide/index.html">User guide</a></li>
                <li><a href="../../api.html">API</a></li>
                <li><a href="../../community.html">Community</a></li>
                <li><a href="../../donate.html">Donate</a></li>
            
            
              
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">What’s New in 0.24.0 (Month XX, 2018)</a><ul>
<li><a class="reference internal" href="#new-features">New features</a><ul>
<li><a class="reference internal" href="#accessing-the-values-in-a-series-or-index">Accessing the values in a Series or Index</a></li>
<li><a class="reference internal" href="#extensionarray-operator-support"><code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> operator support</a></li>
<li><a class="reference internal" href="#optional-integer-na-support">Optional Integer NA Support</a></li>
<li><a class="reference internal" href="#read-html-enhancements"><code class="docutils literal notranslate"><span class="pre">read_html</span></code> Enhancements</a></li>
<li><a class="reference internal" href="#storing-interval-and-period-data-in-series-and-dataframe">Storing Interval and Period Data in Series and DataFrame</a></li>
<li><a class="reference internal" href="#new-styler-pipe-method">New <code class="docutils literal notranslate"><span class="pre">Styler.pipe()</span></code> method</a></li>
<li><a class="reference internal" href="#joining-with-two-multi-indexes">Joining with two multi-indexes</a></li>
<li><a class="reference internal" href="#renaming-names-in-a-multiindex">Renaming names in a MultiIndex</a></li>
<li><a class="reference internal" href="#other-enhancements">Other Enhancements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#backwards-incompatible-api-changes">Backwards incompatible API changes</a><ul>
<li><a class="reference internal" href="#dependencies-have-increased-minimum-versions">Dependencies have increased minimum versions</a></li>
<li><a class="reference internal" href="#os-linesep-is-used-for-line-terminator-of-dataframe-to-csv"><cite>os.linesep</cite> is used for <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code> of <code class="docutils literal notranslate"><span class="pre">DataFrame.to_csv</span></code></a></li>
<li><a class="reference internal" href="#parsing-datetime-strings-with-timezone-offsets">Parsing Datetime Strings with Timezone Offsets</a></li>
<li><a class="reference internal" href="#calendarday-offset">CalendarDay Offset</a></li>
<li><a class="reference internal" href="#time-values-in-dt-end-time-and-to-timestamp-how-end">Time values in <code class="docutils literal notranslate"><span class="pre">dt.end_time</span></code> and <code class="docutils literal notranslate"><span class="pre">to_timestamp(how='end')</span></code></a></li>
<li><a class="reference internal" href="#sparse-data-structure-refactor">Sparse Data Structure Refactor</a></li>
<li><a class="reference internal" href="#raise-valueerror-in-dataframe-to-dict-orient-index">Raise ValueError in <code class="docutils literal notranslate"><span class="pre">DataFrame.to_dict(orient='index')</span></code></a></li>
<li><a class="reference internal" href="#tick-dateoffset-normalize-restrictions">Tick DateOffset Normalize Restrictions</a></li>
<li><a class="reference internal" href="#period-subtraction">Period Subtraction</a></li>
<li><a class="reference internal" href="#addition-subtraction-of-nan-from-dataframe">Addition/Subtraction of <code class="docutils literal notranslate"><span class="pre">NaN</span></code> from <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code></a></li>
<li><a class="reference internal" href="#dataframe-comparison-operations-broadcasting-changes">DataFrame Comparison Operations Broadcasting Changes</a></li>
<li><a class="reference internal" href="#dataframe-arithmetic-operations-broadcasting-changes">DataFrame Arithmetic Operations Broadcasting Changes</a></li>
<li><a class="reference internal" href="#extensiontype-changes">ExtensionType Changes</a></li>
<li><a class="reference internal" href="#series-and-index-data-dtype-incompatibilities">Series and Index Data-Dtype Incompatibilities</a></li>
<li><a class="reference internal" href="#crosstab-preserves-dtypes">Crosstab Preserves Dtypes</a></li>
<li><a class="reference internal" href="#datetimelike-api-changes">Datetimelike API Changes</a></li>
<li><a class="reference internal" href="#other-api-changes">Other API Changes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deprecations">Deprecations</a></li>
<li><a class="reference internal" href="#integer-addition-subtraction-with-datetime-like-classes-is-deprecated">Integer Addition/Subtraction with Datetime-like Classes Is Deprecated</a></li>
<li><a class="reference internal" href="#removal-of-prior-version-deprecations-changes">Removal of prior version deprecations/changes</a></li>
<li><a class="reference internal" href="#performance-improvements">Performance Improvements</a></li>
<li><a class="reference internal" href="#documentation-changes">Documentation Changes</a></li>
<li><a class="reference internal" href="#bug-fixes">Bug Fixes</a><ul>
<li><a class="reference internal" href="#categorical">Categorical</a></li>
<li><a class="reference internal" href="#datetimelike">Datetimelike</a></li>
<li><a class="reference internal" href="#timedelta">Timedelta</a></li>
<li><a class="reference internal" href="#timezones">Timezones</a></li>
<li><a class="reference internal" href="#offsets">Offsets</a></li>
<li><a class="reference internal" href="#numeric">Numeric</a></li>
<li><a class="reference internal" href="#strings">Strings</a></li>
<li><a class="reference internal" href="#interval">Interval</a></li>
<li><a class="reference internal" href="#indexing">Indexing</a></li>
<li><a class="reference internal" href="#missing">Missing</a></li>
<li><a class="reference internal" href="#multiindex">MultiIndex</a></li>
<li><a class="reference internal" href="#i-o">I/O</a></li>
<li><a class="reference internal" href="#proper-handling-of-np-nan-in-a-string-data-typed-column-with-the-python-engine">Proper handling of <cite>np.NaN</cite> in a string data-typed column with the Python engine</a></li>
<li><a class="reference internal" href="#plotting">Plotting</a></li>
<li><a class="reference internal" href="#groupby-resample-rolling">Groupby/Resample/Rolling</a></li>
<li><a class="reference internal" href="#reshaping">Reshaping</a></li>
<li><a class="reference internal" href="#sparse">Sparse</a></li>
<li><a class="reference internal" href="#build-changes">Build Changes</a></li>
<li><a class="reference internal" href="#other">Other</a></li>
</ul>
</li>
<li><a class="reference internal" href="#contributors">Contributors</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="what-s-new-in-0-24-0-month-xx-2018">
<span id="whatsnew-0240"></span><h1>What’s New in 0.24.0 (Month XX, 2018)<a class="headerlink" href="#what-s-new-in-0-24-0-month-xx-2018" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Starting January 1, 2019, pandas feature releases will support Python 3 only.
See <a class="reference internal" href="../../install.html#install-dropping-27"><span class="std std-ref">Plan for dropping Python 2.7</span></a> for more.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">tocdepth:</th><td class="field-body">2</td>
</tr>
</tbody>
</table>
<p>These are the changes in pandas 0.24.0. See <a class="reference internal" href="../../releases.html#release"><span class="std std-ref">Release Notes</span></a> for a full changelog
including other versions of pandas.</p>
<div class="section" id="new-features">
<span id="whatsnew-0240-enhancements"></span><h2>New features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../generated/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> now directly allows merge between objects of type <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> and named <code class="docutils literal notranslate"><span class="pre">Series</span></code>, without the need to convert the <code class="docutils literal notranslate"><span class="pre">Series</span></code> object into a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> beforehand (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21220">GH21220</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">ExcelWriter</span></code> now accepts <code class="docutils literal notranslate"><span class="pre">mode</span></code> as a keyword argument, enabling append to existing workbooks when using the <code class="docutils literal notranslate"><span class="pre">openpyxl</span></code> engine (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3441">GH3441</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">FrozenList</span></code> has gained the <code class="docutils literal notranslate"><span class="pre">.union()</span></code> and <code class="docutils literal notranslate"><span class="pre">.difference()</span></code> methods. This functionality greatly simplifies groupby’s that rely on explicitly excluding certain columns. See <a class="reference internal" href="../../user_guide/groupby.html#groupby-split"><span class="std std-ref">Splitting an object into groups</span></a> for more information (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15475">GH15475</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15506">GH15506</a>).</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_parquet()</span></code></a> now accepts <code class="docutils literal notranslate"><span class="pre">index</span></code> as an argument, allowing
the user to override the engine’s default behavior to include or omit the
dataframe’s indexes from the resulting Parquet file. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20768">GH20768</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.corr.html#pandas.DataFrame.corr" title="pandas.DataFrame.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corr()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.corr.html#pandas.Series.corr" title="pandas.Series.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.corr()</span></code></a> now accept a callable for generic calculation methods of correlation, e.g. histogram intersection (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22684">GH22684</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> now accepts <code class="docutils literal notranslate"><span class="pre">decimal</span></code> as an argument, allowing the user to specify which decimal separator should be used in the output. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23614">GH23614</a>)</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.read_feather()</span></code> now accepts <code class="docutils literal notranslate"><span class="pre">columns</span></code> as an argument, allowing the user to specify which columns should be read. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/24025">GH24025</a>)</li>
</ul>
<div class="section" id="accessing-the-values-in-a-series-or-index">
<span id="whatsnew-0240-values-api"></span><h3>Accessing the values in a Series or Index<a class="headerlink" href="#accessing-the-values-in-a-series-or-index" title="Permalink to this headline">¶</a></h3>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.array</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">Index.array</span></code> have been added for extracting the array backing a
<code class="docutils literal notranslate"><span class="pre">Series</span></code> or <code class="docutils literal notranslate"><span class="pre">Index</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">idx</span><span class="o">.</span><span class="n">array</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="n">bc6336ec4434</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">idx</span><span class="o">.</span><span class="n">array</span>

<span class="ne">AttributeError</span>: &#39;PeriodIndex&#39; object has no attribute &#39;array&#39;

<span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">array</span>
<span class="go">                                                                                                                                                                                                                                                                                    ---------------------------------------------------------------------------</span>
<span class="go">AttributeError                            Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-3-b4c0dc5df0a3&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 pd.Series(idx).array</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/generic.py in __getattr__(self, name)</span>
<span class="go">   4374             if self._info_axis._can_hold_identifiers_and_holds_name(name):</span>
<span class="go">   4375                 return self[name]</span>
<span class="go">-&gt; 4376             return object.__getattribute__(self, name)</span>
<span class="go">   4377 </span>
<span class="go">   4378     def __setattr__(self, name, value):</span>

<span class="go">AttributeError: &#39;Series&#39; object has no attribute &#39;array&#39;</span>
</pre></div>
</div>
<p>Historically, this would have been done with <code class="docutils literal notranslate"><span class="pre">series.values</span></code>, but with
<code class="docutils literal notranslate"><span class="pre">.values</span></code> it was unclear whether the returned value would be the actual array,
some transformation of it, or one of pandas custom arrays (like
<code class="docutils literal notranslate"><span class="pre">Categorical</span></code>). For example, with <a class="reference internal" href="../../generated/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a>, <code class="docutils literal notranslate"><span class="pre">.values</span></code> generates
a new ndarray of period objects each time.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="nb">id</span><span class="p">(</span><span class="n">idx</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="gh">Out[4]: </span><span class="go">139726857774864</span>

<span class="gp">In [5]: </span><span class="nb">id</span><span class="p">(</span><span class="n">idx</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
<span class="go">                        Out[5]: 139726857776304</span>
</pre></div>
</div>
<p>If you need an actual NumPy array, use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_numpy()</span></code> or <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.to_numpy()</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">idx</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="mi">95</span><span class="n">d45e03bd49</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">idx</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>

<span class="ne">AttributeError</span>: &#39;PeriodIndex&#39; object has no attribute &#39;to_numpy&#39;

<span class="gp">In [7]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="go">                                                                                                                                                                                                                                                                                            ---------------------------------------------------------------------------</span>
<span class="go">AttributeError                            Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-7-24dd32af0149&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 pd.Series(idx).to_numpy()</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/generic.py in __getattr__(self, name)</span>
<span class="go">   4374             if self._info_axis._can_hold_identifiers_and_holds_name(name):</span>
<span class="go">   4375                 return self[name]</span>
<span class="go">-&gt; 4376             return object.__getattribute__(self, name)</span>
<span class="go">   4377 </span>
<span class="go">   4378     def __setattr__(self, name, value):</span>

<span class="go">AttributeError: &#39;Series&#39; object has no attribute &#39;to_numpy&#39;</span>
</pre></div>
</div>
<p>For Series and Indexes backed by normal NumPy arrays, this will be the same thing (and the same
as <code class="docutils literal notranslate"><span class="pre">.values</span></code>).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [9]: </span><span class="n">ser</span><span class="o">.</span><span class="n">array</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">9</span><span class="o">-</span><span class="mf">6e036</span><span class="n">f2b0efe</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">ser</span><span class="o">.</span><span class="n">array</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/generic.py</span> in <span class="ni">__getattr__</span><span class="nt">(self, name)</span>
<span class="g g-Whitespace">   </span><span class="mi">4374</span>             <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info_axis</span><span class="o">.</span><span class="n">_can_hold_identifiers_and_holds_name</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">4375</span>                 <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
<span class="ne">-&gt; </span><span class="mi">4376</span>             <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4377</span> 
<span class="g g-Whitespace">   </span><span class="mi">4378</span>     <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

<span class="ne">AttributeError</span>: &#39;Series&#39; object has no attribute &#39;array&#39;

<span class="gp">In [10]: </span><span class="n">ser</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               ---------------------------------------------------------------------------</span>
<span class="go">AttributeError                            Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-10-475f3f9548db&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 ser.to_numpy()</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/generic.py in __getattr__(self, name)</span>
<span class="go">   4374             if self._info_axis._can_hold_identifiers_and_holds_name(name):</span>
<span class="go">   4375                 return self[name]</span>
<span class="go">-&gt; 4376             return object.__getattribute__(self, name)</span>
<span class="go">   4377 </span>
<span class="go">   4378     def __setattr__(self, name, value):</span>

<span class="go">AttributeError: &#39;Series&#39; object has no attribute &#39;to_numpy&#39;</span>
</pre></div>
</div>
<p>We haven’t removed or deprecated <a class="reference internal" href="../../generated/pandas.Series.values.html#pandas.Series.values" title="pandas.Series.values"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.values</span></code></a> or <a class="reference internal" href="../../generated/pandas.DataFrame.values.html#pandas.DataFrame.values" title="pandas.DataFrame.values"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFrame.values</span></code></a>, but we
recommend and using <code class="docutils literal notranslate"><span class="pre">.array</span></code> or <code class="docutils literal notranslate"><span class="pre">.to_numpy()</span></code> instead.</p>
<p>See <a class="reference internal" href="../../getting_started/basics.html#basics-dtypes"><span class="std std-ref">dtypes</span></a> and <span class="xref std std-ref">dsintro.attrs</span> for more.</p>
</div>
<div class="section" id="extensionarray-operator-support">
<span id="whatsnew-0240-enhancements-extension-array-operators"></span><h3><code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> operator support<a class="headerlink" href="#extensionarray-operator-support" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">Series</span></code> based on an <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> now supports arithmetic and comparison
operators (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19577">GH19577</a>). There are two approaches for providing operator support for an <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code>:</p>
<ol class="arabic simple">
<li>Define each of the operators on your <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> subclass.</li>
<li>Use an operator implementation from pandas that depends on operators that are already defined
on the underlying elements (scalars) of the <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code>.</li>
</ol>
<p>See the <a class="reference internal" href="../../developers/extending.html#extending-extension-operator"><span class="std std-ref">ExtensionArray Operator Support</span></a> documentation section for details on both
ways of adding operator support.</p>
</div>
<div class="section" id="optional-integer-na-support">
<span id="whatsnew-0240-enhancements-intna"></span><h3>Optional Integer NA Support<a class="headerlink" href="#optional-integer-na-support" title="Permalink to this headline">¶</a></h3>
<p>Pandas has gained the ability to hold integer dtypes with missing values. This long requested feature is enabled through the use of <a class="reference internal" href="../../developers/extending.html#extending-extension-types"><span class="std std-ref">extension types</span></a>.
Here is an example of the usage.</p>
<p>We can construct a <code class="docutils literal notranslate"><span class="pre">Series</span></code> with the specified dtype. The dtype string <code class="docutils literal notranslate"><span class="pre">Int64</span></code> is a pandas <code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code>. Specifying a list or array using the traditional missing value
marker of <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> will infer to integer dtype. The display of the <code class="docutils literal notranslate"><span class="pre">Series</span></code> will also use the <code class="docutils literal notranslate"><span class="pre">NaN</span></code> to indicate missing values in string outputs. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20700">GH20700</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20747">GH20747</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22441">GH22441</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21789">GH21789</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22346">GH22346</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;Int64&#39;</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mf">459e69</span><span class="n">bb2ee7</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;Int64&#39;</span><span class="p">)</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/series.py</span> in <span class="ni">__init__</span><span class="nt">(self, data, index, dtype, name, copy, fastpath)</span>
<span class="g g-Whitespace">    </span><span class="mi">273</span>             <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">274</span>                 <span class="n">data</span> <span class="o">=</span> <span class="n">_sanitize_array</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span> <span class="n">copy</span><span class="p">,</span>
<span class="ne">--&gt; </span><span class="mi">275</span>                                        <span class="n">raise_cast_failure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">276</span> 
<span class="g g-Whitespace">    </span><span class="mi">277</span>                 <span class="n">data</span> <span class="o">=</span> <span class="n">SingleBlockManager</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">fastpath</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/series.py</span> in <span class="ni">_sanitize_array</span><span class="nt">(data, index, dtype, copy, raise_cast_failure)</span>
<span class="g g-Whitespace">   </span><span class="mi">4112</span>         <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">4113</span>             <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">4114</span>                 <span class="n">subarr</span> <span class="o">=</span> <span class="n">_try_cast</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4115</span>             <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">4116</span>                 <span class="k">if</span> <span class="n">raise_cast_failure</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/series.py</span> in <span class="ni">_try_cast</span><span class="nt">(arr, take_fast_path)</span>
<span class="g g-Whitespace">   </span><span class="mi">4051</span>             <span class="k">elif</span> <span class="ow">not</span> <span class="n">is_extension_type</span><span class="p">(</span><span class="n">subarr</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">4052</span>                 <span class="n">subarr</span> <span class="o">=</span> <span class="n">construct_1d_ndarray_preserving_na</span><span class="p">(</span><span class="n">subarr</span><span class="p">,</span> <span class="n">dtype</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">4053</span>                                                             <span class="n">copy</span><span class="o">=</span><span class="n">copy</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4054</span>         <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">4055</span>             <span class="k">if</span> <span class="n">is_categorical_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">):</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/dtypes/cast.py</span> in <span class="ni">construct_1d_ndarray_preserving_na</span><span class="nt">(values, dtype, copy)</span>
<span class="g g-Whitespace">   </span><span class="mi">1255</span> 
<span class="g g-Whitespace">   </span><span class="mi">1256</span>     <span class="s2">&quot;&quot;&quot;</span>
<span class="ne">-&gt; </span><span class="mi">1257</span><span class="s2">     subarr = np.array(values, dtype=dtype, copy=copy)</span>
<span class="g g-Whitespace">   </span><span class="mi">1258</span><span class="s2"> </span>
<span class="g g-Whitespace">   </span><span class="mi">1259</span><span class="s2">     if dtype is not None and dtype.kind in (&quot;U&quot;, &quot;S&quot;):</span>

<span class="ne">ValueError</span>: cannot convert float NaN to integer

<span class="gp">In [12]: </span><span class="n">s</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Out[12]: </span>
<span class="go">0    number 10</span>
<span class="go">1      12 eggs</span>
<span class="go">Length: 2, dtype: object</span>
</pre></div>
</div>
<p>Operations on these dtypes will propagate <code class="docutils literal notranslate"><span class="pre">NaN</span></code> as other pandas operations.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># arithmetic</span>
<span class="gp">In [13]: </span><span class="n">s</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py</span> in <span class="ni">na_op</span><span class="nt">(x, y)</span>
<span class="g g-Whitespace">   </span><span class="mi">1011</span>         <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">1012</span>             <span class="n">result</span> <span class="o">=</span> <span class="n">expressions</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">str_rep</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">eval_kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1013</span>         <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/computation/expressions.py</span> in <span class="ni">evaluate</span><span class="nt">(op, op_str, a, b, use_numexpr, **eval_kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">204</span>     <span class="k">if</span> <span class="n">use_numexpr</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">205</span>         <span class="k">return</span> <span class="n">_evaluate</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">op_str</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">**</span><span class="n">eval_kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">206</span>     <span class="k">return</span> <span class="n">_evaluate_standard</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">op_str</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/computation/expressions.py</span> in <span class="ni">_evaluate_standard</span><span class="nt">(op, op_str, a, b, **eval_kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">64</span>     <span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="nb">all</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">):</span>
<span class="ne">---&gt; </span><span class="mi">65</span>         <span class="k">return</span> <span class="n">op</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">66</span> 

<span class="ne">TypeError</span>: can only concatenate str (not &quot;int&quot;) to str

<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py</span> in <span class="ni">safe_na_op</span><span class="nt">(lvalues, rvalues)</span>
<span class="g g-Whitespace">   </span><span class="mi">1032</span>             <span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="nb">all</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">):</span>
<span class="ne">-&gt; </span><span class="mi">1033</span>                 <span class="k">return</span> <span class="n">na_op</span><span class="p">(</span><span class="n">lvalues</span><span class="p">,</span> <span class="n">rvalues</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1034</span>         <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py</span> in <span class="ni">na_op</span><span class="nt">(x, y)</span>
<span class="g g-Whitespace">   </span><span class="mi">1022</span>                 <span class="n">mask</span> <span class="o">=</span> <span class="n">notna</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1023</span>                 <span class="n">result</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">=</span> <span class="n">op</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">mask</span><span class="p">],</span> <span class="n">y</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1024</span> 

<span class="ne">TypeError</span>: can only concatenate str (not &quot;int&quot;) to str

<span class="n">During</span> <span class="n">handling</span> <span class="n">of</span> <span class="n">the</span> <span class="n">above</span> <span class="n">exception</span><span class="p">,</span> <span class="n">another</span> <span class="n">exception</span> <span class="n">occurred</span><span class="p">:</span>

<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">13</span><span class="o">-</span><span class="n">b8bba336fa32</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">s</span> <span class="o">+</span> <span class="mi">1</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py</span> in <span class="ni">wrapper</span><span class="nt">(left, right)</span>
<span class="g g-Whitespace">   </span><span class="mi">1067</span>             <span class="n">rvalues</span> <span class="o">=</span> <span class="n">rvalues</span><span class="o">.</span><span class="n">values</span>
<span class="g g-Whitespace">   </span><span class="mi">1068</span> 
<span class="ne">-&gt; </span><span class="mi">1069</span>         <span class="n">result</span> <span class="o">=</span> <span class="n">safe_na_op</span><span class="p">(</span><span class="n">lvalues</span><span class="p">,</span> <span class="n">rvalues</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1070</span>         <span class="k">return</span> <span class="n">construct_result</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1071</span>                                 <span class="n">index</span><span class="o">=</span><span class="n">left</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">res_name</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py</span> in <span class="ni">safe_na_op</span><span class="nt">(lvalues, rvalues)</span>
<span class="g g-Whitespace">   </span><span class="mi">1035</span>             <span class="k">if</span> <span class="n">is_object_dtype</span><span class="p">(</span><span class="n">lvalues</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1036</span>                 <span class="k">return</span> <span class="n">libalgos</span><span class="o">.</span><span class="n">arrmap_object</span><span class="p">(</span><span class="n">lvalues</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">1037</span>                                               <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">op</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">rvalues</span><span class="p">))</span>
<span class="g g-Whitespace">   </span><span class="mi">1038</span>             <span class="k">raise</span>
<span class="g g-Whitespace">   </span><span class="mi">1039</span> 

<span class="nn">pandas/_libs/algos_common_helper.pxi</span> in <span class="ni">pandas._libs.algos.arrmap_object</span><span class="nt">()</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py</span> in <span class="ni">&lt;lambda&gt;</span><span class="nt">(x)</span>
<span class="g g-Whitespace">   </span><span class="mi">1035</span>             <span class="k">if</span> <span class="n">is_object_dtype</span><span class="p">(</span><span class="n">lvalues</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1036</span>                 <span class="k">return</span> <span class="n">libalgos</span><span class="o">.</span><span class="n">arrmap_object</span><span class="p">(</span><span class="n">lvalues</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">1037</span>                                               <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">op</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">rvalues</span><span class="p">))</span>
<span class="g g-Whitespace">   </span><span class="mi">1038</span>             <span class="k">raise</span>
<span class="g g-Whitespace">   </span><span class="mi">1039</span> 

<span class="ne">TypeError</span>: can only concatenate str (not &quot;int&quot;) to str

<span class="c1"># comparison</span>
<span class="gp">In [14]: </span><span class="n">s</span> <span class="o">==</span> <span class="mi">1</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             Out[14]: </span>
<span class="go">0    False</span>
<span class="go">1    False</span>
<span class="go">Length: 2, dtype: bool</span>

<span class="go"># indexing</span>
<span class="gp">In [15]: </span><span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    Out[15]: </span>
<span class="go">1    12 eggs</span>
<span class="go">Length: 1, dtype: object</span>

<span class="go"># operate with other dtypes</span>
<span class="gp">In [16]: </span><span class="n">s</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;Int8&#39;</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    ---------------------------------------------------------------------------</span>
<span class="go">ValueError                                Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-16-ebdac60b9b37&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 s + s.iloc[1:3].astype(&#39;Int8&#39;)</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/util/_decorators.py in wrapper(*args, **kwargs)</span>
<span class="go">    176                 else:</span>
<span class="go">    177                     kwargs[new_arg_name] = new_arg_value</span>
<span class="go">--&gt; 178             return func(*args, **kwargs)</span>
<span class="go">    179         return wrapper</span>
<span class="go">    180     return _deprecate_kwarg</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/generic.py in astype(self, dtype, copy, errors, **kwargs)</span>
<span class="go">   4999             # else, only a single dtype is given</span>
<span class="go">   5000             new_data = self._data.astype(dtype=dtype, copy=copy, errors=errors,</span>
<span class="go">-&gt; 5001                                          **kwargs)</span>
<span class="go">   5002             return self._constructor(new_data).__finalize__(self)</span>
<span class="go">   5003 </span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/internals.py in astype(self, dtype, **kwargs)</span>
<span class="go">   3712 </span>
<span class="go">   3713     def astype(self, dtype, **kwargs):</span>
<span class="go">-&gt; 3714         return self.apply(&#39;astype&#39;, dtype=dtype, **kwargs)</span>
<span class="go">   3715 </span>
<span class="go">   3716     def convert(self, **kwargs):</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/internals.py in apply(self, f, axes, filter, do_integrity_check, consolidate, **kwargs)</span>
<span class="go">   3579 </span>
<span class="go">   3580             kwargs[&#39;mgr&#39;] = self</span>
<span class="go">-&gt; 3581             applied = getattr(b, f)(**kwargs)</span>
<span class="go">   3582             result_blocks = _extend_blocks(applied, result_blocks)</span>
<span class="go">   3583 </span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/internals.py in astype(self, dtype, copy, errors, values, **kwargs)</span>
<span class="go">    573     def astype(self, dtype, copy=False, errors=&#39;raise&#39;, values=None, **kwargs):</span>
<span class="go">    574         return self._astype(dtype, copy=copy, errors=errors, values=values,</span>
<span class="go">--&gt; 575                             **kwargs)</span>
<span class="go">    576 </span>
<span class="go">    577     def _astype(self, dtype, copy=False, errors=&#39;raise&#39;, values=None,</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/internals.py in _astype(self, dtype, copy, errors, values, klass, mgr, **kwargs)</span>
<span class="go">    662 </span>
<span class="go">    663                 # _astype_nansafe works fine with 1-d only</span>
<span class="go">--&gt; 664                 values = astype_nansafe(values.ravel(), dtype, copy=True)</span>
<span class="go">    665                 values = values.reshape(self.shape)</span>
<span class="go">    666 </span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/dtypes/cast.py in astype_nansafe(arr, dtype, copy)</span>
<span class="go">    707         # work around NumPy brokenness, #1987</span>
<span class="go">    708         if np.issubdtype(dtype.type, np.integer):</span>
<span class="go">--&gt; 709             return lib.astype_intsafe(arr.ravel(), dtype).reshape(arr.shape)</span>
<span class="go">    710 </span>
<span class="go">    711         # if we have a datetime/timedelta array of objects</span>

<span class="go">pandas/_libs/lib.pyx in pandas._libs.lib.astype_intsafe()</span>

<span class="go">pandas/_libs/src/util.pxd in util.set_value_at_unsafe()</span>

<span class="go">ValueError: invalid literal for int() with base 10: &#39;12 eggs&#39;</span>

<span class="go"># coerce when needed</span>
<span class="gp">In [17]: </span><span class="n">s</span> <span class="o">+</span> <span class="mf">0.01</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        ---------------------------------------------------------------------------</span>
<span class="go">TypeError                                 Traceback (most recent call last)</span>
<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in na_op(x, y)</span>
<span class="go">   1011         try:</span>
<span class="go">-&gt; 1012             result = expressions.evaluate(op, str_rep, x, y, **eval_kwargs)</span>
<span class="go">   1013         except TypeError:</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/computation/expressions.py in evaluate(op, op_str, a, b, use_numexpr, **eval_kwargs)</span>
<span class="go">    204     if use_numexpr:</span>
<span class="go">--&gt; 205         return _evaluate(op, op_str, a, b, **eval_kwargs)</span>
<span class="go">    206     return _evaluate_standard(op, op_str, a, b)</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/computation/expressions.py in _evaluate_standard(op, op_str, a, b, **eval_kwargs)</span>
<span class="go">     64     with np.errstate(all=&#39;ignore&#39;):</span>
<span class="go">---&gt; 65         return op(a, b)</span>
<span class="go">     66 </span>

<span class="go">TypeError: can only concatenate str (not &quot;float&quot;) to str</span>

<span class="go">During handling of the above exception, another exception occurred:</span>

<span class="go">TypeError                                 Traceback (most recent call last)</span>
<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in safe_na_op(lvalues, rvalues)</span>
<span class="go">   1032             with np.errstate(all=&#39;ignore&#39;):</span>
<span class="go">-&gt; 1033                 return na_op(lvalues, rvalues)</span>
<span class="go">   1034         except Exception:</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in na_op(x, y)</span>
<span class="go">   1022                 mask = notna(x)</span>
<span class="go">-&gt; 1023                 result[mask] = op(x[mask], y)</span>
<span class="go">   1024 </span>

<span class="go">TypeError: can only concatenate str (not &quot;float&quot;) to str</span>

<span class="go">During handling of the above exception, another exception occurred:</span>

<span class="go">TypeError                                 Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-17-3c677df6ddef&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 s + 0.01</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in wrapper(left, right)</span>
<span class="go">   1067             rvalues = rvalues.values</span>
<span class="go">   1068 </span>
<span class="go">-&gt; 1069         result = safe_na_op(lvalues, rvalues)</span>
<span class="go">   1070         return construct_result(left, result,</span>
<span class="go">   1071                                 index=left.index, name=res_name, dtype=None)</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in safe_na_op(lvalues, rvalues)</span>
<span class="go">   1035             if is_object_dtype(lvalues):</span>
<span class="go">   1036                 return libalgos.arrmap_object(lvalues,</span>
<span class="go">-&gt; 1037                                               lambda x: op(x, rvalues))</span>
<span class="go">   1038             raise</span>
<span class="go">   1039 </span>

<span class="go">pandas/_libs/algos_common_helper.pxi in pandas._libs.algos.arrmap_object()</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in &lt;lambda&gt;(x)</span>
<span class="go">   1035             if is_object_dtype(lvalues):</span>
<span class="go">   1036                 return libalgos.arrmap_object(lvalues,</span>
<span class="go">-&gt; 1037                                               lambda x: op(x, rvalues))</span>
<span class="go">   1038             raise</span>
<span class="go">   1039 </span>

<span class="go">TypeError: can only concatenate str (not &quot;float&quot;) to str</span>
</pre></div>
</div>
<p>These dtypes can operate as part of of <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">s</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;aab&#39;</span><span class="p">)})</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">18</span><span class="o">-</span><span class="mf">56e6773</span><span class="n">b6c0d</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">s</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;aab&#39;</span><span class="p">)})</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/frame.py</span> in <span class="ni">__init__</span><span class="nt">(self, data, index, columns, dtype, copy)</span>
<span class="g g-Whitespace">    </span><span class="mi">346</span>                                  <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="n">copy</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">347</span>         <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">348</span>             <span class="n">mgr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_init_dict</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">349</span>         <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ma</span><span class="o">.</span><span class="n">MaskedArray</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">350</span>             <span class="kn">import</span> <span class="nn">numpy.ma.mrecords</span> <span class="kn">as</span> <span class="nn">mrecords</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/frame.py</span> in <span class="ni">_init_dict</span><span class="nt">(self, data, index, columns, dtype)</span>
<span class="g g-Whitespace">    </span><span class="mi">457</span>             <span class="n">arrays</span> <span class="o">=</span> <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">458</span> 
<span class="ne">--&gt; </span><span class="mi">459</span>         <span class="k">return</span> <span class="n">_arrays_to_mgr</span><span class="p">(</span><span class="n">arrays</span><span class="p">,</span> <span class="n">data_names</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">460</span> 
<span class="g g-Whitespace">    </span><span class="mi">461</span>     <span class="k">def</span> <span class="nf">_init_ndarray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/frame.py</span> in <span class="ni">_arrays_to_mgr</span><span class="nt">(arrays, arr_names, index, columns, dtype)</span>
<span class="g g-Whitespace">   </span><span class="mi">7354</span>     <span class="c1"># figure out the index, if necessary</span>
<span class="g g-Whitespace">   </span><span class="mi">7355</span>     <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">7356</span>         <span class="n">index</span> <span class="o">=</span> <span class="n">extract_index</span><span class="p">(</span><span class="n">arrays</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">7357</span> 
<span class="g g-Whitespace">   </span><span class="mi">7358</span>     <span class="c1"># don&#39;t force copy because getting jammed in an ndarray anyway</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/frame.py</span> in <span class="ni">extract_index</span><span class="nt">(data)</span>
<span class="g g-Whitespace">   </span><span class="mi">7410</span>                     <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;array length </span><span class="si">%d</span><span class="s1"> does not match index length </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span>
<span class="g g-Whitespace">   </span><span class="mi">7411</span>                            <span class="p">(</span><span class="n">lengths</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)))</span>
<span class="ne">-&gt; </span><span class="mi">7412</span>                     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">7413</span>             <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">7414</span>                 <span class="n">index</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">_default_index</span><span class="p">(</span><span class="n">lengths</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="ne">ValueError</span>: array length 3 does not match index length 2

<span class="gp">In [19]: </span><span class="n">df</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Out[19]: </span>
<span class="go">   A      B</span>
<span class="go">0  1   True</span>
<span class="go">1  2  False</span>

<span class="go">[2 rows x 2 columns]</span>

<span class="gp">In [20]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Out[20]: </span>
<span class="go">A    int64</span>
<span class="go">B     bool</span>
<span class="go">Length: 2, dtype: object</span>
</pre></div>
</div>
<p>These dtypes can be merged &amp; reshaped &amp; casted.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [21]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">]],</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">]]],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">21</span><span class="o">-</span><span class="mi">897083626264</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">[[</span><span class="s1">&#39;A&#39;</span><span class="p">]],</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">]]],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/frame.py</span> in <span class="ni">__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">2680</span>         <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="p">(</span><span class="n">Series</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">Index</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
<span class="g g-Whitespace">   </span><span class="mi">2681</span>             <span class="c1"># either boolean or fancy integer index</span>
<span class="ne">-&gt; </span><span class="mi">2682</span>             <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_array</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2683</span>         <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">DataFrame</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">2684</span>             <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_frame</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/frame.py</span> in <span class="ni">_getitem_array</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">2724</span>             <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_take</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2725</span>         <span class="k">else</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">2726</span>             <span class="n">indexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loc</span><span class="o">.</span><span class="n">_convert_to_indexer</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2727</span>             <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_take</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2728</span> 

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/indexing.py</span> in <span class="ni">_convert_to_indexer</span><span class="nt">(self, obj, axis, is_setter)</span>
<span class="g g-Whitespace">   </span><span class="mi">1325</span>                 <span class="k">if</span> <span class="n">mask</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
<span class="g g-Whitespace">   </span><span class="mi">1326</span>                     <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s1">&#39;{mask} not in index&#39;</span>
<span class="ne">-&gt; </span><span class="mi">1327</span>                                    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="n">objarr</span><span class="p">[</span><span class="n">mask</span><span class="p">]))</span>
<span class="g g-Whitespace">   </span><span class="mi">1328</span> 
<span class="g g-Whitespace">   </span><span class="mi">1329</span>                 <span class="k">return</span> <span class="n">com</span><span class="o">.</span><span class="n">_values_from_object</span><span class="p">(</span><span class="n">indexer</span><span class="p">)</span>

<span class="ne">KeyError</span>: &quot;[&#39;C&#39;] not in index&quot;

<span class="gp">In [22]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  Out[22]: </span>
<span class="go">0    1.0</span>
<span class="go">1    2.0</span>
<span class="go">Name: A, Length: 2, dtype: float64</span>
</pre></div>
</div>
<p>Reduction and groupby operations such as ‘sum’ work.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [23]: </span><span class="n">df</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[23]: </span><span class="go"></span>
<span class="go">A    3.0</span>
<span class="go">B    1.0</span>
<span class="go">Length: 2, dtype: float64</span>

<span class="gp">In [24]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">A</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="go">                                                      Out[24]: </span>
<span class="go">B</span>
<span class="go">False    2</span>
<span class="go">True     1</span>
<span class="go">Name: A, Length: 2, dtype: int64</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The Integer NA support currently uses the captilized dtype version, e.g. <code class="docutils literal notranslate"><span class="pre">Int8</span></code> as compared to the traditional <code class="docutils literal notranslate"><span class="pre">int8</span></code>. This may be changed at a future date.</p>
</div>
</div>
<div class="section" id="read-html-enhancements">
<span id="whatsnew-0240-enhancements-read-html"></span><h3><code class="docutils literal notranslate"><span class="pre">read_html</span></code> Enhancements<a class="headerlink" href="#read-html-enhancements" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../../generated/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> previously ignored <code class="docutils literal notranslate"><span class="pre">colspan</span></code> and <code class="docutils literal notranslate"><span class="pre">rowspan</span></code> attributes.
Now it understands them, treating them as sequences of cells with the same
value. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/17054">GH17054</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_html</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="gp">   ....: </span><span class="s2">  &lt;table&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;thead&gt;</span>
<span class="gp">   ....: </span><span class="s2">      &lt;tr&gt;</span>
<span class="gp">   ....: </span><span class="s2">        &lt;th&gt;A&lt;/th&gt;&lt;th&gt;B&lt;/th&gt;&lt;th&gt;C&lt;/th&gt;</span>
<span class="gp">   ....: </span><span class="s2">      &lt;/tr&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;/thead&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;tbody&gt;</span>
<span class="gp">   ....: </span><span class="s2">      &lt;tr&gt;</span>
<span class="gp">   ....: </span><span class="s2">        &lt;td colspan=&quot;2&quot;&gt;1&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;</span>
<span class="gp">   ....: </span><span class="s2">      &lt;/tr&gt;</span>
<span class="gp">   ....: </span><span class="s2">    &lt;/tbody&gt;</span>
<span class="gp">   ....: </span><span class="s2">  &lt;/table&gt;&quot;&quot;&quot;</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ImportError</span><span class="g g-Whitespace">                               </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">25</span><span class="o">-</span><span class="mi">6060623</span><span class="n">c5063</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span>       <span class="o">&lt;/</span><span class="n">tr</span><span class="o">&gt;</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span>     <span class="o">&lt;/</span><span class="n">tbody</span><span class="o">&gt;</span>
<span class="ne">---&gt; </span><span class="mi">13</span>   <span class="o">&lt;/</span><span class="n">table</span><span class="o">&gt;</span><span class="s2">&quot;&quot;&quot;)</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/io/html.py</span> in <span class="ni">read_html</span><span class="nt">(io, match, flavor, header, index_col, skiprows, attrs, parse_dates, tupleize_cols, thousands, encoding, decimal, converters, na_values, keep_default_na, displayed_only)</span>
<span class="g g-Whitespace">    </span><span class="mi">985</span><span class="s2">                   decimal=decimal, converters=converters, na_values=na_values,</span>
<span class="g g-Whitespace">    </span><span class="mi">986</span><span class="s2">                   keep_default_na=keep_default_na,</span>
<span class="ne">--&gt; </span><span class="mi">987</span><span class="s2">                   displayed_only=displayed_only)</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/io/html.py</span> in <span class="ni">_parse</span><span class="nt">(flavor, io, match, attrs, encoding, displayed_only, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">791</span><span class="s2">     retained = None</span>
<span class="g g-Whitespace">    </span><span class="mi">792</span><span class="s2">     for flav in flavor:</span>
<span class="ne">--&gt; </span><span class="mi">793</span><span class="s2">         parser = _parser_dispatch(flav)</span>
<span class="g g-Whitespace">    </span><span class="mi">794</span><span class="s2">         p = parser(io, compiled_match, attrs, encoding, displayed_only)</span>
<span class="g g-Whitespace">    </span><span class="mi">795</span><span class="s2"> </span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/io/html.py</span> in <span class="ni">_parser_dispatch</span><span class="nt">(flavor)</span>
<span class="g g-Whitespace">    </span><span class="mi">749</span><span class="s2">     else:</span>
<span class="g g-Whitespace">    </span><span class="mi">750</span><span class="s2">         if not _HAS_LXML:</span>
<span class="ne">--&gt; </span><span class="mi">751</span><span class="s2">             raise ImportError(&quot;lxml not found, please install it&quot;)</span>
<span class="g g-Whitespace">    </span><span class="mi">752</span><span class="s2">     return _valid_parsers[flavor]</span>
<span class="g g-Whitespace">    </span><span class="mi">753</span><span class="s2"> </span>

<span class="ne">ImportError</span>: lxml not found, please install it
</pre></div>
</div>
<p>Previous Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">result</span>
<span class="go">Out [13]:</span>
<span class="go">[   A  B   C</span>
<span class="go"> 0  1  2 NaN]</span>
</pre></div>
</div>
<p>Current Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [26]: </span><span class="n">result</span>
<span class="gh">Out[26]: </span><span class="go"></span>
<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 4 (items) x 5 (major_axis) x 3 (minor_axis)</span>
<span class="go">Items axis: A to D</span>
<span class="go">Major_axis axis: 2000-01-03 00:00:00 to 2000-01-07 00:00:00</span>
<span class="go">Minor_axis axis: ItemA to ItemC</span>
</pre></div>
</div>
</div>
<div class="section" id="storing-interval-and-period-data-in-series-and-dataframe">
<span id="whatsnew-0240-enhancements-interval"></span><h3>Storing Interval and Period Data in Series and DataFrame<a class="headerlink" href="#storing-interval-and-period-data-in-series-and-dataframe" title="Permalink to this headline">¶</a></h3>
<p>Interval and Period data may now be stored in a <code class="docutils literal notranslate"><span class="pre">Series</span></code> or <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, in addition to an
<a class="reference internal" href="../../generated/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> and <a class="reference internal" href="../../generated/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> like previously (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19453">GH19453</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22862">GH22862</a>).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [27]: </span><span class="n">ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">interval_range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="gp">In [28]: </span><span class="n">ser</span>
<span class="gh">Out[28]: </span><span class="go"></span>
<span class="go">0    (0, 1]</span>
<span class="go">1    (1, 2]</span>
<span class="go">2    (2, 3]</span>
<span class="go">3    (3, 4]</span>
<span class="go">4    (4, 5]</span>
<span class="go">Length: 5, dtype: object</span>

<span class="gp">In [29]: </span><span class="n">ser</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">                                                                                               Out[29]: dtype(&#39;O&#39;)</span>
</pre></div>
</div>
<p>And for periods:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [30]: </span><span class="n">pser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;2000&quot;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>

<span class="gp">In [31]: </span><span class="n">pser</span>
<span class="gh">Out[31]: </span><span class="go"></span>
<span class="go">0   2000-01-01</span>
<span class="go">1   2000-01-02</span>
<span class="go">2   2000-01-03</span>
<span class="go">3   2000-01-04</span>
<span class="go">4   2000-01-05</span>
<span class="go">Length: 5, dtype: datetime64[ns]</span>

<span class="gp">In [32]: </span><span class="n">pser</span><span class="o">.</span><span class="n">dtype</span>
<span class="go">                                                                                                                      Out[32]: dtype(&#39;&lt;M8[ns]&#39;)</span>
</pre></div>
</div>
<p>Previously, these would be cast to a NumPy array with object dtype. In general,
this should result in better performance when storing an array of intervals or periods
in a <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> or column of a <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a>.</p>
<p>Use <code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.array</span></code> to extract the underlying array of intervals or periods
from the <code class="docutils literal notranslate"><span class="pre">Series</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">ipython</span><span class="p">::</span> <span class="n">python</span>
</pre></div>
</div>
<blockquote>
<div>ser.array
pser.array</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">For backwards compatibility, <a class="reference internal" href="../../generated/pandas.Series.values.html#pandas.Series.values" title="pandas.Series.values"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.values</span></code></a> continues to return
a NumPy array of objects for Interval and Period data. We recommend
using <code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.array</span></code> when you need the array of data stored in the
<code class="docutils literal notranslate"><span class="pre">Series</span></code>, and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_numpy()</span></code> when you know you need a NumPy array.
See <a class="reference internal" href="../../getting_started/basics.html#basics-dtypes"><span class="std std-ref">dtypes</span></a> and <span class="xref std std-ref">dsintro.attrs</span> for more.</p>
</div>
</div>
<div class="section" id="new-styler-pipe-method">
<span id="whatsnew-0240-enhancements-styler-pipe"></span><h3>New <code class="docutils literal notranslate"><span class="pre">Styler.pipe()</span></code> method<a class="headerlink" href="#new-styler-pipe-method" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="../../generated/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">Styler</span></code></a> class has gained a
<code class="xref py py-meth docutils literal notranslate"><span class="pre">pipe()</span></code> method (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23229">GH23229</a>).  This provides a
convenient way to apply users’ predefined styling functions, and can help reduce
“boilerplate” when using DataFrame styling functionality repeatedly within a notebook.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [33]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1250</span><span class="p">,</span> <span class="mi">1500</span><span class="p">,</span> <span class="mi">1750</span><span class="p">],</span> <span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.50</span><span class="p">]})</span>

<span class="gp">In [34]: </span><span class="k">def</span> <span class="nf">format_and_align</span><span class="p">(</span><span class="n">styler</span><span class="p">):</span>
<span class="gp">   ....: </span>    <span class="k">return</span> <span class="p">(</span><span class="n">styler</span><span class="o">.</span><span class="n">format</span><span class="p">({</span><span class="s1">&#39;N&#39;</span><span class="p">:</span> <span class="s1">&#39;{:,}&#39;</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="s1">&#39;{:.1%}&#39;</span><span class="p">})</span>
<span class="gp">   ....: </span>                  <span class="o">.</span><span class="n">set_properties</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">&#39;text-align&#39;</span><span class="p">:</span> <span class="s1">&#39;right&#39;</span><span class="p">}))</span>
<span class="gp">   ....: </span>

<span class="gp">In [35]: </span><span class="n">df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">format_and_align</span><span class="p">)</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s1">&#39;Summary of results.&#39;</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">35</span><span class="o">-</span><span class="mi">18</span><span class="n">f4c2fb631e</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">format_and_align</span><span class="p">)</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s1">&#39;Summary of results.&#39;</span><span class="p">)</span>

<span class="ne">AttributeError</span>: &#39;Styler&#39; object has no attribute &#39;pipe&#39;
</pre></div>
</div>
<p>Similar methods already exist for other classes in pandas, including <a class="reference internal" href="../../generated/pandas.DataFrame.pipe.html#pandas.DataFrame.pipe" title="pandas.DataFrame.pipe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.pipe()</span></code></a>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Groupby.pipe()</span></code>, and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.pipe()</span></code>.</p>
</div>
<div class="section" id="joining-with-two-multi-indexes">
<span id="whatsnew-0240-enhancements-join-with-two-multiindexes"></span><h3>Joining with two multi-indexes<a class="headerlink" href="#joining-with-two-multi-indexes" title="Permalink to this headline">¶</a></h3>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">Datafame.merge()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">Dataframe.join()</span></code> can now be used to join multi-indexed <code class="docutils literal notranslate"><span class="pre">Dataframe</span></code> instances on the overlaping index levels (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/6360">GH6360</a>)</p>
<p>See the <span class="xref std std-ref">Merge, join, and concatenate</span> documentation section.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [36]: </span><span class="n">index_left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s1">&#39;K0&#39;</span><span class="p">,</span> <span class="s1">&#39;X0&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;K0&#39;</span><span class="p">,</span> <span class="s1">&#39;X1&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>                                       <span class="p">(</span><span class="s1">&#39;K1&#39;</span><span class="p">,</span> <span class="s1">&#39;X2&#39;</span><span class="p">)],</span>
<span class="gp">   ....: </span>                                       <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">])</span>
<span class="gp">   ....: </span>

<span class="gp">In [37]: </span><span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;A0&#39;</span><span class="p">,</span> <span class="s1">&#39;A1&#39;</span><span class="p">,</span> <span class="s1">&#39;A2&#39;</span><span class="p">],</span>
<span class="gp">   ....: </span>                     <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;B0&#39;</span><span class="p">,</span> <span class="s1">&#39;B1&#39;</span><span class="p">,</span> <span class="s1">&#39;B2&#39;</span><span class="p">]},</span>
<span class="gp">   ....: </span>                      <span class="n">index</span><span class="o">=</span><span class="n">index_left</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [38]: </span><span class="n">index_right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="s1">&#39;K0&#39;</span><span class="p">,</span> <span class="s1">&#39;Y0&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;K1&#39;</span><span class="p">,</span> <span class="s1">&#39;Y1&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>                                        <span class="p">(</span><span class="s1">&#39;K2&#39;</span><span class="p">,</span> <span class="s1">&#39;Y2&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;K2&#39;</span><span class="p">,</span> <span class="s1">&#39;Y3&#39;</span><span class="p">)],</span>
<span class="gp">   ....: </span>                                        <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">])</span>
<span class="gp">   ....: </span>

<span class="gp">In [39]: </span><span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;C0&#39;</span><span class="p">,</span> <span class="s1">&#39;C1&#39;</span><span class="p">,</span> <span class="s1">&#39;C2&#39;</span><span class="p">,</span> <span class="s1">&#39;C3&#39;</span><span class="p">],</span>
<span class="gp">   ....: </span>                      <span class="s1">&#39;D&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;D0&#39;</span><span class="p">,</span> <span class="s1">&#39;D1&#39;</span><span class="p">,</span> <span class="s1">&#39;D2&#39;</span><span class="p">,</span> <span class="s1">&#39;D3&#39;</span><span class="p">]},</span>
<span class="gp">   ....: </span>                     <span class="n">index</span><span class="o">=</span><span class="n">index_right</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [40]: </span><span class="n">left</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NotImplementedError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">40</span><span class="o">-</span><span class="mi">894480</span><span class="n">a0fafb</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">left</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/frame.py</span> in <span class="ni">join</span><span class="nt">(self, other, on, how, lsuffix, rsuffix, sort)</span>
<span class="g g-Whitespace">   </span><span class="mi">6334</span>         <span class="c1"># For SparseDataFrame&#39;s benefit</span>
<span class="g g-Whitespace">   </span><span class="mi">6335</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_join_compat</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="n">on</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="n">how</span><span class="p">,</span> <span class="n">lsuffix</span><span class="o">=</span><span class="n">lsuffix</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">6336</span>                                  <span class="n">rsuffix</span><span class="o">=</span><span class="n">rsuffix</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="n">sort</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6337</span> 
<span class="g g-Whitespace">   </span><span class="mi">6338</span>     <span class="k">def</span> <span class="nf">_join_compat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">lsuffix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">rsuffix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/frame.py</span> in <span class="ni">_join_compat</span><span class="nt">(self, other, on, how, lsuffix, rsuffix, sort)</span>
<span class="g g-Whitespace">   </span><span class="mi">6349</span>             <span class="k">return</span> <span class="n">merge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">left_on</span><span class="o">=</span><span class="n">on</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="n">how</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">6350</span>                          <span class="n">left_index</span><span class="o">=</span><span class="n">on</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">6351</span>                          <span class="n">suffixes</span><span class="o">=</span><span class="p">(</span><span class="n">lsuffix</span><span class="p">,</span> <span class="n">rsuffix</span><span class="p">),</span> <span class="n">sort</span><span class="o">=</span><span class="n">sort</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6352</span>         <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">6353</span>             <span class="k">if</span> <span class="n">on</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/reshape/merge.py</span> in <span class="ni">merge</span><span class="nt">(left, right, how, on, left_on, right_on, left_index, right_index, sort, suffixes, copy, indicator, validate)</span>
<span class="g g-Whitespace">     </span><span class="mi">60</span>                          <span class="n">copy</span><span class="o">=</span><span class="n">copy</span><span class="p">,</span> <span class="n">indicator</span><span class="o">=</span><span class="n">indicator</span><span class="p">,</span>
<span class="g g-Whitespace">     </span><span class="mi">61</span>                          <span class="n">validate</span><span class="o">=</span><span class="n">validate</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">62</span>     <span class="k">return</span> <span class="n">op</span><span class="o">.</span><span class="n">get_result</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">63</span> 
<span class="g g-Whitespace">     </span><span class="mi">64</span> 

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/reshape/merge.py</span> in <span class="ni">get_result</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">566</span>                 <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">567</span> 
<span class="ne">--&gt; </span><span class="mi">568</span>         <span class="n">join_index</span><span class="p">,</span> <span class="n">left_indexer</span><span class="p">,</span> <span class="n">right_indexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_join_info</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">569</span> 
<span class="g g-Whitespace">    </span><span class="mi">570</span>         <span class="n">ldata</span><span class="p">,</span> <span class="n">rdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">_data</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/reshape/merge.py</span> in <span class="ni">_get_join_info</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">763</span>             <span class="n">join_index</span><span class="p">,</span> <span class="n">left_indexer</span><span class="p">,</span> <span class="n">right_indexer</span> <span class="o">=</span> \
<span class="g g-Whitespace">    </span><span class="mi">764</span>                 <span class="n">left_ax</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">right_ax</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">how</span><span class="p">,</span> <span class="n">return_indexers</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="ne">--&gt; </span><span class="mi">765</span>                              <span class="n">sort</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sort</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">766</span>         <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">right_index</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">how</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">767</span>             <span class="n">join_index</span><span class="p">,</span> <span class="n">left_indexer</span><span class="p">,</span> <span class="n">right_indexer</span> <span class="o">=</span> \

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/indexes/base.py</span> in <span class="ni">join</span><span class="nt">(self, other, how, level, return_indexers, sort)</span>
<span class="g g-Whitespace">   </span><span class="mi">3733</span>             <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">3734</span>                 <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_join_multi</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="n">how</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">3735</span>                                         <span class="n">return_indexers</span><span class="o">=</span><span class="n">return_indexers</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3736</span> 
<span class="g g-Whitespace">   </span><span class="mi">3737</span>         <span class="c1"># join on the level</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/indexes/base.py</span> in <span class="ni">_join_multi</span><span class="nt">(self, other, how, return_indexers)</span>
<span class="g g-Whitespace">   </span><span class="mi">3856</span> 
<span class="g g-Whitespace">   </span><span class="mi">3857</span>         <span class="c1"># 2 multi-indexes</span>
<span class="ne">-&gt; </span><span class="mi">3858</span>         <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;merging with both multi-indexes is not &quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">3859</span>                                   <span class="s2">&quot;implemented&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3860</span> 

<span class="ne">NotImplementedError</span>: merging with both multi-indexes is not implemented
</pre></div>
</div>
<p>For earlier versions this can be done using the following.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [41]: </span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">left</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span> <span class="n">right</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(),</span>
<span class="gp">   ....: </span>         <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">])</span>
<span class="gp">   ....: </span>
<span class="gh">Out[41]: </span><span class="go"></span>
<span class="go">            A   B   C   D</span>
<span class="go">key X  Y                 </span>
<span class="go">K0  X0 Y0  A0  B0  C0  D0</span>
<span class="go">    X1 Y0  A1  B1  C0  D0</span>
<span class="go">K1  X2 Y1  A2  B2  C1  D1</span>

<span class="go">[3 rows x 4 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="renaming-names-in-a-multiindex">
<span id="whatsnew-0240-enhancements-rename-axis"></span><h3>Renaming names in a MultiIndex<a class="headerlink" href="#renaming-names-in-a-multiindex" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../../generated/pandas.DataFrame.rename_axis.html#pandas.DataFrame.rename_axis" title="pandas.DataFrame.rename_axis"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.rename_axis()</span></code></a> now supports <code class="docutils literal notranslate"><span class="pre">index</span></code> and <code class="docutils literal notranslate"><span class="pre">columns</span></code> arguments
and <a class="reference internal" href="../../generated/pandas.Series.rename_axis.html#pandas.Series.rename_axis" title="pandas.Series.rename_axis"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.rename_axis()</span></code></a> supports <code class="docutils literal notranslate"><span class="pre">index</span></code> argument (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19978">GH19978</a>)</p>
<p>This change allows a dictionary to be passed so that some of the names
of a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> can be changed.</p>
<p>Example:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [42]: </span><span class="n">mi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;AB&#39;</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;CD&#39;</span><span class="p">),</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;EF&#39;</span><span class="p">)],</span>
<span class="gp">   ....: </span>                                <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;AB&#39;</span><span class="p">,</span> <span class="s1">&#39;CD&#39;</span><span class="p">,</span> <span class="s1">&#39;EF&#39;</span><span class="p">])</span>
<span class="gp">   ....: </span>

<span class="gp">In [43]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mi</span><span class="p">))],</span> <span class="n">index</span><span class="o">=</span><span class="n">mi</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">])</span>

<span class="gp">In [44]: </span><span class="n">df</span>
<span class="gh">Out[44]: </span><span class="go"></span>
<span class="go">          N</span>
<span class="go">AB CD EF   </span>
<span class="go">A  C  E   0</span>
<span class="go">      F   1</span>
<span class="go">   D  E   2</span>
<span class="go">      F   3</span>
<span class="go">B  C  E   4</span>
<span class="go">      F   5</span>
<span class="go">   D  E   6</span>
<span class="go">      F   7</span>

<span class="go">[8 rows x 1 columns]</span>

<span class="gp">In [45]: </span><span class="n">df</span><span class="o">.</span><span class="n">rename_axis</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;CD&#39;</span><span class="p">:</span> <span class="s1">&#39;New&#39;</span><span class="p">})</span>
<span class="go">                                                                                                                                                        ---------------------------------------------------------------------------</span>
<span class="go">TypeError                                 Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-45-ad35d6561092&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 df.rename_axis(index={&#39;CD&#39;: &#39;New&#39;})</span>

<span class="go">TypeError: rename_axis() got an unexpected keyword argument &#39;index&#39;</span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="../../user_guide/advanced.html#advanced-index-names"><span class="std std-ref">advanced docs on renaming</span></a> for more details.</p>
</div>
<div class="section" id="other-enhancements">
<span id="whatsnew-0240-enhancements-other"></span><h3>Other Enhancements<a class="headerlink" href="#other-enhancements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../generated/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> now supports the <code class="docutils literal notranslate"><span class="pre">%Z</span></code> and <code class="docutils literal notranslate"><span class="pre">%z</span></code> directive when passed into <code class="docutils literal notranslate"><span class="pre">format</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13486">GH13486</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.mode.html#pandas.Series.mode" title="pandas.Series.mode"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.mode()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.mode.html#pandas.DataFrame.mode" title="pandas.DataFrame.mode"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.mode()</span></code></a> now support the <code class="docutils literal notranslate"><span class="pre">dropna</span></code> parameter which can be used to specify whether <code class="docutils literal notranslate"><span class="pre">NaN</span></code>/<code class="docutils literal notranslate"><span class="pre">NaT</span></code> values should be considered (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/17534">GH17534</a>)</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">to_csv()</span></code> now supports <code class="docutils literal notranslate"><span class="pre">compression</span></code> keyword when a file handle is passed. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21227">GH21227</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.droplevel()</span></code> is now implemented also for flat indexes, for compatibility with <a class="reference internal" href="../../generated/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21115">GH21115</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.droplevel()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.droplevel()</span></code> are now implemented (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20342">GH20342</a>)</li>
<li>Added support for reading from/writing to Google Cloud Storage via the <code class="docutils literal notranslate"><span class="pre">gcsfs</span></code> library (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19454">GH19454</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23094">GH23094</a>)</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">to_gbq()</span></code> and <a class="reference internal" href="../../generated/pandas.read_gbq.html#pandas.read_gbq" title="pandas.read_gbq"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_gbq()</span></code></a> signature and documentation updated to
reflect changes from the <a class="reference external" href="https://pandas-gbq.readthedocs.io/en/latest/changelog.html#changelog-0-8-0">Pandas-GBQ library version 0.8.0</a>.
Adds a <code class="docutils literal notranslate"><span class="pre">credentials</span></code> argument, which enables the use of any kind of
<a class="reference external" href="https://google-auth.readthedocs.io/en/latest/">google-auth credentials</a>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21627">GH21627</a>,
<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22557">GH22557</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23662">GH23662</a>)</li>
<li>New method <code class="xref py py-meth docutils literal notranslate"><span class="pre">HDFStore.walk()</span></code> will recursively walk the group hierarchy of an HDF5 file (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10932">GH10932</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> copies cell data across <code class="docutils literal notranslate"><span class="pre">colspan</span></code> and <code class="docutils literal notranslate"><span class="pre">rowspan</span></code>, and it treats all-<code class="docutils literal notranslate"><span class="pre">th</span></code> table rows as headers if <code class="docutils literal notranslate"><span class="pre">header</span></code> kwarg is not given and there is no <code class="docutils literal notranslate"><span class="pre">thead</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/17054">GH17054</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.nlargest.html#pandas.Series.nlargest" title="pandas.Series.nlargest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.nlargest()</span></code></a>, <a class="reference internal" href="../../generated/pandas.Series.nsmallest.html#pandas.Series.nsmallest" title="pandas.Series.nsmallest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.nsmallest()</span></code></a>, <a class="reference internal" href="../../generated/pandas.DataFrame.nlargest.html#pandas.DataFrame.nlargest" title="pandas.DataFrame.nlargest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nlargest()</span></code></a>, and <a class="reference internal" href="../../generated/pandas.DataFrame.nsmallest.html#pandas.DataFrame.nsmallest" title="pandas.DataFrame.nsmallest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nsmallest()</span></code></a> now accept the value <code class="docutils literal notranslate"><span class="pre">&quot;all&quot;</span></code> for the <code class="docutils literal notranslate"><span class="pre">keep</span></code> argument. This keeps all ties for the nth largest/smallest value (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16818">GH16818</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> has gained the <code class="xref py py-meth docutils literal notranslate"><span class="pre">set_closed()</span></code> method to change the existing <code class="docutils literal notranslate"><span class="pre">closed</span></code> value (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21670">GH21670</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_csv()</span></code></a>, <a class="reference internal" href="../../generated/pandas.Series.to_csv.html#pandas.Series.to_csv" title="pandas.Series.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_csv()</span></code></a>, <a class="reference internal" href="../../generated/pandas.DataFrame.to_json.html#pandas.DataFrame.to_json" title="pandas.DataFrame.to_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_json()</span></code></a>, and <a class="reference internal" href="../../generated/pandas.Series.to_json.html#pandas.Series.to_json" title="pandas.Series.to_json"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_json()</span></code></a> now support <code class="docutils literal notranslate"><span class="pre">compression='infer'</span></code> to infer compression based on filename extension (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15008">GH15008</a>).
The default compression for <code class="docutils literal notranslate"><span class="pre">to_csv</span></code>, <code class="docutils literal notranslate"><span class="pre">to_json</span></code>, and <code class="docutils literal notranslate"><span class="pre">to_pickle</span></code> methods has been updated to <code class="docutils literal notranslate"><span class="pre">'infer'</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22004">GH22004</a>).</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.to_sql.html#pandas.DataFrame.to_sql" title="pandas.DataFrame.to_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code></a> now supports writing <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code> types for supported databases. For databases that don’t support timezones, datetime data will be stored as timezone unaware local timestamps. See the <a class="reference internal" href="../../user_guide/io.html#io-sql-datetime-data"><span class="std std-ref">Datetime data types</span></a> for implications (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9086">GH9086</a>).</li>
<li><a class="reference internal" href="../../generated/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_timedelta()</span></code></a> now supports iso-formated timedelta strings (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21877">GH21877</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> now support <code class="xref py py-class docutils literal notranslate"><span class="pre">Iterable</span></code> in constructor (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/2193">GH2193</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> gained <code class="xref py py-attr docutils literal notranslate"><span class="pre">DatetimeIndex.timetz</span></code> attribute. Returns local time with timezone information. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21358">GH21358</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">round()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">ceil()</span></code>, and meth:<cite>floor</cite> for <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> and <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> now support an <code class="docutils literal notranslate"><span class="pre">ambiguous</span></code> argument for handling datetimes that are rounded to ambiguous times (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/18946">GH18946</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">round()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">ceil()</span></code>, and meth:<cite>floor</cite> for <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> and <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> now support a <code class="docutils literal notranslate"><span class="pre">nonexistent</span></code> argument for handling datetimes that are rounded to nonexistent times. See <a class="reference internal" href="../../user_guide/timeseries.html#timeseries-timezone-nonexistent"><span class="std std-ref">Nonexistent Times when Localizing</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22647">GH22647</a>)</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">Resampler</span></code> now is iterable like <code class="xref py py-class docutils literal notranslate"><span class="pre">GroupBy</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15314">GH15314</a>).</li>
<li><a class="reference internal" href="../../generated/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> have gained the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.quantile()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15023">GH15023</a>).</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.core.dtypes.is_list_like()</span></code> has gained a keyword <code class="docutils literal notranslate"><span class="pre">allow_sets</span></code> which is <code class="docutils literal notranslate"><span class="pre">True</span></code> by default; if <code class="docutils literal notranslate"><span class="pre">False</span></code>,
all instances of <code class="docutils literal notranslate"><span class="pre">set</span></code> will not be considered “list-like” anymore (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23061">GH23061</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Index.to_frame.html#pandas.Index.to_frame" title="pandas.Index.to_frame"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.to_frame()</span></code></a> now supports overriding column name(s) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22580">GH22580</a>).</li>
<li>New attribute <code class="xref py py-attr docutils literal notranslate"><span class="pre">__git_version__</span></code> will return git commit sha of current build (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21295">GH21295</a>).</li>
<li>Compatibility with Matplotlib 3.0 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22790">GH22790</a>).</li>
<li>Added <code class="xref py py-meth docutils literal notranslate"><span class="pre">Interval.overlaps()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalArray.overlaps()</span></code>, and <code class="xref py py-meth docutils literal notranslate"><span class="pre">IntervalIndex.overlaps()</span></code> for determining overlaps between interval-like objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21998">GH21998</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_fwf.html#pandas.read_fwf" title="pandas.read_fwf"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_fwf()</span></code></a> now accepts keyword <cite>infer_nrows</cite> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15138">GH15138</a>).</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.to_parquet.html#pandas.DataFrame.to_parquet" title="pandas.DataFrame.to_parquet"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_parquet()</span></code></a> now supports writing a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> as a directory of parquet files partitioned by a subset of the columns when <code class="docutils literal notranslate"><span class="pre">engine</span> <span class="pre">=</span> <span class="pre">'pyarrow'</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23283">GH23283</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Timestamp.tz_localize.html#pandas.Timestamp.tz_localize" title="pandas.Timestamp.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.tz_localize()</span></code></a>, <a class="reference internal" href="../../generated/pandas.DatetimeIndex.tz_localize.html#pandas.DatetimeIndex.tz_localize" title="pandas.DatetimeIndex.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.tz_localize()</span></code></a>, and <a class="reference internal" href="../../generated/pandas.Series.tz_localize.html#pandas.Series.tz_localize" title="pandas.Series.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.tz_localize()</span></code></a> have gained the <code class="docutils literal notranslate"><span class="pre">nonexistent</span></code> argument for alternative handling of nonexistent times. See <a class="reference internal" href="../../user_guide/timeseries.html#timeseries-timezone-nonexistent"><span class="std std-ref">Nonexistent Times when Localizing</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8917">GH8917</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Index.difference.html#pandas.Index.difference" title="pandas.Index.difference"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.difference()</span></code></a> now has an optional <code class="docutils literal notranslate"><span class="pre">sort</span></code> parameter to specify whether the results should be sorted if possible (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/17839">GH17839</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> now accepts <code class="docutils literal notranslate"><span class="pre">usecols</span></code> as a list of column names or callable (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/18273">GH18273</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.to_flat_index()</span></code> has been added to flatten multiple levels into a single-level <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> object.</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code></a> and :class:` pandas.io.stata.StataWriter117` can write mixed sting columns to Stata strl format (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23633">GH23633</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.between_time.html#pandas.DataFrame.between_time" title="pandas.DataFrame.between_time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.between_time()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.at_time.html#pandas.DataFrame.at_time" title="pandas.DataFrame.at_time"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.at_time()</span></code></a> have gained the an <code class="docutils literal notranslate"><span class="pre">axis</span></code> parameter (:issue: <cite>8839</cite>)</li>
<li><a class="reference internal" href="../../generated/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> has gained the <code class="xref py py-attr docutils literal notranslate"><span class="pre">is_overlapping</span></code> attribute to indicate if the <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> contains any overlapping intervals (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23309">GH23309</a>)</li>
</ul>
</div>
</div>
<div class="section" id="backwards-incompatible-api-changes">
<span id="whatsnew-0240-api-breaking"></span><h2>Backwards incompatible API changes<a class="headerlink" href="#backwards-incompatible-api-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>A newly constructed empty <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with integer as the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> will now only be cast to <code class="docutils literal notranslate"><span class="pre">float64</span></code> if <code class="docutils literal notranslate"><span class="pre">index</span></code> is specified (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22858">GH22858</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.str.cat.html#pandas.Series.str.cat" title="pandas.Series.str.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.cat()</span></code></a> will now raise if <cite>others</cite> is a <cite>set</cite> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23009">GH23009</a>)</li>
<li>Passing scalar values to <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> or <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> will now raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23539">GH23539</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">max_rows</span></code> and <code class="docutils literal notranslate"><span class="pre">max_cols</span></code> parameters removed from <code class="xref py py-class docutils literal notranslate"><span class="pre">HTMLFormatter</span></code> since truncation is handled by <code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrameFormatter</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23818">GH23818</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> will now raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if a column with missing values is declared as having dtype <code class="docutils literal notranslate"><span class="pre">bool</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20591">GH20591</a>)</li>
<li>The column order of the resultant <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> from <a class="reference internal" href="../../generated/pandas.MultiIndex.to_frame.html#pandas.MultiIndex.to_frame" title="pandas.MultiIndex.to_frame"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.to_frame()</span></code></a> is now guaranteed to match the <a class="reference internal" href="../../generated/pandas.MultiIndex.names.html#pandas.MultiIndex.names" title="pandas.MultiIndex.names"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MultiIndex.names</span></code></a> order. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22420">GH22420</a>)</li>
</ul>
<div class="section" id="dependencies-have-increased-minimum-versions">
<span id="whatsnew-0240-api-breaking-deps"></span><h3>Dependencies have increased minimum versions<a class="headerlink" href="#dependencies-have-increased-minimum-versions" title="Permalink to this headline">¶</a></h3>
<p>We have updated our minimum supported versions of dependencies (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21242">GH21242</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/18742">GH18742</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23774">GH23774</a>).
If installed, we now require:</p>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="39%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Package</th>
<th class="head">Minimum Version</th>
<th class="head">Required</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>numpy</td>
<td>1.12.0</td>
<td>X</td>
</tr>
<tr class="row-odd"><td>bottleneck</td>
<td>1.2.0</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>fastparquet</td>
<td>0.1.2</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>matplotlib</td>
<td>2.0.0</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>numexpr</td>
<td>2.6.1</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>pandas-gbq</td>
<td>0.8.0</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>pyarrow</td>
<td>0.7.0</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>pytables</td>
<td>3.4.2</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>scipy</td>
<td>0.18.1</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>xlrd</td>
<td>1.0.0</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>pytest (dev)</td>
<td>3.6</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
<p>Additionally we no longer depend on <cite>feather-format</cite> for feather based storage
and replaced it with references to <cite>pyarrow</cite> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21639">GH21639</a> and <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23053">GH23053</a>).</p>
</div>
<div class="section" id="os-linesep-is-used-for-line-terminator-of-dataframe-to-csv">
<span id="whatsnew-0240-api-breaking-csv-line-terminator"></span><h3><cite>os.linesep</cite> is used for <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code> of <code class="docutils literal notranslate"><span class="pre">DataFrame.to_csv</span></code><a class="headerlink" href="#os-linesep-is-used-for-line-terminator-of-dataframe-to-csv" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../../generated/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> now uses <code class="xref py py-func docutils literal notranslate"><span class="pre">os.linesep()</span></code> rather than <code class="docutils literal notranslate"><span class="pre">'\n'</span></code>
for the default line terminator (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20353">GH20353</a>).
This change only affects when running on Windows, where <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code> was used for line terminator
even when <code class="docutils literal notranslate"><span class="pre">'\n'</span></code> was passed in <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code>.</p>
<p>Previous Behavior on Windows:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="go">...:     &quot;string_with_lf&quot;: [&quot;a\nbc&quot;],</span>
<span class="go">...:     &quot;string_with_crlf&quot;: [&quot;a\r\nbc&quot;]</span>
<span class="go">...: })</span>

<span class="gp">In [2]: </span><span class="c1"># When passing file PATH to to_csv, line_terminator does not work, and csv is saved with &#39;\r\n&#39;.</span>
<span class="go">...: # Also, this converts all &#39;\n&#39;s in the data to &#39;\r\n&#39;.</span>
<span class="go">...: data.to_csv(&quot;test.csv&quot;, index=False, line_terminator=&#39;\n&#39;)</span>

<span class="gp">In [3]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="go">...:     print(f.read())</span>
<span class="go">b&#39;string_with_lf,string_with_crlf\r\n&quot;a\r\nbc&quot;,&quot;a\r\r\nbc&quot;\r\n&#39;</span>

<span class="gp">In [4]: </span><span class="c1"># When passing file OBJECT with newline option to to_csv, line_terminator works.</span>
<span class="go">...: with open(&quot;test2.csv&quot;, mode=&#39;w&#39;, newline=&#39;\n&#39;) as f:</span>
<span class="go">...:     data.to_csv(f, index=False, line_terminator=&#39;\n&#39;)</span>

<span class="gp">In [5]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test2.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="go">...:     print(f.read())</span>
<span class="go">b&#39;string_with_lf,string_with_crlf\n&quot;a\nbc&quot;,&quot;a\r\nbc&quot;\n&#39;</span>
</pre></div>
</div>
<p>New Behavior on Windows:</p>
<ul>
<li><p class="first">By passing <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code> explicitly, line terminator is set to that character.</p>
</li>
<li><p class="first">The value of <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code> only affects the line terminator of CSV,
so it does not change the value inside the data.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="go">...:     &quot;string_with_lf&quot;: [&quot;a\nbc&quot;],</span>
<span class="go">...:     &quot;string_with_crlf&quot;: [&quot;a\r\nbc&quot;]</span>
<span class="go">...: })</span>

<span class="gp">In [2]: </span><span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">line_terminator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="go">...:     print(f.read())</span>
<span class="go">b&#39;string_with_lf,string_with_crlf\n&quot;a\nbc&quot;,&quot;a\r\nbc&quot;\n&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">On Windows, the value of <code class="docutils literal notranslate"><span class="pre">os.linesep</span></code> is <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code>,
so if <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code> is not set, <code class="docutils literal notranslate"><span class="pre">'\r\n'</span></code> is used for line terminator.</p>
</li>
<li><p class="first">Again, it does not affect the value inside the data.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="go">...: &quot;string_with_lf&quot;: [&quot;a\nbc&quot;],</span>
<span class="go">...: &quot;string_with_crlf&quot;: [&quot;a\r\nbc&quot;]</span>
<span class="go">...: })</span>

<span class="gp">In [2]: </span><span class="n">data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="go">...:     print(f.read())</span>
<span class="go">b&#39;string_with_lf,string_with_crlf\r\n&quot;a\nbc&quot;,&quot;a\r\nbc&quot;\r\n&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">For files objects, specifying <code class="docutils literal notranslate"><span class="pre">newline</span></code> is not sufficient to set the line terminator.
You must pass in the <code class="docutils literal notranslate"><span class="pre">line_terminator</span></code> explicitly, even in this case.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="go">...: &quot;string_with_lf&quot;: [&quot;a\nbc&quot;],</span>
<span class="go">...: &quot;string_with_crlf&quot;: [&quot;a\r\nbc&quot;]</span>
<span class="go">...: })</span>

<span class="gp">In [2]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test2.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="go">...:     data.to_csv(f, index=False)</span>

<span class="gp">In [3]: </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;test2.csv&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="go">...:     print(f.read())</span>
<span class="go">b&#39;string_with_lf,string_with_crlf\r\n&quot;a\nbc&quot;,&quot;a\r\nbc&quot;\r\n&#39;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="parsing-datetime-strings-with-timezone-offsets">
<span id="whatsnew-0240-api-timezone-offset-parsing"></span><h3>Parsing Datetime Strings with Timezone Offsets<a class="headerlink" href="#parsing-datetime-strings-with-timezone-offsets" title="Permalink to this headline">¶</a></h3>
<p>Previously, parsing datetime strings with UTC offsets with <a class="reference internal" href="../../generated/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a>
or <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> would automatically convert the datetime to UTC
without timezone localization. This is inconsistent from parsing the same
datetime string with <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> which would preserve the UTC
offset in the <code class="docutils literal notranslate"><span class="pre">tz</span></code> attribute. Now, <a class="reference internal" href="../../generated/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> preserves the UTC
offset in the <code class="docutils literal notranslate"><span class="pre">tz</span></code> attribute when all the datetime strings have the same
UTC offset (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/17697">GH17697</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11736">GH11736</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22457">GH22457</a>)</p>
<p><em>Previous Behavior</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;2015-11-18 15:30:00+05:30&quot;</span><span class="p">)</span>
<span class="gh">Out[2]: </span><span class="go">Timestamp(&#39;2015-11-18 10:00:00&#39;)</span>

<span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;2015-11-18 15:30:00+05:30&quot;</span><span class="p">)</span>
<span class="gh">Out[3]: </span><span class="go">Timestamp(&#39;2015-11-18 15:30:00+0530&#39;, tz=&#39;pytz.FixedOffset(330)&#39;)</span>

<span class="go"># Different UTC offsets would automatically convert the datetimes to UTC (without a UTC timezone)</span>
<span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s2">&quot;2015-11-18 15:30:00+05:30&quot;</span><span class="p">,</span> <span class="s2">&quot;2015-11-18 16:30:00+06:30&quot;</span><span class="p">])</span>
<span class="gh">Out[4]: </span><span class="go">DatetimeIndex([&#39;2015-11-18 10:00:00&#39;, &#39;2015-11-18 10:00:00&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p><em>Current Behavior</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [46]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="s2">&quot;2015-11-18 15:30:00+05:30&quot;</span><span class="p">)</span>
<span class="gh">Out[46]: </span><span class="go">Timestamp(&#39;2015-11-18 10:00:00&#39;)</span>

<span class="gp">In [47]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;2015-11-18 15:30:00+05:30&quot;</span><span class="p">)</span>
<span class="go">                                          Out[47]: Timestamp(&#39;2015-11-18 15:30:00+0530&#39;, tz=&#39;pytz.FixedOffset(330)&#39;)</span>
</pre></div>
</div>
<p>Parsing datetime strings with the same UTC offset will preserve the UTC offset in the <code class="docutils literal notranslate"><span class="pre">tz</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [48]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s2">&quot;2015-11-18 15:30:00+05:30&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[48]: </span><span class="go">DatetimeIndex([&#39;2015-11-18 10:00:00&#39;, &#39;2015-11-18 10:00:00&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p>Parsing datetime strings with different UTC offsets will now create an Index of
<code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> objects with different UTC offsets</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [49]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s2">&quot;2015-11-18 15:30:00+05:30&quot;</span><span class="p">,</span> <span class="s2">&quot;2015-11-18 16:30:00+06:30&quot;</span><span class="p">])</span>

<span class="gp">In [50]: </span><span class="n">idx</span>
<span class="gh">Out[50]: </span><span class="go">DatetimeIndex([&#39;2015-11-18 10:00:00&#39;, &#39;2015-11-18 10:00:00&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>

<span class="gp">In [51]: </span><span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">                                                                                                          Out[51]: Timestamp(&#39;2015-11-18 10:00:00&#39;)</span>

<span class="gp">In [52]: </span><span class="n">idx</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">                                                                                                                                                    Out[52]: Timestamp(&#39;2015-11-18 10:00:00&#39;)</span>
</pre></div>
</div>
<p>Passing <code class="docutils literal notranslate"><span class="pre">utc=True</span></code> will mimic the previous behavior but will correctly indicate
that the dates have been converted to UTC</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [53]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s2">&quot;2015-11-18 15:30:00+05:30&quot;</span><span class="p">,</span> <span class="s2">&quot;2015-11-18 16:30:00+06:30&quot;</span><span class="p">],</span> <span class="n">utc</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gh">Out[53]: </span><span class="go">DatetimeIndex([&#39;2015-11-18 10:00:00+00:00&#39;, &#39;2015-11-18 10:00:00+00:00&#39;], dtype=&#39;datetime64[ns, UTC]&#39;, freq=None)</span>
</pre></div>
</div>
</div>
<div class="section" id="calendarday-offset">
<span id="whatsnew-0240-api-breaking-calendarday"></span><h3>CalendarDay Offset<a class="headerlink" href="#calendarday-offset" title="Permalink to this headline">¶</a></h3>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Day</span></code> and associated frequency alias <code class="docutils literal notranslate"><span class="pre">'D'</span></code> were documented to represent
a calendar day; however, arithmetic and operations with <code class="xref py py-class docutils literal notranslate"><span class="pre">Day</span></code> sometimes
respected absolute time instead (i.e. <code class="docutils literal notranslate"><span class="pre">Day(n)</span></code> and acted identically to <code class="docutils literal notranslate"><span class="pre">Timedelta(days=n)</span></code>).</p>
<p><em>Previous Behavior</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2016-10-30 00:00:00&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;Europe/Helsinki&#39;</span><span class="p">)</span>

<span class="go"># Respects calendar arithmetic</span>
<span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">ts</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gh">Out[3]:</span>
<span class="go">DatetimeIndex([&#39;2016-10-30 00:00:00+03:00&#39;, &#39;2016-10-31 00:00:00+02:00&#39;,</span>
<span class="go">               &#39;2016-11-01 00:00:00+02:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns, Europe/Helsinki]&#39;, freq=&#39;D&#39;)</span>

<span class="go"># Respects absolute arithmetic</span>
<span class="gp">In [4]: </span><span class="n">ts</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">tseries</span><span class="o">.</span><span class="n">frequencies</span><span class="o">.</span><span class="n">to_offset</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="gh">Out[4]: </span><span class="go">Timestamp(&#39;2016-10-30 23:00:00+0200&#39;, tz=&#39;Europe/Helsinki&#39;)</span>
</pre></div>
</div>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">CalendarDay</span></code> and associated frequency alias <code class="docutils literal notranslate"><span class="pre">'CD'</span></code> are now available
and respect calendar day arithmetic while <code class="xref py py-class docutils literal notranslate"><span class="pre">Day</span></code> and frequency alias <code class="docutils literal notranslate"><span class="pre">'D'</span></code>
will now respect absolute time (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22274">GH22274</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20596">GH20596</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16980">GH16980</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8774">GH8774</a>)
See the <a class="reference internal" href="../../user_guide/timeseries.html#timeseries-dayvscalendarday"><span class="std std-ref">documentation here</span></a> for more information.</p>
<p>Addition with <code class="xref py py-class docutils literal notranslate"><span class="pre">CalendarDay</span></code> across a daylight savings time transition:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [54]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2016-10-30 00:00:00&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;Europe/Helsinki&#39;</span><span class="p">)</span>

<span class="gp">In [55]: </span><span class="n">ts</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">Day</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[55]: </span><span class="go">Timestamp(&#39;2016-10-30 23:00:00+0200&#39;, tz=&#39;Europe/Helsinki&#39;)</span>

<span class="gp">In [56]: </span><span class="n">ts</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">CalendarDay</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">                                                                     ---------------------------------------------------------------------------</span>
<span class="go">AttributeError                            Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-56-cca240192347&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 ts + pd.offsets.CalendarDay(1)</span>

<span class="go">AttributeError: module &#39;pandas.tseries.offsets&#39; has no attribute &#39;CalendarDay&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="time-values-in-dt-end-time-and-to-timestamp-how-end">
<span id="whatsnew-0240-api-breaking-period-end-time"></span><h3>Time values in <code class="docutils literal notranslate"><span class="pre">dt.end_time</span></code> and <code class="docutils literal notranslate"><span class="pre">to_timestamp(how='end')</span></code><a class="headerlink" href="#time-values-in-dt-end-time-and-to-timestamp-how-end" title="Permalink to this headline">¶</a></h3>
<p>The time values in <a class="reference internal" href="../../generated/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> and <a class="reference internal" href="../../generated/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> objects are now set
to ‘23:59:59.999999999’ when calling <code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.end_time</span></code>, <a class="reference internal" href="../../generated/pandas.Period.end_time.html#pandas.Period.end_time" title="pandas.Period.end_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Period.end_time</span></code></a>,
<a class="reference internal" href="../../generated/pandas.PeriodIndex.end_time.html#pandas.PeriodIndex.end_time" title="pandas.PeriodIndex.end_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">PeriodIndex.end_time</span></code></a>, <a class="reference internal" href="../../generated/pandas.Period.to_timestamp.html#pandas.Period.to_timestamp" title="pandas.Period.to_timestamp"><code class="xref py py-func docutils literal notranslate"><span class="pre">Period.to_timestamp()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">how='end'</span></code>,
or <a class="reference internal" href="../../generated/pandas.PeriodIndex.to_timestamp.html#pandas.PeriodIndex.to_timestamp" title="pandas.PeriodIndex.to_timestamp"><code class="xref py py-func docutils literal notranslate"><span class="pre">PeriodIndex.to_timestamp()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">how='end'</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/17157">GH17157</a>)</p>
<p>Previous Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2017-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="gp">In [3]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">([</span><span class="n">p</span><span class="p">])</span>

<span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">end_time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[4]: </span><span class="go">Timestamp(2017-01-01 00:00:00)</span>

<span class="gp">In [5]: </span><span class="n">p</span><span class="o">.</span><span class="n">end_time</span>
<span class="gh">Out[5]: </span><span class="go">Timestamp(2017-01-01 23:59:59.999999999)</span>
</pre></div>
</div>
<p>Current Behavior:</p>
<p>Calling <code class="xref py py-attr docutils literal notranslate"><span class="pre">Series.dt.end_time</span></code> will now result in a time of ‘23:59:59.999999999’ as
is the case with <a class="reference internal" href="../../generated/pandas.Period.end_time.html#pandas.Period.end_time" title="pandas.Period.end_time"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Period.end_time</span></code></a>, for example</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [57]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2017-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="gp">In [58]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">([</span><span class="n">p</span><span class="p">])</span>

<span class="gp">In [59]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">end_time</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[59]: </span><span class="go">Timestamp(&#39;2017-01-01 00:00:00&#39;)</span>

<span class="gp">In [60]: </span><span class="n">p</span><span class="o">.</span><span class="n">end_time</span>
<span class="go">                                          Out[60]: Timestamp(&#39;2017-01-01 23:59:59.999999999&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="sparse-data-structure-refactor">
<span id="whatsnew-0240-api-breaking-sparse-values"></span><h3>Sparse Data Structure Refactor<a class="headerlink" href="#sparse-data-structure-refactor" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">SparseArray</span></code>, the array backing <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> and the columns in a <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code>,
is now an extension array (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21978">GH21978</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19056">GH19056</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22835">GH22835</a>).
To conform to this interface and for consistency with the rest of pandas, some API breaking
changes were made:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">SparseArray</span></code> is no longer a subclass of <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.15)"><code class="xref py py-class docutils literal notranslate"><span class="pre">numpy.ndarray</span></code></a>. To convert a SparseArray to a NumPy array, use <code class="xref py py-meth docutils literal notranslate"><span class="pre">numpy.asarray()</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">SparseArray.dtype</span></code> and <code class="docutils literal notranslate"><span class="pre">SparseSeries.dtype</span></code> are now instances of <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseDtype</span></code>, rather than <code class="docutils literal notranslate"><span class="pre">np.dtype</span></code>. Access the underlying dtype with <code class="docutils literal notranslate"><span class="pre">SparseDtype.subtype</span></code>.</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">numpy.asarray(sparse_array)()</span></code> now returns a dense array with all the values, not just the non-fill-value values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14167">GH14167</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">SparseArray.take</span></code> now matches the API of <a class="reference internal" href="../../generated/pandas.api.extensions.ExtensionArray.take.html#pandas.api.extensions.ExtensionArray.take" title="pandas.api.extensions.ExtensionArray.take"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.api.extensions.ExtensionArray.take()</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19506">GH19506</a>):<ul>
<li>The default value of <code class="docutils literal notranslate"><span class="pre">allow_fill</span></code> has changed from <code class="docutils literal notranslate"><span class="pre">False</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">out</span></code> and <code class="docutils literal notranslate"><span class="pre">mode</span></code> parameters are now longer accepted (previously, this raised if they were specified).</li>
<li>Passing a scalar for <code class="docutils literal notranslate"><span class="pre">indices</span></code> is no longer allowed.</li>
</ul>
</li>
<li>The result of concatenating a mix of sparse and dense Series is a Series with sparse values, rather than a <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">SparseDataFrame.combine</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.combine_first</span></code> no longer supports combining a sparse column with a dense column while preserving the sparse subtype. The result will be an object-dtype SparseArray.</li>
<li>Setting <code class="xref py py-attr docutils literal notranslate"><span class="pre">SparseArray.fill_value</span></code> to a fill value with a different dtype is now allowed.</li>
<li><code class="docutils literal notranslate"><span class="pre">DataFrame[column]</span></code> is now a <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> with sparse values, rather than a <code class="xref py py-class docutils literal notranslate"><span class="pre">SparseSeries</span></code>, when slicing a single column with sparse values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23559">GH23559</a>).</li>
</ul>
<p>Some new warnings are issued for operations that require or are likely to materialize a large dense array:</p>
<ul class="simple">
<li>A <a class="reference internal" href="../../generated/pandas.errors.PerformanceWarning.html#pandas.errors.PerformanceWarning" title="pandas.errors.PerformanceWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">errors.PerformanceWarning</span></code></a> is issued when using fillna with a <code class="docutils literal notranslate"><span class="pre">method</span></code>, as a dense array is constructed to create the filled array. Filling with a <code class="docutils literal notranslate"><span class="pre">value</span></code> is the efficient way to fill a sparse array.</li>
<li>A <a class="reference internal" href="../../generated/pandas.errors.PerformanceWarning.html#pandas.errors.PerformanceWarning" title="pandas.errors.PerformanceWarning"><code class="xref py py-class docutils literal notranslate"><span class="pre">errors.PerformanceWarning</span></code></a> is now issued when concatenating sparse Series with differing fill values. The fill value from the first sparse array continues to be used.</li>
</ul>
<p>In addition to these API breaking changes, many <a class="reference internal" href="#whatsnew-0240-bug-fixes-sparse"><span class="std std-ref">performance improvements and bug fixes have been made</span></a>.</p>
<p>Finally, a <code class="docutils literal notranslate"><span class="pre">Series.sparse</span></code> accessor was added to provide sparse-specific methods like <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.sparse.from_coo()</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [61]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;Sparse[int]&#39;</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">61</span><span class="o">-</span><span class="mi">2</span><span class="n">fab4685fa2f</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;Sparse[int]&#39;</span><span class="p">)</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/series.py</span> in <span class="ni">__init__</span><span class="nt">(self, data, index, dtype, name, copy, fastpath)</span>
<span class="g g-Whitespace">    </span><span class="mi">186</span>                 <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="g g-Whitespace">    </span><span class="mi">187</span>             <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">188</span>                 <span class="n">dtype</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">189</span> 
<span class="g g-Whitespace">    </span><span class="mi">190</span>             <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">MultiIndex</span><span class="p">):</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/generic.py</span> in <span class="ni">_validate_dtype</span><span class="nt">(self, dtype)</span>
<span class="g g-Whitespace">    </span><span class="mi">166</span> 
<span class="g g-Whitespace">    </span><span class="mi">167</span>         <span class="k">if</span> <span class="n">dtype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">168</span>             <span class="n">dtype</span> <span class="o">=</span> <span class="n">pandas_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">169</span> 
<span class="g g-Whitespace">    </span><span class="mi">170</span>             <span class="c1"># a compound dtype</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/dtypes/common.py</span> in <span class="ni">pandas_dtype</span><span class="nt">(dtype)</span>
<span class="g g-Whitespace">   </span><span class="mi">2011</span> 
<span class="g g-Whitespace">   </span><span class="mi">2012</span>     <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">2013</span>         <span class="n">npdtype</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2014</span>     <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">2015</span>         <span class="k">raise</span>

<span class="ne">TypeError</span>: data type &quot;Sparse[int]&quot; not understood

<span class="gp">In [62]: </span><span class="n">s</span><span class="o">.</span><span class="n">sparse</span><span class="o">.</span><span class="n">density</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      ---------------------------------------------------------------------------</span>
<span class="go">AttributeError                            Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-62-b9dd589061fe&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 s.sparse.density</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/generic.py in __getattr__(self, name)</span>
<span class="go">   4374             if self._info_axis._can_hold_identifiers_and_holds_name(name):</span>
<span class="go">   4375                 return self[name]</span>
<span class="go">-&gt; 4376             return object.__getattribute__(self, name)</span>
<span class="go">   4377 </span>
<span class="go">   4378     def __setattr__(self, name, value):</span>

<span class="go">AttributeError: &#39;Series&#39; object has no attribute &#39;sparse&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="raise-valueerror-in-dataframe-to-dict-orient-index">
<span id="whatsnew-0240-api-breaking-frame-to-dict-index-orient"></span><h3>Raise ValueError in <code class="docutils literal notranslate"><span class="pre">DataFrame.to_dict(orient='index')</span></code><a class="headerlink" href="#raise-valueerror-in-dataframe-to-dict-orient-index" title="Permalink to this headline">¶</a></h3>
<p>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict" title="pandas.DataFrame.to_dict"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_dict()</span></code></a> raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when used with
<code class="docutils literal notranslate"><span class="pre">orient='index'</span></code> and a non-unique index instead of losing data (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22801">GH22801</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [63]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">])</span>

<span class="gp">In [64]: </span><span class="n">df</span>
<span class="gh">Out[64]: </span><span class="go"></span>
<span class="go">   a     b</span>
<span class="go">A  1  0.50</span>
<span class="go">A  2  0.75</span>

<span class="go">[2 rows x 2 columns]</span>

<span class="gp">In [65]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="go">                                                                 Out[65]: {&#39;A&#39;: {&#39;a&#39;: 2, &#39;b&#39;: 0.75}}</span>
</pre></div>
</div>
</div>
<div class="section" id="tick-dateoffset-normalize-restrictions">
<span id="whatsnew-0240-api-datetimelike-normalize"></span><h3>Tick DateOffset Normalize Restrictions<a class="headerlink" href="#tick-dateoffset-normalize-restrictions" title="Permalink to this headline">¶</a></h3>
<p>Creating a <code class="docutils literal notranslate"><span class="pre">Tick</span></code> object (<code class="xref py py-class docutils literal notranslate"><span class="pre">Day</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Hour</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Minute</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">Second</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Milli</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Micro</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Nano</span></code>) with
<code class="docutils literal notranslate"><span class="pre">normalize=True</span></code> is no longer supported.  This prevents unexpected behavior
where addition could fail to be monotone or associative.  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21427">GH21427</a>)</p>
<p><em>Previous Behavior</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2018-06-11 18:01:14&#39;</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">ts</span>
<span class="gh">Out[3]: </span><span class="go">Timestamp(&#39;2018-06-11 18:01:14&#39;)</span>

<span class="gp">In [4]: </span><span class="n">tic</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">Hour</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">   ...:</span>

<span class="gp">In [5]: </span><span class="n">tic</span>
<span class="gh">Out[5]: </span><span class="go">&lt;2 * Hours&gt;</span>

<span class="gp">In [6]: </span><span class="n">ts</span> <span class="o">+</span> <span class="n">tic</span>
<span class="gh">Out[6]: </span><span class="go">Timestamp(&#39;2018-06-11 00:00:00&#39;)</span>

<span class="gp">In [7]: </span><span class="n">ts</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">==</span> <span class="n">ts</span> <span class="o">+</span> <span class="p">(</span><span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span><span class="p">)</span>
<span class="gh">Out[7]: </span><span class="go">False</span>
</pre></div>
</div>
<p><em>Current Behavior</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [66]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2018-06-11 18:01:14&#39;</span><span class="p">)</span>

<span class="gp">In [67]: </span><span class="n">tic</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">Hour</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="gp">In [68]: </span><span class="n">ts</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">==</span> <span class="n">ts</span> <span class="o">+</span> <span class="p">(</span><span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span> <span class="o">+</span> <span class="n">tic</span><span class="p">)</span>
<span class="gh">Out[68]: </span><span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="period-subtraction">
<span id="whatsnew-0240-api-period-subtraction"></span><span id="whatsnew-0240-api-datetimelike"></span><h3>Period Subtraction<a class="headerlink" href="#period-subtraction" title="Permalink to this headline">¶</a></h3>
<p>Subtraction of a <code class="docutils literal notranslate"><span class="pre">Period</span></code> from another <code class="docutils literal notranslate"><span class="pre">Period</span></code> will give a <code class="docutils literal notranslate"><span class="pre">DateOffset</span></code>.
instead of an integer (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21314">GH21314</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [69]: </span><span class="n">june</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;June 2018&#39;</span><span class="p">)</span>

<span class="gp">In [70]: </span><span class="n">april</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;April 2018&#39;</span><span class="p">)</span>

<span class="gp">In [71]: </span><span class="n">june</span> <span class="o">-</span> <span class="n">april</span>
<span class="gh">Out[71]: </span><span class="go">2</span>
</pre></div>
</div>
<p>Previous Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">june</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;June 2018&#39;</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">april</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;April 2018&#39;</span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">june</span> <span class="o">-</span> <span class="n">april</span>
<span class="go">Out [4]: 2</span>
</pre></div>
</div>
<p>Similarly, subtraction of a <code class="docutils literal notranslate"><span class="pre">Period</span></code> from a <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> will now return
an <code class="docutils literal notranslate"><span class="pre">Index</span></code> of <code class="docutils literal notranslate"><span class="pre">DateOffset</span></code> objects instead of an <code class="docutils literal notranslate"><span class="pre">Int64Index</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [72]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;June 2018&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="gp">In [73]: </span><span class="n">pi</span> <span class="o">-</span> <span class="n">pi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[73]: </span><span class="go">Int64Index([0, 1, 2], dtype=&#39;int64&#39;)</span>
</pre></div>
</div>
<p>Previous Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">period_range</span><span class="p">(</span><span class="s1">&#39;June 2018&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">pi</span> <span class="o">-</span> <span class="n">pi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[3]: </span><span class="go">Int64Index([0, 1, 2], dtype=&#39;int64&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="addition-subtraction-of-nan-from-dataframe">
<span id="whatsnew-0240-api-timedelta64-subtract-nan"></span><h3>Addition/Subtraction of <code class="docutils literal notranslate"><span class="pre">NaN</span></code> from <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a><a class="headerlink" href="#addition-subtraction-of-nan-from-dataframe" title="Permalink to this headline">¶</a></h3>
<p>Adding or subtracting <code class="docutils literal notranslate"><span class="pre">NaN</span></code> from a <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> column with
<code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype will now raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> instead of returning
all-<code class="docutils literal notranslate"><span class="pre">NaT</span></code>.  This is for compatibility with <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> and
<code class="docutils literal notranslate"><span class="pre">Series</span></code> behavior (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH22163</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [74]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)])</span>

<span class="gp">In [75]: </span><span class="n">df</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gh">Out[75]: </span><span class="go"></span>
<span class="go">    0</span>
<span class="go">0 NaT</span>

<span class="go">[1 rows x 1 columns]</span>
</pre></div>
</div>
<p>Previous Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">)])</span>

<span class="gp">In [5]: </span><span class="n">df</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="gh">Out[5]:</span>
<span class="go">    0</span>
<span class="go">0 NaT</span>
</pre></div>
</div>
</div>
<div class="section" id="dataframe-comparison-operations-broadcasting-changes">
<span id="whatsnew-0240-api-dataframe-cmp-broadcasting"></span><h3>DataFrame Comparison Operations Broadcasting Changes<a class="headerlink" href="#dataframe-comparison-operations-broadcasting-changes" title="Permalink to this headline">¶</a></h3>
<p>Previously, the broadcasting behavior of <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> comparison
operations (<code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, …) was inconsistent with the behavior of
arithmetic operations (<code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, …).  The behavior of the comparison
operations has been changed to match the arithmetic operations in these cases.
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22880">GH22880</a>)</p>
<p>The affected cases are:</p>
<ul class="simple">
<li>operating against a 2-dimensional <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> with either 1 row or 1 column will now broadcast the same way a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> would (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23000">GH23000</a>).</li>
<li>a list or tuple with length matching the number of rows in the <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> will now raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> instead of operating column-by-column (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22880">GH22880</a>.</li>
<li>a list or tuple with length matching the number of columns in the <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> will now operate row-by-row instead of raising <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22880">GH22880</a>).</li>
</ul>
<p>Previous Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">In [4]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

<span class="gp">In [5]: </span><span class="n">df</span> <span class="o">==</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
<span class="gp">   ...: </span><span class="c1"># comparison previously broadcast where arithmetic would raise</span>
<span class="gh">Out[5]:</span>
<span class="go">       0      1</span>
<span class="go">0   True   True</span>
<span class="go">1  False  False</span>
<span class="go">2  False  False</span>
<span class="gp">In [6]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
<span class="go">...</span>
<span class="go">ValueError: Unable to coerce to DataFrame, shape must be (3, 2): given (1, 2)</span>

<span class="gp">In [7]: </span><span class="n">df</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="c1"># length matches number of columns;</span>
<span class="gp">   ...: </span><span class="c1"># comparison previously raised where arithmetic would broadcast</span>
<span class="go">...</span>
<span class="go">ValueError: Invalid broadcasting comparison [(1, 2)] with block values</span>
<span class="gp">In [8]: </span><span class="n">df</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[8]:</span>
<span class="go">   0  1</span>
<span class="go">0  1  3</span>
<span class="go">1  3  5</span>
<span class="go">2  5  7</span>

<span class="gp">In [9]: </span><span class="n">df</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="c1"># length matches number of rows</span>
<span class="gp">   ...: </span><span class="c1"># comparison previously broadcast where arithmetic would raise</span>
<span class="gh">Out[9]:</span>
<span class="go">       0      1</span>
<span class="go">0  False   True</span>
<span class="go">1   True  False</span>
<span class="go">2  False  False</span>
<span class="gp">In [10]: </span><span class="n">df</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">...</span>
<span class="go">ValueError: Unable to coerce to Series, length must be 2: given 3</span>
</pre></div>
</div>
<p><em>Current Behavior</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [76]: </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="gp">In [77]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Comparison operations and arithmetic operations both broadcast.</span>
<span class="gp">In [78]: </span><span class="n">df</span> <span class="o">==</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
<span class="gh">Out[78]: </span><span class="go"></span>
<span class="go">       0      1</span>
<span class="go">0   True   True</span>
<span class="go">1  False  False</span>
<span class="go">2  False  False</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [79]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>
<span class="go">                                                                                                ---------------------------------------------------------------------------</span>
<span class="go">ValueError                                Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-79-5c7b0d7412c6&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 df + arr[[0], :]</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in f(self, other, axis, level, fill_value)</span>
<span class="go">   1545     def f(self, other, axis=default_axis, level=None, fill_value=None):</span>
<span class="go">   1546 </span>
<span class="go">-&gt; 1547         other = _align_method_FRAME(self, other, axis)</span>
<span class="go">   1548 </span>
<span class="go">   1549         if isinstance(other, ABCDataFrame):  # Another DataFrame</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in _align_method_FRAME(left, right, axis)</span>
<span class="go">   1468                                  &quot;must be {req_shape}: given {given_shape}&quot;</span>
<span class="go">   1469                                  .format(req_shape=left.shape,</span>
<span class="go">-&gt; 1470                                          given_shape=right.shape))</span>
<span class="go">   1471 </span>
<span class="go">   1472             right = left._constructor(right, index=left.index,</span>

<span class="go">ValueError: Unable to coerce to DataFrame, shape must be (3, 2): given (1, 2)</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Comparison operations and arithmetic operations both broadcast.</span>
<span class="gp">In [80]: </span><span class="n">df</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">80</span><span class="o">-</span><span class="n">e8ffbb5594a3</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py</span> in <span class="ni">f</span><span class="nt">(self, other)</span>
<span class="g g-Whitespace">   </span><span class="mi">1625</span>             <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_combine_const</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">1626</span>                                       <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">1627</span>                                       <span class="n">try_cast</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1628</span>             <span class="k">return</span> <span class="n">res</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1629</span> 

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/frame.py</span> in <span class="ni">_combine_const</span><span class="nt">(self, other, func, errors, try_cast)</span>
<span class="g g-Whitespace">   </span><span class="mi">4777</span>         <span class="n">new_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data</span><span class="o">.</span><span class="n">eval</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">func</span><span class="p">,</span> <span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">4778</span>                                    <span class="n">errors</span><span class="o">=</span><span class="n">errors</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">4779</span>                                    <span class="n">try_cast</span><span class="o">=</span><span class="n">try_cast</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4780</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constructor</span><span class="p">(</span><span class="n">new_data</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4781</span> 

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/internals.py</span> in <span class="ni">eval</span><span class="nt">(self, **kwargs)</span>
<span class="g g-Whitespace">   </span><span class="mi">3685</span> 
<span class="g g-Whitespace">   </span><span class="mi">3686</span>     <span class="k">def</span> <span class="nf">eval</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="ne">-&gt; </span><span class="mi">3687</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="s1">&#39;eval&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3688</span> 
<span class="g g-Whitespace">   </span><span class="mi">3689</span>     <span class="k">def</span> <span class="nf">quantile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/internals.py</span> in <span class="ni">apply</span><span class="nt">(self, f, axes, filter, do_integrity_check, consolidate, **kwargs)</span>
<span class="g g-Whitespace">   </span><span class="mi">3579</span> 
<span class="g g-Whitespace">   </span><span class="mi">3580</span>             <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;mgr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
<span class="ne">-&gt; </span><span class="mi">3581</span>             <span class="n">applied</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">f</span><span class="p">)(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3582</span>             <span class="n">result_blocks</span> <span class="o">=</span> <span class="n">_extend_blocks</span><span class="p">(</span><span class="n">applied</span><span class="p">,</span> <span class="n">result_blocks</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3583</span> 

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/internals.py</span> in <span class="ni">eval</span><span class="nt">(self, func, other, errors, try_cast, mgr)</span>
<span class="g g-Whitespace">   </span><span class="mi">1432</span>                     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">1433</span>                         <span class="s1">&#39;Invalid broadcasting comparison [{other!r}] with &#39;</span>
<span class="ne">-&gt; </span><span class="mi">1434</span>                         <span class="s1">&#39;block values&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">other</span><span class="o">=</span><span class="n">other</span><span class="p">))</span>
<span class="g g-Whitespace">   </span><span class="mi">1435</span> 
<span class="g g-Whitespace">   </span><span class="mi">1436</span>                 <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Could not compare [{other!r}] &#39;</span>

<span class="ne">ValueError</span>: Invalid broadcasting comparison [(1, 2)] with block values

<span class="gp">In [81]: </span><span class="n">df</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Out[81]: </span>
<span class="go">   0  1</span>
<span class="go">0  1  3</span>
<span class="go">1  3  5</span>
<span class="go">2  5  7</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Comparison operations and arithmetic opeartions both raise ValueError.</span>
<span class="gp">In [82]: </span><span class="n">df</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gh">Out[82]: </span><span class="go"></span>
<span class="go">       0      1</span>
<span class="go">0  False   True</span>
<span class="go">1   True  False</span>
<span class="go">2  False  False</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [83]: </span><span class="n">df</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">                                                                                                ---------------------------------------------------------------------------</span>
<span class="go">ValueError                                Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-83-e5153dc9a2b8&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 df + (1, 2, 3)</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in f(self, other, axis, level, fill_value)</span>
<span class="go">   1545     def f(self, other, axis=default_axis, level=None, fill_value=None):</span>
<span class="go">   1546 </span>
<span class="go">-&gt; 1547         other = _align_method_FRAME(self, other, axis)</span>
<span class="go">   1548 </span>
<span class="go">   1549         if isinstance(other, ABCDataFrame):  # Another DataFrame</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in _align_method_FRAME(left, right, axis)</span>
<span class="go">   1479           not isinstance(right, (ABCSeries, ABCDataFrame))):</span>
<span class="go">   1480         # GH17901</span>
<span class="go">-&gt; 1481         right = to_series(right)</span>
<span class="go">   1482 </span>
<span class="go">   1483     return right</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in to_series(right)</span>
<span class="go">   1454             if len(left.columns) != len(right):</span>
<span class="go">   1455                 raise ValueError(msg.format(req_len=len(left.columns),</span>
<span class="go">-&gt; 1456                                             given_len=len(right)))</span>
<span class="go">   1457             right = left._constructor_sliced(right, index=left.columns)</span>
<span class="go">   1458         return right</span>

<span class="go">ValueError: Unable to coerce to Series, length must be 2: given 3</span>
</pre></div>
</div>
</div>
<div class="section" id="dataframe-arithmetic-operations-broadcasting-changes">
<span id="whatsnew-0240-api-dataframe-arithmetic-broadcasting"></span><h3>DataFrame Arithmetic Operations Broadcasting Changes<a class="headerlink" href="#dataframe-arithmetic-operations-broadcasting-changes" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> arithmetic operations when operating with 2-dimensional
<code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> objects now broadcast in the same way as <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>
broadcast.  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23000">GH23000</a>)</p>
<p>Previous Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">In [4]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="gp">In [5]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>   <span class="c1"># 1 row, 2 columns</span>
<span class="go">...</span>
<span class="go">ValueError: Unable to coerce to DataFrame, shape must be (3, 2): given (1, 2)</span>
<span class="gp">In [6]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">]]</span>   <span class="c1"># 1 column, 3 rows</span>
<span class="go">...</span>
<span class="go">ValueError: Unable to coerce to DataFrame, shape must be (3, 2): given (3, 1)</span>
</pre></div>
</div>
<p><em>Current Behavior</em>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [84]: </span><span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="gp">In [85]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

<span class="gp">In [86]: </span><span class="n">df</span>
<span class="gh">Out[86]: </span><span class="go"></span>
<span class="go">   0  1</span>
<span class="go">0  0  1</span>
<span class="go">1  2  3</span>
<span class="go">2  4  5</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [87]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>   <span class="c1"># 1 row, 2 columns</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">87</span><span class="o">-</span><span class="mi">626</span><span class="n">b5f20b7f0</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[[</span><span class="mi">0</span><span class="p">],</span> <span class="p">:]</span>   <span class="c1"># 1 row, 2 columns</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py</span> in <span class="ni">f</span><span class="nt">(self, other, axis, level, fill_value)</span>
<span class="g g-Whitespace">   </span><span class="mi">1545</span>     <span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">default_axis</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1546</span> 
<span class="ne">-&gt; </span><span class="mi">1547</span>         <span class="n">other</span> <span class="o">=</span> <span class="n">_align_method_FRAME</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1548</span> 
<span class="g g-Whitespace">   </span><span class="mi">1549</span>         <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">ABCDataFrame</span><span class="p">):</span>  <span class="c1"># Another DataFrame</span>

<span class="nn">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py</span> in <span class="ni">_align_method_FRAME</span><span class="nt">(left, right, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1468</span>                                  <span class="s2">&quot;must be {req_shape}: given {given_shape}&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1469</span>                                  <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">req_shape</span><span class="o">=</span><span class="n">left</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">1470</span>                                          <span class="n">given_shape</span><span class="o">=</span><span class="n">right</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="g g-Whitespace">   </span><span class="mi">1471</span> 
<span class="g g-Whitespace">   </span><span class="mi">1472</span>             <span class="n">right</span> <span class="o">=</span> <span class="n">left</span><span class="o">.</span><span class="n">_constructor</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">left</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>

<span class="ne">ValueError</span>: Unable to coerce to DataFrame, shape must be (3, 2): given (1, 2)

<span class="gp">In [88]: </span><span class="n">df</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">1</span><span class="p">]]</span>   <span class="c1"># 1 column, 3 rows</span>
<span class="go">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              ---------------------------------------------------------------------------</span>
<span class="go">ValueError                                Traceback (most recent call last)</span>
<span class="go">&lt;ipython-input-88-c74b1082cffc&gt; in &lt;module&gt;</span>
<span class="go">----&gt; 1 df + arr[:, [1]]   # 1 column, 3 rows</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in f(self, other, axis, level, fill_value)</span>
<span class="go">   1545     def f(self, other, axis=default_axis, level=None, fill_value=None):</span>
<span class="go">   1546 </span>
<span class="go">-&gt; 1547         other = _align_method_FRAME(self, other, axis)</span>
<span class="go">   1548 </span>
<span class="go">   1549         if isinstance(other, ABCDataFrame):  # Another DataFrame</span>

<span class="go">~/miniconda/lib/python3.7/site-packages/pandas/core/ops.py in _align_method_FRAME(left, right, axis)</span>
<span class="go">   1468                                  &quot;must be {req_shape}: given {given_shape}&quot;</span>
<span class="go">   1469                                  .format(req_shape=left.shape,</span>
<span class="go">-&gt; 1470                                          given_shape=right.shape))</span>
<span class="go">   1471 </span>
<span class="go">   1472             right = left._constructor(right, index=left.index,</span>

<span class="go">ValueError: Unable to coerce to DataFrame, shape must be (3, 2): given (3, 1)</span>
</pre></div>
</div>
</div>
<div class="section" id="extensiontype-changes">
<span id="whatsnew-0240-api-extension"></span><h3>ExtensionType Changes<a class="headerlink" href="#extensiontype-changes" title="Permalink to this headline">¶</a></h3>
<p><strong>:class:`pandas.api.extensions.ExtensionDtype` Equality and Hashability</strong></p>
<p>Pandas now requires that extension dtypes be hashable. The base class implements
a default <code class="docutils literal notranslate"><span class="pre">__eq__</span></code> and <code class="docutils literal notranslate"><span class="pre">__hash__</span></code>. If you have a parametrized dtype, you should
update the <code class="docutils literal notranslate"><span class="pre">ExtensionDtype._metadata</span></code> tuple to match the signature of your
<code class="docutils literal notranslate"><span class="pre">__init__</span></code> method. See <a class="reference internal" href="../../generated/pandas.api.extensions.ExtensionDtype.html#pandas.api.extensions.ExtensionDtype" title="pandas.api.extensions.ExtensionDtype"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.api.extensions.ExtensionDtype</span></code></a> for more (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22476">GH22476</a>).</p>
<p><strong>Other changes</strong></p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> has gained the abstract methods <code class="docutils literal notranslate"><span class="pre">.dropna()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21185">GH21185</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> has gained the ability to instantiate from string dtypes, e.g. <code class="docutils literal notranslate"><span class="pre">decimal</span></code> would instantiate a registered <code class="docutils literal notranslate"><span class="pre">DecimalDtype</span></code>; furthermore
the <code class="docutils literal notranslate"><span class="pre">ExtensionDtype</span></code> has gained the method <code class="docutils literal notranslate"><span class="pre">construct_array_type</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21185">GH21185</a>)</li>
<li>An <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> with a boolean dtype now works correctly as a boolean indexer. <a class="reference internal" href="../../generated/pandas.api.types.is_bool_dtype.html#pandas.api.types.is_bool_dtype" title="pandas.api.types.is_bool_dtype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.api.types.is_bool_dtype()</span></code></a> now properly considers them boolean (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22326">GH22326</a>)</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">ExtensionDtype._is_numeric</span></code> for controlling whether an extension dtype is considered numeric (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22290">GH22290</a>).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> constructor, <code class="docutils literal notranslate"><span class="pre">_from_sequence</span></code> now take the keyword arg <code class="docutils literal notranslate"><span class="pre">copy=False</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21185">GH21185</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.get.html#pandas.Series.get" title="pandas.Series.get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.get()</span></code></a> for <code class="docutils literal notranslate"><span class="pre">Series</span></code> using <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> and integer index (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21257">GH21257</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.api.extensions.ExtensionArray.shift()</span></code> added as part of the basic <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> interface (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22387">GH22387</a>).</li>
<li><a class="reference internal" href="../../generated/pandas.Series.shift.html#pandas.Series.shift" title="pandas.Series.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">shift()</span></code></a> now dispatches to <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray.shift()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22386">GH22386</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.combine.html#pandas.Series.combine" title="pandas.Series.combine"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.combine()</span></code></a> works correctly with <a class="reference internal" href="../../generated/pandas.api.extensions.ExtensionArray.html#pandas.api.extensions.ExtensionArray" title="pandas.api.extensions.ExtensionArray"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code></a> inside of <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20825">GH20825</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.combine.html#pandas.Series.combine" title="pandas.Series.combine"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.combine()</span></code></a> with scalar argument now works for any function type (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21248">GH21248</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.astype()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> now dispatch to <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray.astype()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21185:">GH21185:</a>).</li>
<li>Slicing a single row of a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with multiple ExtensionArrays of the same type now preserves the dtype, rather than coercing to object (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22784">GH22784</a>)</li>
<li>Added <code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.api.types.register_extension_dtype()</span></code> to register an extension type with pandas (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22664">GH22664</a>)</li>
<li>Bug when concatenating multiple <code class="docutils literal notranslate"><span class="pre">Series</span></code> with different extension dtypes not casting to object dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22994">GH22994</a>)</li>
<li>Series backed by an <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> now work with <a class="reference internal" href="../../generated/pandas.util.hash_pandas_object.html#pandas.util.hash_pandas_object" title="pandas.util.hash_pandas_object"><code class="xref py py-func docutils literal notranslate"><span class="pre">util.hash_pandas_object()</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23066">GH23066</a>)</li>
<li>Updated the <code class="docutils literal notranslate"><span class="pre">.type</span></code> attribute for <code class="docutils literal notranslate"><span class="pre">PeriodDtype</span></code>, <code class="docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code>, and <code class="docutils literal notranslate"><span class="pre">IntervalDtype</span></code> to be instances of the dtype (<code class="docutils literal notranslate"><span class="pre">Period</span></code>, <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code>, and <code class="docutils literal notranslate"><span class="pre">Interval</span></code> respectively) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22938">GH22938</a>)</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">ExtensionArray.isna()</span></code> is allowed to return an <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22325">GH22325</a>).</li>
<li>Support for reduction operations such as <code class="docutils literal notranslate"><span class="pre">sum</span></code>, <code class="docutils literal notranslate"><span class="pre">mean</span></code> via opt-in base class method override (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22762">GH22762</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.stack.html#pandas.DataFrame.stack" title="pandas.DataFrame.stack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.stack()</span></code></a> no longer converts to object dtype for DataFrames where each column has the same extension dtype. The output Series will have the same dtype as the columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23077">GH23077</a>).</li>
<li><a class="reference internal" href="../../generated/pandas.Series.unstack.html#pandas.Series.unstack" title="pandas.Series.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.unstack()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.unstack.html#pandas.DataFrame.unstack" title="pandas.DataFrame.unstack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.unstack()</span></code></a> no longer convert extension arrays to object-dtype ndarrays. Each column in the output <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> will now have the same dtype as the input (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23077">GH23077</a>).</li>
<li>Bug when grouping <code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataframe.groupby()</span></code> and aggregating on <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> it was not returning the actual <code class="docutils literal notranslate"><span class="pre">ExtensionArray</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23227">GH23227</a>).</li>
<li>A default repr for <code class="xref py py-class docutils literal notranslate"><span class="pre">ExtensionArray</span></code> is now provided (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23601">GH23601</a>).</li>
</ul>
</div>
<div class="section" id="series-and-index-data-dtype-incompatibilities">
<span id="whatsnew-0240-api-incompatibilities"></span><h3>Series and Index Data-Dtype Incompatibilities<a class="headerlink" href="#series-and-index-data-dtype-incompatibilities" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">Index</span></code> constructors now raise when the
data is incompatible with a passed <code class="docutils literal notranslate"><span class="pre">dtype=</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15832">GH15832</a>)</p>
<p>Previous Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;uint64&quot;</span><span class="p">)</span>
<span class="go">Out [4]:</span>
<span class="go">0    18446744073709551615</span>
<span class="go">dtype: uint64</span>
</pre></div>
</div>
<p>Current Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s2">&quot;uint64&quot;</span><span class="p">)</span>
<span class="go">Out [4]:</span>
<span class="go">...</span>
<span class="go">OverflowError: Trying to coerce negative values to unsigned integers</span>
</pre></div>
</div>
</div>
<div class="section" id="crosstab-preserves-dtypes">
<span id="whatsnew-0240-api-crosstab-dtypes"></span><h3>Crosstab Preserves Dtypes<a class="headerlink" href="#crosstab-preserves-dtypes" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../../generated/pandas.crosstab.html#pandas.crosstab" title="pandas.crosstab"><code class="xref py py-func docutils literal notranslate"><span class="pre">crosstab()</span></code></a> will preserve now dtypes in some cases that previously would
cast from integer dtype to floating dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22019">GH22019</a>)</p>
<p>Previous Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">   ...: </span>                   <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
<span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>
<span class="gh">Out[4]:</span>
<span class="go">b    3    4</span>
<span class="go">a</span>
<span class="go">1  0.5  0.0</span>
<span class="go">2  0.5  1.0</span>
</pre></div>
</div>
<p>Current Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">   ...: </span>                   <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]})</span>
<span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="n">normalize</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="datetimelike-api-changes">
<h3>Datetimelike API Changes<a class="headerlink" href="#datetimelike-api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>For <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> and <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> with non-<code class="docutils literal notranslate"><span class="pre">None</span></code> <code class="docutils literal notranslate"><span class="pre">freq</span></code> attribute, addition or subtraction of integer-dtyped array or <code class="docutils literal notranslate"><span class="pre">Index</span></code> will return an object of the same class (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19959">GH19959</a>)</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> objects are now immutable. Attempting to alter one of these will now raise <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21341">GH21341</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> subtraction of another <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> will now return an object-dtype <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> of <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> objects instead of raising a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20049">GH20049</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a> and <a class="reference internal" href="../../generated/pandas.qcut.html#pandas.qcut" title="pandas.qcut"><code class="xref py py-func docutils literal notranslate"><span class="pre">qcut()</span></code></a> now returns a <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> or <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> bins when the input is datetime or timedelta dtype respectively and <code class="docutils literal notranslate"><span class="pre">retbins=True</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19891">GH19891</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DatetimeIndex.to_period.html#pandas.DatetimeIndex.to_period" title="pandas.DatetimeIndex.to_period"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.to_period()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Timestamp.to_period.html#pandas.Timestamp.to_period" title="pandas.Timestamp.to_period"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.to_period()</span></code></a> will issue a warning when timezone information will be lost (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21333">GH21333</a>)</li>
</ul>
</div>
<div class="section" id="other-api-changes">
<span id="whatsnew-0240-api-other"></span><h3>Other API Changes<a class="headerlink" href="#other-api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> now accepts <a class="reference internal" href="../../generated/pandas.Int64Index.html#pandas.Int64Index" title="pandas.Int64Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Int64Index</span></code></a> arguments as epoch timestamps (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20997">GH20997</a>)</li>
<li>Accessing a level of a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> with a duplicate name (e.g. in
<a class="reference internal" href="../../generated/pandas.MultiIndex.get_level_values.html#pandas.MultiIndex.get_level_values" title="pandas.MultiIndex.get_level_values"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_level_values()</span></code></a>) now raises a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> instead of
a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21678">GH21678</a>).</li>
<li>Invalid construction of <code class="docutils literal notranslate"><span class="pre">IntervalDtype</span></code> will now always raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> rather than a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if the subdtype is invalid (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21185">GH21185</a>)</li>
<li>Trying to reindex a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with a non unique <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> now raises a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> instead of an <code class="docutils literal notranslate"><span class="pre">Exception</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21770">GH21770</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.tz_convert()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.tz_localize()</span></code> have been removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21781">GH21781</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> subtraction will attempt to operate element-wise instead of raising <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19369">GH19369</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.formats.style.Styler</span></code></a> supports a <code class="docutils literal notranslate"><span class="pre">number-format</span></code> property when using <a class="reference internal" href="../../generated/pandas.io.formats.style.Styler.to_excel.html#pandas.io.formats.style.Styler.to_excel" title="pandas.io.formats.style.Styler.to_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_excel()</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22015">GH22015</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.corr.html#pandas.DataFrame.corr" title="pandas.DataFrame.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.corr()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.corr.html#pandas.Series.corr" title="pandas.Series.corr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.corr()</span></code></a> now raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> along with a helpful error message instead of a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> when supplied with an invalid method (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22298">GH22298</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">shift()</span></code> will now always return a copy, instead of the previous behaviour of returning self when shifting by 0 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22397">GH22397</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.set_index.html#pandas.DataFrame.set_index" title="pandas.DataFrame.set_index"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.set_index()</span></code></a> now allows all one-dimensional list-likes, raises a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> for incorrect types,
has an improved <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> message, and will not fail on duplicate column names with <code class="docutils literal notranslate"><span class="pre">drop=True</span></code>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22484">GH22484</a>)</li>
<li>Slicing a single row of a DataFrame with multiple ExtensionArrays of the same type now preserves the dtype, rather than coercing to object (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22784">GH22784</a>)</li>
<li><code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> attribute <cite>_cacheable</cite> and method <cite>_should_cache</cite> have been removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23118">GH23118</a>)</li>
<li>Comparing <a class="reference internal" href="../../generated/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> to be less or greater than unknown types now raises a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> instead of returning <code class="docutils literal notranslate"><span class="pre">False</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20829">GH20829</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.searchsorted()</span></code>, when supplied a scalar value to search for, now returns a scalar instead of an array (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23466">GH23466</a>).</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.searchsorted()</span></code> now raises a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> rather that a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>, if a searched for key is not found in its categories (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23466">GH23466</a>).</li>
<li><a class="reference internal" href="../../generated/pandas.Index.hasnans.html#pandas.Index.hasnans" title="pandas.Index.hasnans"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.hasnans()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.hasnans.html#pandas.Series.hasnans" title="pandas.Series.hasnans"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.hasnans()</span></code></a> now always return a python boolean. Previously, a python or a numpy boolean could be returned, depending on circumstances (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23294">GH23294</a>).</li>
<li>The order of the arguments of <a class="reference internal" href="../../generated/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> is rearranged to be consistent with each other. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23614">GH23614</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.reindex()</span></code> now raises a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if the target index is non-unique and not equal to the current index. It previously only raised if the target index was not of a categorical dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23963">GH23963</a>).</li>
</ul>
</div>
</div>
<div class="section" id="deprecations">
<span id="whatsnew-0240-deprecations"></span><h2>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../generated/pandas.MultiIndex.labels.html#pandas.MultiIndex.labels" title="pandas.MultiIndex.labels"><code class="xref py py-attr docutils literal notranslate"><span class="pre">MultiIndex.labels</span></code></a> has been deprecated and replaced by <code class="xref py py-attr docutils literal notranslate"><span class="pre">MultiIndex.codes</span></code>.
The functionality is unchanged. The new name better reflects the natures of
these codes and makes the <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> API more similar to the API for <a class="reference internal" href="../../generated/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13443">GH13443</a>).
As a consequence, other uses of the name <code class="docutils literal notranslate"><span class="pre">labels</span></code> in <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> have also been deprecated and replaced with <code class="docutils literal notranslate"><span class="pre">codes</span></code>:<ul>
<li>You should initialize a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> instance using a parameter named <code class="docutils literal notranslate"><span class="pre">codes</span></code> rather than <code class="docutils literal notranslate"><span class="pre">labels</span></code>.</li>
<li><code class="docutils literal notranslate"><span class="pre">MultiIndex.set_labels</span></code> has been deprecated in favor of <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.set_codes()</span></code>.</li>
<li>For method <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.copy()</span></code>, the <code class="docutils literal notranslate"><span class="pre">labels</span></code> parameter has been deprecated and replaced by a <code class="docutils literal notranslate"><span class="pre">codes</span></code> parameter.</li>
</ul>
</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.to_stata.html#pandas.DataFrame.to_stata" title="pandas.DataFrame.to_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code></a>, <a class="reference internal" href="../../generated/pandas.read_stata.html#pandas.read_stata" title="pandas.read_stata"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_stata()</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">StataReader</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">StataWriter</span></code> have deprecated the <code class="docutils literal notranslate"><span class="pre">encoding</span></code> argument. The encoding of a Stata dta file is determined by the file type and cannot be changed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21244">GH21244</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.MultiIndex.to_hierarchical.html#pandas.MultiIndex.to_hierarchical" title="pandas.MultiIndex.to_hierarchical"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.to_hierarchical()</span></code></a> is deprecated and will be removed in a future version (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21613">GH21613</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.ptp.html#pandas.Series.ptp" title="pandas.Series.ptp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.ptp()</span></code></a> is deprecated. Use <code class="docutils literal notranslate"><span class="pre">numpy.ptp</span></code> instead (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21614">GH21614</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.compress.html#pandas.Series.compress" title="pandas.Series.compress"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.compress()</span></code></a> is deprecated. Use <code class="docutils literal notranslate"><span class="pre">Series[condition]</span></code> instead (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/18262">GH18262</a>)</li>
<li>The signature of <a class="reference internal" href="../../generated/pandas.Series.to_csv.html#pandas.Series.to_csv" title="pandas.Series.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_csv()</span></code></a> has been uniformed to that of <a class="reference internal" href="../../generated/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a>: the name of the first argument is now <code class="docutils literal notranslate"><span class="pre">path_or_buf</span></code>, the order of subsequent arguments has changed, the <code class="docutils literal notranslate"><span class="pre">header</span></code> argument now defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19715">GH19715</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes" title="pandas.Categorical.from_codes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.from_codes()</span></code></a> has deprecated providing float values for the <code class="docutils literal notranslate"><span class="pre">codes</span></code> argument. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21767">GH21767</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_table.html#pandas.read_table" title="pandas.read_table"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_table()</span></code></a> is deprecated. Instead, use <a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_csv()</span></code></a> passing <code class="docutils literal notranslate"><span class="pre">sep='\t'</span></code> if necessary (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21948">GH21948</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.str.cat.html#pandas.Series.str.cat" title="pandas.Series.str.cat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.cat()</span></code></a> has deprecated using arbitrary list-likes <em>within</em> list-likes. A list-like container may still contain
many <code class="docutils literal notranslate"><span class="pre">Series</span></code>, <code class="docutils literal notranslate"><span class="pre">Index</span></code> or 1-dimensional <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>, or alternatively, only scalar values. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21950">GH21950</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">FrozenNDArray.searchsorted()</span></code> has deprecated the <code class="docutils literal notranslate"><span class="pre">v</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">value</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14645">GH14645</a>)</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">DatetimeIndex.shift()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">PeriodIndex.shift()</span></code> now accept <code class="docutils literal notranslate"><span class="pre">periods</span></code> argument instead of <code class="docutils literal notranslate"><span class="pre">n</span></code> for consistency with <a class="reference internal" href="../../generated/pandas.Index.shift.html#pandas.Index.shift" title="pandas.Index.shift"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.shift()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.shift.html#pandas.Series.shift" title="pandas.Series.shift"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.shift()</span></code></a>. Using <code class="docutils literal notranslate"><span class="pre">n</span></code> throws a deprecation warning (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22458">GH22458</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22912">GH22912</a>)</li>
<li>The <code class="docutils literal notranslate"><span class="pre">fastpath</span></code> keyword of the different Index constructors is deprecated (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23110">GH23110</a>).</li>
<li><a class="reference internal" href="../../generated/pandas.Timestamp.tz_localize.html#pandas.Timestamp.tz_localize" title="pandas.Timestamp.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.tz_localize()</span></code></a>, <a class="reference internal" href="../../generated/pandas.DatetimeIndex.tz_localize.html#pandas.DatetimeIndex.tz_localize" title="pandas.DatetimeIndex.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.tz_localize()</span></code></a>, and <a class="reference internal" href="../../generated/pandas.Series.tz_localize.html#pandas.Series.tz_localize" title="pandas.Series.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.tz_localize()</span></code></a> have deprecated the <code class="docutils literal notranslate"><span class="pre">errors</span></code> argument in favor of the <code class="docutils literal notranslate"><span class="pre">nonexistent</span></code> argument (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8917">GH8917</a>)</li>
<li>The class <code class="docutils literal notranslate"><span class="pre">FrozenNDArray</span></code> has been deprecated. When unpickling, <code class="docutils literal notranslate"><span class="pre">FrozenNDArray</span></code> will be unpickled to <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> once this class is removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9031">GH9031</a>)</li>
<li>The methods <a class="reference internal" href="../../generated/pandas.DataFrame.update.html#pandas.DataFrame.update" title="pandas.DataFrame.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.update()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Panel.update.html#pandas.Panel.update" title="pandas.Panel.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Panel.update()</span></code></a> have deprecated the <code class="docutils literal notranslate"><span class="pre">raise_conflict=False|True</span></code> keyword in favor of <code class="docutils literal notranslate"><span class="pre">errors='ignore'|'raise'</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23585">GH23585</a>)</li>
<li>The methods <a class="reference internal" href="../../generated/pandas.Series.str.partition.html#pandas.Series.str.partition" title="pandas.Series.str.partition"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.partition()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.str.rpartition.html#pandas.Series.str.rpartition" title="pandas.Series.str.rpartition"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.str.rpartition()</span></code></a> have deprecated the <code class="docutils literal notranslate"><span class="pre">pat</span></code> keyword in favor of <code class="docutils literal notranslate"><span class="pre">sep</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22676">GH22676</a>)</li>
<li>Deprecated the <cite>nthreads</cite> keyword of <a class="reference internal" href="../../generated/pandas.read_feather.html#pandas.read_feather" title="pandas.read_feather"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_feather()</span></code></a> in favor of
<cite>use_threads</cite> to reflect the changes in pyarrow 0.11.0. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23053">GH23053</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExtensionArray._formatting_values()</span></code> is deprecated. Use <code class="xref py py-attr docutils literal notranslate"><span class="pre">ExtensionArray._formatter</span></code> instead. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23601">GH23601</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.read_excel()</span></code></a> has deprecated accepting <code class="docutils literal notranslate"><span class="pre">usecols</span></code> as an integer. Please pass in a list of ints from 0 to <code class="docutils literal notranslate"><span class="pre">usecols</span></code> inclusive instead (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23527">GH23527</a>)</li>
<li>Constructing a <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> from data with <code class="docutils literal notranslate"><span class="pre">datetime64</span></code>-dtyped data is deprecated, will raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> in a future version (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23539">GH23539</a>)</li>
<li>Constructing a <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> from data with <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code>-dtyped data is deprecated, will raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> in a future version (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23675">GH23675</a>)</li>
<li>The <code class="docutils literal notranslate"><span class="pre">keep_tz=False</span></code> option (the default) of the <code class="docutils literal notranslate"><span class="pre">keep_tz</span></code> keyword of
<a class="reference internal" href="../../generated/pandas.DatetimeIndex.to_series.html#pandas.DatetimeIndex.to_series" title="pandas.DatetimeIndex.to_series"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.to_series()</span></code></a> is deprecated (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/17832">GH17832</a>).</li>
<li>Timezone converting a tz-aware <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> or <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> with <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> and the <code class="docutils literal notranslate"><span class="pre">tz</span></code> argument is now deprecated. Instead, use <a class="reference internal" href="../../generated/pandas.Timestamp.tz_convert.html#pandas.Timestamp.tz_convert" title="pandas.Timestamp.tz_convert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.tz_convert()</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23579">GH23579</a>)</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.types.is_period()</span></code> is deprecated in favor of <cite>pandas.types.is_period_dtype</cite> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23917">GH23917</a>)</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.types.is_datetimetz()</span></code> is deprecated in favor of <cite>pandas.types.is_datetime64tz</cite> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23917">GH23917</a>)</li>
<li>Creating a <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> or <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> by passing range arguments <cite>start</cite>, <cite>end</cite>, and <cite>periods</cite> is deprecated in favor of <a class="reference internal" href="../../generated/pandas.timedelta_range.html#pandas.timedelta_range" title="pandas.timedelta_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">timedelta_range()</span></code></a> and <a class="reference internal" href="../../generated/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23919">GH23919</a>)</li>
<li>Passing a string alias like <code class="docutils literal notranslate"><span class="pre">'datetime64[ns,</span> <span class="pre">UTC]'</span></code> as the <cite>unit</cite> parameter to <code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code> is deprecated. Use <code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeTZDtype.construct_from_string</span></code> instead (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23990">GH23990</a>).</li>
</ul>
</div>
<div class="section" id="integer-addition-subtraction-with-datetime-like-classes-is-deprecated">
<span id="whatsnew-0240-deprecations-datetimelike-int-ops"></span><h2>Integer Addition/Subtraction with Datetime-like Classes Is Deprecated<a class="headerlink" href="#integer-addition-subtraction-with-datetime-like-classes-is-deprecated" title="Permalink to this headline">¶</a></h2>
<p>In the past, users could add or subtract integers or integer-dtypes arrays
from <a class="reference internal" href="../../generated/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a>, <a class="reference internal" href="../../generated/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a>, and in some cases
<a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a>, <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> and <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a>.</p>
<p>This usage is now deprecated.  Instead add or subtract integer multiples of
the object’s <code class="docutils literal notranslate"><span class="pre">freq</span></code> attribute. The result of subtraction of <a class="reference internal" href="../../generated/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a>
objects will be agnostic of the multiplier of the objects’ <code class="docutils literal notranslate"><span class="pre">freq</span></code> attribute
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21939">GH21939</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23878">GH23878</a>).</p>
<p>Previous Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">per</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2016Q1&#39;</span><span class="p">)</span>
<span class="gp">In [4]: </span><span class="n">per</span> <span class="o">+</span> <span class="mi">3</span>
<span class="gh">Out[4]: </span><span class="go">Period(&#39;2016Q4&#39;, &#39;Q-DEC&#39;)</span>

<span class="gp">In [5]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;1994-05-06 12:15:16&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">Hour</span><span class="p">())</span>
<span class="gp">In [6]: </span><span class="n">ts</span> <span class="o">+</span> <span class="mi">2</span>
<span class="gh">Out[6]: </span><span class="go">Timestamp(&#39;1994-05-06 14:15:16&#39;, freq=&#39;H&#39;)</span>

<span class="gp">In [7]: </span><span class="n">tdi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">timedelta_range</span><span class="p">(</span><span class="s1">&#39;1D&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">In [8]: </span><span class="n">tdi</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gh">Out[8]: </span><span class="go">TimedeltaIndex([&#39;-1 days&#39;, &#39;1 days&#39;], dtype=&#39;timedelta64[ns]&#39;, freq=None)</span>

<span class="gp">In [9]: </span><span class="n">dti</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2001-01-01&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;7D&#39;</span><span class="p">)</span>
<span class="gp">In [10]: </span><span class="n">dti</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gh">Out[10]: </span><span class="go">DatetimeIndex([&#39;2001-01-08&#39;, &#39;2001-01-22&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p>Current Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [89]: </span><span class="n">per</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2016Q1&#39;</span><span class="p">)</span>

<span class="gp">In [90]: </span><span class="n">per</span> <span class="o">+</span> <span class="mi">3</span>
<span class="gh">Out[90]: </span><span class="go">Period(&#39;2016Q4&#39;, &#39;Q-DEC&#39;)</span>

<span class="gp">In [91]: </span><span class="n">per</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;2016Q1&#39;</span><span class="p">)</span>

<span class="gp">In [92]: </span><span class="n">per</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">per</span><span class="o">.</span><span class="n">freq</span>
<span class="gh">Out[92]: </span><span class="go">Period(&#39;2016Q4&#39;, &#39;Q-DEC&#39;)</span>

<span class="gp">In [93]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;1994-05-06 12:15:16&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">offsets</span><span class="o">.</span><span class="n">Hour</span><span class="p">())</span>

<span class="gp">In [94]: </span><span class="n">ts</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">ts</span><span class="o">.</span><span class="n">freq</span>
<span class="gh">Out[94]: </span><span class="go">Timestamp(&#39;1994-05-06 14:15:16&#39;, freq=&#39;H&#39;)</span>

<span class="gp">In [95]: </span><span class="n">tdi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">timedelta_range</span><span class="p">(</span><span class="s1">&#39;1D&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="gp">In [96]: </span><span class="n">tdi</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">2</span> <span class="o">*</span> <span class="n">tdi</span><span class="o">.</span><span class="n">freq</span><span class="p">,</span> <span class="mi">1</span> <span class="o">*</span> <span class="n">tdi</span><span class="o">.</span><span class="n">freq</span><span class="p">])</span>
<span class="gh">Out[96]: </span><span class="go">TimedeltaIndex([&#39;-1 days&#39;, &#39;1 days&#39;], dtype=&#39;timedelta64[ns]&#39;, freq=None)</span>

<span class="gp">In [97]: </span><span class="n">dti</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2001-01-01&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;7D&#39;</span><span class="p">)</span>

<span class="gp">In [98]: </span><span class="n">dti</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span> <span class="o">*</span> <span class="n">dti</span><span class="o">.</span><span class="n">freq</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">dti</span><span class="o">.</span><span class="n">freq</span><span class="p">])</span>
<span class="gh">Out[98]: </span><span class="go">DatetimeIndex([&#39;2001-01-08&#39;, &#39;2001-01-22&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
</div>
<div class="section" id="removal-of-prior-version-deprecations-changes">
<span id="whatsnew-0240-prior-deprecations"></span><h2>Removal of prior version deprecations/changes<a class="headerlink" href="#removal-of-prior-version-deprecations-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">LongPanel</span></code> and <code class="docutils literal notranslate"><span class="pre">WidePanel</span></code> classes have been removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10892">GH10892</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.repeat.html#pandas.Series.repeat" title="pandas.Series.repeat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.repeat()</span></code></a> has renamed the <code class="docutils literal notranslate"><span class="pre">reps</span></code> argument to <code class="docutils literal notranslate"><span class="pre">repeats</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14645">GH14645</a>)</li>
<li>Several private functions were removed from the (non-public) module <code class="docutils literal notranslate"><span class="pre">pandas.core.common</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22001">GH22001</a>)</li>
<li>Removal of the previously deprecated module <code class="docutils literal notranslate"><span class="pre">pandas.core.datetools</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14105">GH14105</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14094">GH14094</a>)</li>
<li>Strings passed into <a class="reference internal" href="../../generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="pandas.DataFrame.groupby"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code></a> that refer to both column and index levels will raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14432">GH14432</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Index.repeat.html#pandas.Index.repeat" title="pandas.Index.repeat"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.repeat()</span></code></a> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.repeat()</span></code> have renamed the <code class="docutils literal notranslate"><span class="pre">n</span></code> argument to <code class="docutils literal notranslate"><span class="pre">repeats</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14645">GH14645</a>)</li>
<li>The <code class="docutils literal notranslate"><span class="pre">Series</span></code> constructor and <code class="docutils literal notranslate"><span class="pre">.astype</span></code> method will now raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if timestamp dtypes are passed in without a unit (e.g. <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code>) for the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> parameter (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15987">GH15987</a>)</li>
<li>Removal of the previously deprecated <code class="docutils literal notranslate"><span class="pre">as_indexer</span></code> keyword completely from <code class="docutils literal notranslate"><span class="pre">str.match()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22356">GH22356</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/6581">GH6581</a>)</li>
<li>The modules <code class="docutils literal notranslate"><span class="pre">pandas.types</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas.computation</span></code>, and <code class="docutils literal notranslate"><span class="pre">pandas.util.decorators</span></code> have been removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16157">GH16157</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16250">GH16250</a>)</li>
<li>Removed the <code class="docutils literal notranslate"><span class="pre">pandas.formats.style</span></code> shim for <a class="reference internal" href="../../generated/pandas.io.formats.style.Styler.html#pandas.io.formats.style.Styler" title="pandas.io.formats.style.Styler"><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.formats.style.Styler</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16059">GH16059</a>)</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.pnow()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.match()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.groupby()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">pd.get_store()</span></code>, <code class="docutils literal notranslate"><span class="pre">pd.Expr</span></code>, and <code class="docutils literal notranslate"><span class="pre">pd.Term</span></code> have been removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15538">GH15538</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15940">GH15940</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.searchsorted()</span></code> and <a class="reference internal" href="../../generated/pandas.Series.searchsorted.html#pandas.Series.searchsorted" title="pandas.Series.searchsorted"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.searchsorted()</span></code></a> have renamed the <code class="docutils literal notranslate"><span class="pre">v</span></code> argument to <code class="docutils literal notranslate"><span class="pre">value</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14645">GH14645</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">pandas.parser</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas.lib</span></code>, and <code class="docutils literal notranslate"><span class="pre">pandas.tslib</span></code> have been removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15537">GH15537</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">TimedeltaIndex.searchsorted()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.searchsorted()</span></code>, and <code class="xref py py-meth docutils literal notranslate"><span class="pre">PeriodIndex.searchsorted()</span></code> have renamed the <code class="docutils literal notranslate"><span class="pre">key</span></code> argument to <code class="docutils literal notranslate"><span class="pre">value</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14645">GH14645</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.consolidate.html#pandas.DataFrame.consolidate" title="pandas.DataFrame.consolidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.consolidate()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.consolidate.html#pandas.Series.consolidate" title="pandas.Series.consolidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.consolidate()</span></code></a> have been removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15501">GH15501</a>)</li>
<li>Removal of the previously deprecated module <code class="docutils literal notranslate"><span class="pre">pandas.json</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19944">GH19944</a>)</li>
<li>The module <code class="docutils literal notranslate"><span class="pre">pandas.tools</span></code> has been removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15358">GH15358</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16005">GH16005</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.get_values()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.to_dense()</span></code> have dropped the <code class="docutils literal notranslate"><span class="pre">fill</span></code> parameter (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14686">GH14686</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.sortlevel.html#pandas.DataFrame.sortlevel" title="pandas.DataFrame.sortlevel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.sortlevel()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.sortlevel.html#pandas.Series.sortlevel" title="pandas.Series.sortlevel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.sortlevel()</span></code></a> have been removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15099">GH15099</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseSeries.to_dense()</span></code> has dropped the <code class="docutils literal notranslate"><span class="pre">sparse_only</span></code> parameter (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14686">GH14686</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.astype.html#pandas.Series.astype" title="pandas.Series.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.astype()</span></code></a> have renamed the <code class="docutils literal notranslate"><span class="pre">raise_on_error</span></code> argument to <code class="docutils literal notranslate"><span class="pre">errors</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14967">GH14967</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">is_sequence</span></code>, <code class="docutils literal notranslate"><span class="pre">is_any_int_dtype</span></code>, and <code class="docutils literal notranslate"><span class="pre">is_floating_dtype</span></code> have been removed from <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16163">GH16163</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16189">GH16189</a>)</li>
</ul>
</div>
<div class="section" id="performance-improvements">
<span id="whatsnew-0240-performance"></span><h2>Performance Improvements<a class="headerlink" href="#performance-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Slicing Series and DataFrames with an monotonically increasing <a class="reference internal" href="../../generated/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a>
is now very fast and has speed comparable to slicing with an <code class="docutils literal notranslate"><span class="pre">Int64Index</span></code>.
The speed increase is both when indexing by label (using .loc) and position(.iloc) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20395">GH20395</a>)
Slicing a monotonically increasing <a class="reference internal" href="../../generated/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> itself (i.e. <code class="docutils literal notranslate"><span class="pre">ci[1000:2000]</span></code>)
shows similar speed improvements as above (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21659">GH21659</a>)</li>
<li>Improved performance of <code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.equals()</span></code> when comparing to another <a class="reference internal" href="../../generated/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/24023">GH24023</a>)</li>
<li>Improved performance of <a class="reference internal" href="../../generated/pandas.Series.describe.html#pandas.Series.describe" title="pandas.Series.describe"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.describe()</span></code></a> in case of numeric dtpyes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21274">GH21274</a>)</li>
<li>Improved performance of <a class="reference internal" href="../../generated/pandas.core.groupby.GroupBy.rank.html#pandas.core.groupby.GroupBy.rank" title="pandas.core.groupby.GroupBy.rank"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.core.groupby.GroupBy.rank()</span></code></a> when dealing with tied rankings (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21237">GH21237</a>)</li>
<li>Improved performance of <a class="reference internal" href="../../generated/pandas.DataFrame.set_index.html#pandas.DataFrame.set_index" title="pandas.DataFrame.set_index"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.set_index()</span></code></a> with columns consisting of <a class="reference internal" href="../../generated/pandas.Period.html#pandas.Period" title="pandas.Period"><code class="xref py py-class docutils literal notranslate"><span class="pre">Period</span></code></a> objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21582">GH21582</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21606">GH21606</a>)</li>
<li>Improved performance of membership checks in <a class="reference internal" href="../../generated/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> and <a class="reference internal" href="../../generated/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a>
(i.e. <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">cat</span></code>-style checks are much faster). <code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex.contains()</span></code>
is likewise much faster (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21369">GH21369</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21508">GH21508</a>)</li>
<li>Improved performance of <code class="xref py py-meth docutils literal notranslate"><span class="pre">HDFStore.groups()</span></code> (and dependent functions like
<a class="reference internal" href="../../generated/pandas.HDFStore.keys.html#pandas.HDFStore.keys" title="pandas.HDFStore.keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">keys()</span></code></a>.  (i.e. <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">store</span></code> checks are much faster)
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21372">GH21372</a>)</li>
<li>Improved the performance of <a class="reference internal" href="../../generated/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.get_dummies()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">sparse=True</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21997">GH21997</a>)</li>
<li>Improved performance of <code class="xref py py-func docutils literal notranslate"><span class="pre">IndexEngine.get_indexer_non_unique()</span></code> for sorted, non-unique indexes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9466">GH9466</a>)</li>
<li>Improved performance of <code class="xref py py-func docutils literal notranslate"><span class="pre">PeriodIndex.unique()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23083">GH23083</a>)</li>
<li>Improved performance of <code class="xref py py-func docutils literal notranslate"><span class="pre">pd.concat()</span></code> for <cite>Series</cite> objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23404">GH23404</a>)</li>
<li>Improved performance of <a class="reference internal" href="../../generated/pandas.DatetimeIndex.normalize.html#pandas.DatetimeIndex.normalize" title="pandas.DatetimeIndex.normalize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.normalize()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Timestamp.normalize.html#pandas.Timestamp.normalize" title="pandas.Timestamp.normalize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.normalize()</span></code></a> for timezone naive or UTC datetimes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23634">GH23634</a>)</li>
<li>Improved performance of <a class="reference internal" href="../../generated/pandas.DatetimeIndex.tz_localize.html#pandas.DatetimeIndex.tz_localize" title="pandas.DatetimeIndex.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.tz_localize()</span></code></a> and various <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> attributes with dateutil UTC timezone (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23772">GH23772</a>)</li>
<li>Fixed a performance regression on Windows with Python 3.7 of <code class="xref py py-func docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23516">GH23516</a>)</li>
<li>Improved performance of <a class="reference internal" href="../../generated/pandas.Categorical.html#pandas.Categorical" title="pandas.Categorical"><code class="xref py py-class docutils literal notranslate"><span class="pre">Categorical</span></code></a> constructor for <cite>Series</cite> objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23814">GH23814</a>)</li>
</ul>
</div>
<div class="section" id="documentation-changes">
<span id="whatsnew-0240-docs"></span><h2>Documentation Changes<a class="headerlink" href="#documentation-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Added sphinx spelling extension, updated documentation on how to use the spell check (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21079">GH21079</a>)</li>
<li></li>
<li></li>
</ul>
</div>
<div class="section" id="bug-fixes">
<span id="whatsnew-0240-bug-fixes"></span><h2>Bug Fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="categorical">
<h3>Categorical<a class="headerlink" href="#categorical" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug in <a class="reference internal" href="../../generated/pandas.Categorical.from_codes.html#pandas.Categorical.from_codes" title="pandas.Categorical.from_codes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.from_codes()</span></code></a> where <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values in <code class="docutils literal notranslate"><span class="pre">codes</span></code> were silently converted to <code class="docutils literal notranslate"><span class="pre">0</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21767">GH21767</a>). In the future this will raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>. Also changes the behavior of <code class="docutils literal notranslate"><span class="pre">.from_codes([1.1,</span> <span class="pre">2.0])</span></code>.</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.sort_values()</span></code> where <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values were always positioned in front regardless of <code class="docutils literal notranslate"><span class="pre">na_position</span></code> value. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22556">GH22556</a>).</li>
<li>Bug when indexing with a boolean-valued <code class="docutils literal notranslate"><span class="pre">Categorical</span></code>. Now a boolean-valued <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> is treated as a boolean mask (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22665">GH22665</a>)</li>
<li>Constructing a <a class="reference internal" href="../../generated/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalIndex</span></code></a> with empty values and boolean categories was raising a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> after a change to dtype coercion (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22702">GH22702</a>).</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">Categorical.take()</span></code> with a user-provided <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> not encoding the <code class="docutils literal notranslate"><span class="pre">fill_value</span></code>, which could result in a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>, incorrect results, or a segmentation fault (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23296">GH23296</a>).</li>
<li>In meth:<cite>Series.unstack</cite>, specifying a <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> not present in the categories now raises a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> rather than ignoring the <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23284">GH23284</a>)</li>
<li>Bug when resampling <code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataframe.resample()</span></code> and aggregating on categorical data, the categorical dtype was getting lost. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23227">GH23227</a>)</li>
<li>Bug in many methods of the <code class="docutils literal notranslate"><span class="pre">.str</span></code>-accessor, which always failed on calling the <code class="docutils literal notranslate"><span class="pre">CategoricalIndex.str</span></code> constructor (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23555">GH23555</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23556">GH23556</a>)</li>
</ul>
</div>
<div class="section" id="datetimelike">
<h3>Datetimelike<a class="headerlink" href="#datetimelike" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed bug where two <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> objects with different <code class="docutils literal notranslate"><span class="pre">normalize</span></code> attributes could evaluate as equal (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21404">GH21404</a>)</li>
<li>Fixed bug where <a class="reference internal" href="../../generated/pandas.Timestamp.resolution.html#pandas.Timestamp.resolution" title="pandas.Timestamp.resolution"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.resolution()</span></code></a> incorrectly returned 1-microsecond <code class="docutils literal notranslate"><span class="pre">timedelta</span></code> instead of 1-nanosecond <a class="reference internal" href="../../generated/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21336">GH21336</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21365">GH21365</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> that did not consistently return an <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> when <code class="docutils literal notranslate"><span class="pre">box=True</span></code> was specified (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21864">GH21864</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> comparisons where string comparisons incorrectly raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22074">GH22074</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> comparisons when comparing against <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtyped arrays; in some cases <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> was incorrectly raised, in others it incorrectly failed to raise (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22074">GH22074</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> comparisons when comparing against object-dtyped arrays (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22074">GH22074</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype addition and subtraction with <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code>-like objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22005">GH22005</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH22163</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype addition and subtraction with <code class="docutils literal notranslate"><span class="pre">DateOffset</span></code> objects returning an <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype instead of <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21610">GH21610</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH22163</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype comparing against <code class="docutils literal notranslate"><span class="pre">NaT</span></code> incorrectly (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22242">GH22242</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH22163</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype subtracting <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code>-like object incorrectly returned <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype instead of <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8554">GH8554</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH22163</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> dtype subtracting <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code> object with non-nanosecond unit failing to convert to nanoseconds (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/18874">GH18874</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH22163</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> comparisons against <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code>-like objects failing to raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> for inequality checks with mismatched types (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8932">GH8932</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH22163</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with mixed dtypes including <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> incorrectly raising <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> on equality comparisons (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13128">GH13128</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH22163</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.eq.html#pandas.DataFrame.eq" title="pandas.DataFrame.eq"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.eq()</span></code></a> comparison against <code class="docutils literal notranslate"><span class="pre">NaT</span></code> incorrectly returning <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15697">GH15697</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH22163</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> subtraction that incorrectly failed to raise <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22492">GH22492</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22508">GH22508</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> incorrectly allowing indexing with <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> object (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20464">GH20464</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> where frequency was being set if original frequency was <code class="docutils literal notranslate"><span class="pre">None</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22150">GH22150</a>)</li>
<li>Bug in rounding methods of <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> (<a class="reference internal" href="../../generated/pandas.DatetimeIndex.round.html#pandas.DatetimeIndex.round" title="pandas.DatetimeIndex.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">round()</span></code></a>, <a class="reference internal" href="../../generated/pandas.DatetimeIndex.ceil.html#pandas.DatetimeIndex.ceil" title="pandas.DatetimeIndex.ceil"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ceil()</span></code></a>, <a class="reference internal" href="../../generated/pandas.DatetimeIndex.floor.html#pandas.DatetimeIndex.floor" title="pandas.DatetimeIndex.floor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">floor()</span></code></a>) and <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> (<a class="reference internal" href="../../generated/pandas.Timestamp.round.html#pandas.Timestamp.round" title="pandas.Timestamp.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">round()</span></code></a>, <a class="reference internal" href="../../generated/pandas.Timestamp.ceil.html#pandas.Timestamp.ceil" title="pandas.Timestamp.ceil"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ceil()</span></code></a>, <a class="reference internal" href="../../generated/pandas.Timestamp.floor.html#pandas.Timestamp.floor" title="pandas.Timestamp.floor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">floor()</span></code></a>) could give rise to loss of precision (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22591">GH22591</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.to_datetime.html#pandas.to_datetime" title="pandas.to_datetime"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code></a> with an <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> argument that would drop the <code class="docutils literal notranslate"><span class="pre">name</span></code> from the result (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21697">GH21697</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> where adding or subtracting a <code class="xref py py-class docutils literal notranslate"><span class="pre">timedelta</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">Tick</span></code> object produced incorrect results (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22988">GH22988</a>)</li>
<li>Bug in the <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> repr with period-dtype data missing a space before the data (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23601">GH23601</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> when decrementing a start date to a past end date by a negative frequency (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23270">GH23270</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.min.html#pandas.Series.min" title="pandas.Series.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.min()</span></code></a> which would return <code class="docutils literal notranslate"><span class="pre">NaN</span></code> instead of <code class="docutils literal notranslate"><span class="pre">NaT</span></code> when called on a series of <code class="docutils literal notranslate"><span class="pre">NaT</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23282">GH23282</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.combine_first.html#pandas.Series.combine_first" title="pandas.Series.combine_first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.combine_first()</span></code></a> not properly aligning categoricals, so that missing values in <code class="docutils literal notranslate"><span class="pre">self</span></code> where not filled by valid values from <code class="docutils literal notranslate"><span class="pre">other</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/24147">GH24147</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.combine.html#pandas.DataFrame.combine" title="pandas.DataFrame.combine"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.combine()</span></code></a> with datetimelike values raising a TypeError (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23079">GH23079</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.date_range.html#pandas.date_range" title="pandas.date_range"><code class="xref py py-func docutils literal notranslate"><span class="pre">date_range()</span></code></a> with frequency of <code class="docutils literal notranslate"><span class="pre">Day</span></code> or higher where dates sufficiently far in the future could wrap around to the past instead of raising <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14187">GH14187</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> with attribute <code class="docutils literal notranslate"><span class="pre">freq.n</span></code> greater than 1 where adding a <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> object would return incorrect results (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23215">GH23215</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> that interpreted string indices as lists of characters when setting datetimelike values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23451">GH23451</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> constructor which would drop the frequency of an input <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22311">GH22311</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> where calling <code class="docutils literal notranslate"><span class="pre">np.array(dtindex,</span> <span class="pre">dtype=object)</span></code> would incorrectly return an array of <code class="docutils literal notranslate"><span class="pre">long</span></code> objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23524">GH23524</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> where passing a timezone-aware <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> and <cite>dtype=object</cite> would incorrectly raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23524">GH23524</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> where calling <code class="docutils literal notranslate"><span class="pre">np.array(dtindex,</span> <span class="pre">dtype=object)</span></code> on a timezone-naive <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> would return an array of <code class="docutils literal notranslate"><span class="pre">datetime</span></code> objects instead of <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> objects, potentially losing nanosecond portions of the timestamps (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23524">GH23524</a>)</li>
</ul>
</div>
<div class="section" id="timedelta">
<h3>Timedelta<a class="headerlink" href="#timedelta" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype division by <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code>-like scalar incorrectly returning <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype instead of <code class="docutils literal notranslate"><span class="pre">float64</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20088">GH20088</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH22163</a>)</li>
<li>Bug in adding a <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> with object dtype to a <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> with <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype incorrectly raising (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22390">GH22390</a>)</li>
<li>Bug in multiplying a <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> with numeric dtype against a <code class="docutils literal notranslate"><span class="pre">timedelta</span></code> object (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22390">GH22390</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> with numeric dtype when adding or subtracting an an array or <code class="docutils literal notranslate"><span class="pre">Series</span></code> with <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22390">GH22390</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> with numeric dtype when multiplying or dividing an array with dtype <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22390">GH22390</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> incorrectly allowing indexing with <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> object (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20464">GH20464</a>)</li>
<li>Fixed bug where subtracting <a class="reference internal" href="../../generated/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> from an object-dtyped array would raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21980">GH21980</a>)</li>
<li>Fixed bug in adding a <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with all-<cite>timedelta64[ns]</cite> dtypes to a <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with all-integer dtypes returning incorrect results instead of raising <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22696">GH22696</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> where adding a timezone-aware datetime scalar incorrectly returned a timezone-naive <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23215">GH23215</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> where adding <code class="docutils literal notranslate"><span class="pre">np.timedelta64('NaT')</span></code> incorrectly returned an all-<cite>NaT</cite> <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> instead of an all-<cite>NaT</cite> <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23215">GH23215</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Timedelta.html#pandas.Timedelta" title="pandas.Timedelta"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timedelta</span></code></a> and <a class="reference internal" href="../../generated/pandas.to_timedelta.html#pandas.to_timedelta" title="pandas.to_timedelta"><code class="xref py py-func docutils literal notranslate"><span class="pre">to_timedelta()</span></code></a> have inconsistencies in supported unit string (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21762">GH21762</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> division where dividing by another <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> raised <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> instead of returning a <a class="reference internal" href="../../generated/pandas.Float64Index.html#pandas.Float64Index" title="pandas.Float64Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float64Index</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23829">GH23829</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22631">GH22631</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.TimedeltaIndex.html#pandas.TimedeltaIndex" title="pandas.TimedeltaIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code></a> comparison operations where comparing against non-<code class="docutils literal notranslate"><span class="pre">Timedelta</span></code>-like objects would raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> instead of returning all-<code class="docutils literal notranslate"><span class="pre">False</span></code> for <code class="docutils literal notranslate"><span class="pre">__eq__</span></code> and all-<code class="docutils literal notranslate"><span class="pre">True</span></code> for <code class="docutils literal notranslate"><span class="pre">__ne__</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/24056">GH24056</a>)</li>
</ul>
</div>
<div class="section" id="timezones">
<h3>Timezones<a class="headerlink" href="#timezones" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.shift()</span></code> where an <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> would raise when shifting across DST (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8616">GH8616</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> constructor where passing an invalid timezone offset designator (<code class="docutils literal notranslate"><span class="pre">Z</span></code>) would not raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8910">GH8910</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Timestamp.replace.html#pandas.Timestamp.replace" title="pandas.Timestamp.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.replace()</span></code></a> where replacing at a DST boundary would retain an incorrect offset (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/7825">GH7825</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.replace.html#pandas.Series.replace" title="pandas.Series.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.replace()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> data when replacing <code class="docutils literal notranslate"><span class="pre">NaT</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11792">GH11792</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> when passing different string date formats with a timezone offset would produce different timezone offsets (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12064">GH12064</a>)</li>
<li>Bug when comparing a tz-naive <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> to a tz-aware <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> which would coerce the <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> to tz-naive (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12601">GH12601</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.truncate.html#pandas.Series.truncate" title="pandas.Series.truncate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.truncate()</span></code></a> with a tz-aware <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> which would cause a core dump (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9243">GH9243</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> constructor which would coerce tz-aware and tz-naive <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> to tz-aware (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13051">GH13051</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> with <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> dtype that did not localize integer data correctly (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20964">GH20964</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> where constructing with an integer and tz would not localize correctly (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12619">GH12619</a>)</li>
<li>Fixed bug where <a class="reference internal" href="../../generated/pandas.DataFrame.describe.html#pandas.DataFrame.describe" title="pandas.DataFrame.describe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.describe()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.describe.html#pandas.Series.describe" title="pandas.Series.describe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.describe()</span></code></a> on tz-aware datetimes did not show <cite>first</cite> and <cite>last</cite> result (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21328">GH21328</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> comparisons failing to raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when comparing timezone-aware <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> against <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22074">GH22074</a>)</li>
<li>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> assignment with a timezone-aware scalar (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19843">GH19843</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.asof.html#pandas.DataFrame.asof" title="pandas.DataFrame.asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.asof()</span></code></a> that raised a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when attempting to compare tz-naive and tz-aware timestamps (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21194">GH21194</a>)</li>
<li>Bug when constructing a <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> with <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> constructed with the <code class="docutils literal notranslate"><span class="pre">replace</span></code> method across DST (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/18785">GH18785</a>)</li>
<li>Bug when setting a new value with <a class="reference internal" href="../../generated/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> with a <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> with a DST transition (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/18308">GH18308</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20724">GH20724</a>)</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.unique()</span></code> that did not re-localize tz-aware dates correctly (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21737">GH21737</a>)</li>
<li>Bug when indexing a <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> with a DST transition (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21846">GH21846</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> where an <code class="docutils literal notranslate"><span class="pre">AmbiguousTimeError</span></code> or <code class="docutils literal notranslate"><span class="pre">NonExistentTimeError</span></code> would raise if a timezone aware timeseries ended on a DST transition (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19375">GH19375</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10117">GH10117</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.drop.html#pandas.DataFrame.drop" title="pandas.DataFrame.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.drop()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.drop.html#pandas.Series.drop" title="pandas.Series.drop"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.drop()</span></code></a> when specifying a tz-aware Timestamp key to drop from a <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> with a DST transition (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21761">GH21761</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> constructor where <code class="xref py py-class docutils literal notranslate"><span class="pre">NaT</span></code> and <code class="docutils literal notranslate"><span class="pre">dateutil.tz.tzlocal</span></code> would raise an <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> error (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23807">GH23807</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DatetimeIndex.tz_localize.html#pandas.DatetimeIndex.tz_localize" title="pandas.DatetimeIndex.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.tz_localize()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Timestamp.tz_localize.html#pandas.Timestamp.tz_localize" title="pandas.Timestamp.tz_localize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Timestamp.tz_localize()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">dateutil.tz.tzlocal</span></code> near a DST transition that would return an incorrectly localized datetime (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23807">GH23807</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Timestamp.html#pandas.Timestamp" title="pandas.Timestamp"><code class="xref py py-class docutils literal notranslate"><span class="pre">Timestamp</span></code></a> constructor where a <code class="docutils literal notranslate"><span class="pre">dateutil.tz.tzutc</span></code> timezone passed with a <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> argument would be converted to a <code class="docutils literal notranslate"><span class="pre">pytz.UTC</span></code> timezone (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23807">GH23807</a>)</li>
</ul>
</div>
<div class="section" id="offsets">
<h3>Offsets<a class="headerlink" href="#offsets" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug in <code class="xref py py-class docutils literal notranslate"><span class="pre">FY5253</span></code> where date offsets could incorrectly raise an <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> in arithmetic operatons (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14774">GH14774</a>)</li>
<li>Bug in <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> where keyword arguments <code class="docutils literal notranslate"><span class="pre">week</span></code> and <code class="docutils literal notranslate"><span class="pre">milliseconds</span></code> were accepted and ignored.  Passing these will now raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19398">GH19398</a>)</li>
<li>Bug in adding <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> with <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> or <a class="reference internal" href="../../generated/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> incorrectly raising <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23215">GH23215</a>)</li>
<li>Bug in comparing <code class="xref py py-class docutils literal notranslate"><span class="pre">DateOffset</span></code> objects with non-DateOffset objects, particularly strings, raising <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> instead of returning <code class="docutils literal notranslate"><span class="pre">False</span></code> for equality checks and <code class="docutils literal notranslate"><span class="pre">True</span></code> for not-equal checks (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23524">GH23524</a>)</li>
</ul>
</div>
<div class="section" id="numeric">
<h3>Numeric<a class="headerlink" href="#numeric" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> <code class="docutils literal notranslate"><span class="pre">__rmatmul__</span></code> doesn’t support matrix vector multiplication (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21530">GH21530</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.factorize.html#pandas.factorize" title="pandas.factorize"><code class="xref py py-func docutils literal notranslate"><span class="pre">factorize()</span></code></a> fails with read-only array (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12813">GH12813</a>)</li>
<li>Fixed bug in <a class="reference internal" href="../../generated/pandas.unique.html#pandas.unique" title="pandas.unique"><code class="xref py py-func docutils literal notranslate"><span class="pre">unique()</span></code></a> handled signed zeros inconsistently: for some inputs 0.0 and -0.0 were treated as equal and for some inputs as different. Now they are treated as equal for all inputs (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21866">GH21866</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.agg.html#pandas.DataFrame.agg" title="pandas.DataFrame.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.agg()</span></code></a>, <a class="reference internal" href="../../generated/pandas.DataFrame.transform.html#pandas.DataFrame.transform" title="pandas.DataFrame.transform"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.transform()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> where,
when supplied with a list of functions and <code class="docutils literal notranslate"><span class="pre">axis=1</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">df.apply(['sum',</span> <span class="pre">'mean'],</span> <span class="pre">axis=1)</span></code>),
a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> was wrongly raised. For all three methods such calculation are now done correctly. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16679">GH16679</a>).</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> comparison against datetime-like scalars and arrays (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22074">GH22074</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> multiplication between boolean dtype and integer returning <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype instead of integer dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22047">GH22047</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22163">GH22163</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> where, when supplied with a string argument and additional positional or keyword arguments (e.g. <code class="docutils literal notranslate"><span class="pre">df.apply('sum',</span> <span class="pre">min_count=1)</span></code>), a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> was wrongly raised (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22376">GH22376</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.astype.html#pandas.DataFrame.astype" title="pandas.DataFrame.astype"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code></a> to extension dtype may raise <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22578">GH22578</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype arithmetic operations with <code class="docutils literal notranslate"><span class="pre">ndarray</span></code> with integer dtype incorrectly treating the narray as <code class="docutils literal notranslate"><span class="pre">timedelta64[ns]</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23114">GH23114</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.rpow.html#pandas.Series.rpow" title="pandas.Series.rpow"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rpow()</span></code></a> with object dtype <code class="docutils literal notranslate"><span class="pre">NaN</span></code> for <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">**</span> <span class="pre">NA</span></code> instead of <code class="docutils literal notranslate"><span class="pre">1</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22922">GH22922</a>).</li>
<li><a class="reference internal" href="../../generated/pandas.Series.agg.html#pandas.Series.agg" title="pandas.Series.agg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.agg()</span></code></a> can now handle numpy NaN-aware methods like <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.nansum.html#numpy.nansum" title="(in NumPy v1.15)"><code class="xref py py-func docutils literal notranslate"><span class="pre">numpy.nansum()</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19629">GH19629</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.rank.html#pandas.Series.rank" title="pandas.Series.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.rank()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.rank.html#pandas.DataFrame.rank" title="pandas.DataFrame.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.rank()</span></code></a> when <code class="docutils literal notranslate"><span class="pre">pct=True</span></code> and more than 2:sup:<cite>24</cite> rows are present resulted in percentages greater than 1.0 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/18271">GH18271</a>)</li>
<li>Calls such as <a class="reference internal" href="../../generated/pandas.DataFrame.round.html#pandas.DataFrame.round" title="pandas.DataFrame.round"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.round()</span></code></a> with a non-unique <a class="reference internal" href="../../generated/pandas.CategoricalIndex.html#pandas.CategoricalIndex" title="pandas.CategoricalIndex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CategoricalIndex()</span></code></a> now return expected data. Previously, data would be improperly duplicated (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21809">GH21809</a>).</li>
<li>Added <code class="docutils literal notranslate"><span class="pre">log10</span></code> to the list of supported functions in <a class="reference internal" href="../../generated/pandas.DataFrame.eval.html#pandas.DataFrame.eval" title="pandas.DataFrame.eval"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.eval()</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/24139">GH24139</a>)</li>
</ul>
</div>
<div class="section" id="strings">
<h3>Strings<a class="headerlink" href="#strings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.str.partition()</span></code> was not nan-safe (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23558">GH23558</a>).</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.str.split()</span></code> was not nan-safe (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23677">GH23677</a>).</li>
<li>Bug <a class="reference internal" href="../../generated/pandas.Series.str.contains.html#pandas.Series.str.contains" title="pandas.Series.str.contains"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.str.contains()</span></code></a> not respecting the <code class="docutils literal notranslate"><span class="pre">na</span></code> argument for a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> dtype <code class="docutils literal notranslate"><span class="pre">Series</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22158">GH22158</a>)</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.str.cat()</span></code> when the result contained only <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/24044">GH24044</a>)</li>
</ul>
</div>
<div class="section" id="interval">
<h3>Interval<a class="headerlink" href="#interval" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug in the <a class="reference internal" href="../../generated/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> constructor where the <code class="docutils literal notranslate"><span class="pre">closed</span></code> parameter did not always override the inferred <code class="docutils literal notranslate"><span class="pre">closed</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19370">GH19370</a>)</li>
<li>Bug in the <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> repr where a trailing comma was missing after the list of intervals (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20611">GH20611</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Interval.html#pandas.Interval" title="pandas.Interval"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interval</span></code></a> where scalar arithmetic operations did not retain the <code class="docutils literal notranslate"><span class="pre">closed</span></code> value (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22313">GH22313</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> where indexing with datetime-like values raised a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20636">GH20636</a>)</li>
<li>Bug in <code class="docutils literal notranslate"><span class="pre">IntervalTree</span></code> where data containing <code class="docutils literal notranslate"><span class="pre">NaN</span></code> triggered a warning and resulted in incorrect indexing queries with <a class="reference internal" href="../../generated/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23352">GH23352</a>)</li>
</ul>
</div>
<div class="section" id="indexing">
<h3>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The traceback from a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> when asking <code class="docutils literal notranslate"><span class="pre">.loc</span></code> for a single missing label is now shorter and more clear (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21557">GH21557</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.PeriodIndex.html#pandas.PeriodIndex" title="pandas.PeriodIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">PeriodIndex</span></code></a> now emits a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> when a malformed string is looked up, which is consistent with the behavior of <code class="xref py py-class docutils literal notranslate"><span class="pre">DateTimeIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22803">GH22803</a>)</li>
<li>When <code class="docutils literal notranslate"><span class="pre">.ix</span></code> is asked for a missing integer label in a <a class="reference internal" href="../../generated/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> with a first level of integer type, it now raises a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>, consistently with the case of a flat <a class="reference internal" href="../../generated/pandas.Int64Index.html#pandas.Int64Index" title="pandas.Int64Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Int64Index</span></code></a>, rather than falling back to positional indexing (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21593">GH21593</a>)</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.reindex()</span></code> when reindexing a tz-naive and tz-aware <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8306">GH8306</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.reindex.html#pandas.Series.reindex" title="pandas.Series.reindex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.reindex()</span></code></a> when reindexing an empty series with a <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20869">GH20869</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> when setting values with <code class="docutils literal notranslate"><span class="pre">.loc</span></code> and a timezone aware <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11365">GH11365</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">DataFrame.__getitem__</span></code> now accepts dictionaries and dictionary keys as list-likes of labels, consistently with <code class="docutils literal notranslate"><span class="pre">Series.__getitem__</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21294">GH21294</a>)</li>
<li>Fixed <code class="docutils literal notranslate"><span class="pre">DataFrame[np.nan]</span></code> when columns are non-unique (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21428">GH21428</a>)</li>
<li>Bug when indexing <a class="reference internal" href="../../generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex" title="pandas.DatetimeIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatetimeIndex</span></code></a> with nanosecond resolution dates and timezones (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11679">GH11679</a>)</li>
<li>Bug where indexing with a Numpy array containing negative values would mutate the indexer (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21867">GH21867</a>)</li>
<li>Bug where mixed indexes wouldn’t allow integers for <code class="docutils literal notranslate"><span class="pre">.at</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19860">GH19860</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">Float64Index.get_loc</span></code> now raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> when boolean key passed. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19087">GH19087</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.loc.html#pandas.DataFrame.loc" title="pandas.DataFrame.loc"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.loc()</span></code></a> when indexing with an <a class="reference internal" href="../../generated/pandas.IntervalIndex.html#pandas.IntervalIndex" title="pandas.IntervalIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntervalIndex</span></code></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19977">GH19977</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> no longer mangles <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="docutils literal notranslate"><span class="pre">NaN</span></code> and <code class="docutils literal notranslate"><span class="pre">NaT</span></code>, i.e. they are treated as three different keys. However, for numeric Index all three are still coerced to a <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22332">GH22332</a>)</li>
<li>Bug in <cite>scalar in Index</cite> if scalar is a float while the <code class="docutils literal notranslate"><span class="pre">Index</span></code> is of integer dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22085">GH22085</a>)</li>
<li>Bug in <cite>MultiIndex.set_levels</cite> when levels value is not subscriptable (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23273">GH23273</a>)</li>
<li>Bug where setting a timedelta column by <code class="docutils literal notranslate"><span class="pre">Index</span></code> causes it to be casted to double, and therefore lose precision (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23511">GH23511</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Index.union.html#pandas.Index.union" title="pandas.Index.union"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.union()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Index.intersection.html#pandas.Index.intersection" title="pandas.Index.intersection"><code class="xref py py-func docutils literal notranslate"><span class="pre">Index.intersection()</span></code></a> where name of the <code class="docutils literal notranslate"><span class="pre">Index</span></code> of the result was not computed correctly for certain cases (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9943">GH9943</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9862">GH9862</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> slicing with boolean <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> may raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22533">GH22533</a>)</li>
<li>Bug in <code class="docutils literal notranslate"><span class="pre">PeriodArray.__setitem__</span></code> when accepting slice and list-like value (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23978">GH23978</a>)</li>
</ul>
</div>
<div class="section" id="missing">
<h3>Missing<a class="headerlink" href="#missing" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.fillna.html#pandas.DataFrame.fillna" title="pandas.DataFrame.fillna"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code></a> where a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> would raise when one column contained a <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15522">GH15522</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.hasnans.html#pandas.Series.hasnans" title="pandas.Series.hasnans"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.hasnans()</span></code></a> that could be incorrectly cached and return incorrect answers if null elements are introduced after an initial call (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19700">GH19700</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.Series.isin.html#pandas.Series.isin" title="pandas.Series.isin"><code class="xref py py-func docutils literal notranslate"><span class="pre">Series.isin()</span></code></a> now treats all NaN-floats as equal also for <cite>np.object</cite>-dtype. This behavior is consistent with the behavior for float64 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22119">GH22119</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.unique.html#pandas.unique" title="pandas.unique"><code class="xref py py-func docutils literal notranslate"><span class="pre">unique()</span></code></a> no longer mangles NaN-floats and the <code class="docutils literal notranslate"><span class="pre">NaT</span></code>-object for <cite>np.object</cite>-dtype, i.e. <code class="docutils literal notranslate"><span class="pre">NaT</span></code> is no longer coerced to a NaN-value and is treated as a different entity. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22295">GH22295</a>)</li>
</ul>
</div>
<div class="section" id="multiindex">
<h3>MultiIndex<a class="headerlink" href="#multiindex" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Removed compatibility for <a class="reference internal" href="../../generated/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> pickles prior to version 0.8.0; compatibility with <a class="reference internal" href="../../generated/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> pickles from version 0.13 forward is maintained (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21654">GH21654</a>)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.get_loc_level()</span></code> (and as a consequence, <code class="docutils literal notranslate"><span class="pre">.loc</span></code> on a <code class="docutils literal notranslate"><span class="pre">Series</span></code> or <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with a <a class="reference internal" href="../../generated/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> index) will now raise a <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>, rather than returning an empty <code class="docutils literal notranslate"><span class="pre">slice</span></code>, if asked a label which is present in the <code class="docutils literal notranslate"><span class="pre">levels</span></code> but is unused (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22221">GH22221</a>)</li>
<li><a href="#id1"><span class="problematic" id="id2">:cls:`MultiIndex`</span></a> has gained the <code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.from_frame()</span></code>, it allows constructing a <a href="#id3"><span class="problematic" id="id4">:cls:`MultiIndex`</span></a> object from a <a href="#id5"><span class="problematic" id="id6">:cls:`DataFrame`</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22420">GH22420</a>)</li>
<li>Fix <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> in Python 3 when creating <a class="reference internal" href="../../generated/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> in which some levels have mixed types, e.g. when some labels are tuples (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15457">GH15457</a>)</li>
</ul>
</div>
<div class="section" id="i-o">
<h3>I/O<a class="headerlink" href="#i-o" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="proper-handling-of-np-nan-in-a-string-data-typed-column-with-the-python-engine">
<span id="whatsnew-0240-bug-fixes-nan-with-str-dtype"></span><h3>Proper handling of <cite>np.NaN</cite> in a string data-typed column with the Python engine<a class="headerlink" href="#proper-handling-of-np-nan-in-a-string-data-typed-column-with-the-python-engine" title="Permalink to this headline">¶</a></h3>
<p>There was bug in <a class="reference internal" href="../../generated/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> and <a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> with the Python
engine, where missing values turned to <code class="docutils literal notranslate"><span class="pre">'nan'</span></code> with <code class="docutils literal notranslate"><span class="pre">dtype=str</span></code> and
<code class="docutils literal notranslate"><span class="pre">na_filter=True</span></code>. Now, these missing values are converted to the string
missing indicator, <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>. (:issue <cite>20377</cite>)</p>
<p>Previous Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,c</span><span class="se">\n</span><span class="s1">1,,3</span><span class="se">\n</span><span class="s1">4,5,6&#39;</span>
<span class="gp">In [6]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">na_filter</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">In [7]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="gh">Out[7]:</span>
<span class="go">&#39;nan&#39;</span>
</pre></div>
</div>
<p>Current Behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [99]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;a,b,c</span><span class="se">\n</span><span class="s1">1,,3</span><span class="se">\n</span><span class="s1">4,5,6&#39;</span>

<span class="gp">In [100]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">na_filter</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="gp">In [101]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
<span class="gh">Out[101]: </span><span class="go">&#39;nan&#39;</span>
</pre></div>
</div>
<p>Notice how we now instead output <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> itself instead of a stringified form of it.</p>
<ul class="simple">
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> in which a column specified with <code class="docutils literal notranslate"><span class="pre">CategoricalDtype</span></code> of boolean categories was not being correctly coerced from string values to booleans (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20498">GH20498</a>)</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_sql()</span></code> when writing timezone aware data (<code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> dtype) would raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9086">GH9086</a>)</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_sql()</span></code> where a naive DatetimeIndex would be written as <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIMEZONE</span></code> type in supported databases, e.g. PostgreSQL (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23510">GH23510</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> when <code class="docutils literal notranslate"><span class="pre">parse_cols</span></code> is specified with an empty dataset (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9208">GH9208</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_html()</span></code></a> no longer ignores all-whitespace <code class="docutils literal notranslate"><span class="pre">&lt;tr&gt;</span></code> within <code class="docutils literal notranslate"><span class="pre">&lt;thead&gt;</span></code> when considering the <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> and <code class="docutils literal notranslate"><span class="pre">header</span></code> arguments. Previously, users had to decrease their <code class="docutils literal notranslate"><span class="pre">header</span></code> and <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> values on such tables to work around the issue. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21641">GH21641</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code></a> will correctly show the deprecation warning for previously deprecated <code class="docutils literal notranslate"><span class="pre">sheetname</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/17994">GH17994</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> and func:<cite>read_table()</cite> will throw <code class="docutils literal notranslate"><span class="pre">UnicodeError</span></code> and not coredump on badly encoded strings (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22748">GH22748</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> will correctly parse timezone-aware datetimes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22256">GH22256</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> in which memory management was prematurely optimized for the C engine when the data was being read in chunks (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23509">GH23509</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> in unnamed columns were being improperly identified when extracting a multi-index (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23687">GH23687</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> will parse numbers in sas7bdat-files that have width less than 8 bytes correctly. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21616">GH21616</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> will correctly parse sas7bdat files with many columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22628">GH22628</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.read_sas.html#pandas.read_sas" title="pandas.read_sas"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_sas()</span></code></a> will correctly parse sas7bdat files with data page types having also bit 7 set (so page type is 128 + 256 = 384) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16615">GH16615</a>)</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">detect_client_encoding()</span></code> where potential <code class="docutils literal notranslate"><span class="pre">IOError</span></code> goes unhandled when importing in a mod_wsgi process due to restricted access to stdout. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21552">GH21552</a>)</li>
<li>Bug in <code class="xref py py-func docutils literal notranslate"><span class="pre">to_html()</span></code> with <code class="docutils literal notranslate"><span class="pre">index=False</span></code> misses truncation indicators (…) on truncated DataFrame (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15019">GH15019</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22783">GH22783</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> that broke column alignment when <code class="docutils literal notranslate"><span class="pre">index=False</span></code> and width of first column’s values is greater than the width of first column’s header (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16839">GH16839</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13032">GH13032</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a> that caused representations of <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> to not take up the whole window (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22984">GH22984</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.to_csv.html#pandas.DataFrame.to_csv" title="pandas.DataFrame.to_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code></a> where a single level MultiIndex incorrectly wrote a tuple. Now just the value of the index is written (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19589">GH19589</a>).</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">HDFStore()</span></code> will raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when the <code class="docutils literal notranslate"><span class="pre">format</span></code> kwarg is passed to the constructor (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13291">GH13291</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.HDFStore.append.html#pandas.HDFStore.append" title="pandas.HDFStore.append"><code class="xref py py-meth docutils literal notranslate"><span class="pre">HDFStore.append()</span></code></a> when appending a <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> with an empty string column and <code class="docutils literal notranslate"><span class="pre">min_itemsize</span></code> &lt; 8 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12242">GH12242</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> in which memory leaks occurred in the C engine when parsing <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values due to insufficient cleanup on completion or error (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21353">GH21353</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> in which incorrect error messages were being raised when <code class="docutils literal notranslate"><span class="pre">skipfooter</span></code> was passed in along with <code class="docutils literal notranslate"><span class="pre">nrows</span></code>, <code class="docutils literal notranslate"><span class="pre">iterator</span></code>, or <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23711">GH23711</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> in which <a class="reference internal" href="../../generated/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> index names were being improperly handled in the cases when they were not provided (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23484">GH23484</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_csv()</span></code></a> in which unnecessary warnings were being raised when the dialect’s values conflicted with the default arguments (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23761">GH23761</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_html.html#pandas.read_html" title="pandas.read_html"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_html()</span></code></a> in which the error message was not displaying the valid flavors when an invalid one was provided (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23549">GH23549</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> in which extraneous header names were extracted, even though none were specified (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11733">GH11733</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> in which column names were not being properly converted to string sometimes in Python 2.x (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23874">GH23874</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> in which <code class="docutils literal notranslate"><span class="pre">index_col=None</span></code> was not being respected and parsing index columns anyway (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/18792">GH18792</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20480">GH20480</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_excel.html#pandas.read_excel" title="pandas.read_excel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">read_excel()</span></code></a> in which <code class="docutils literal notranslate"><span class="pre">usecols</span></code> was not being validated for proper column names when passed in as a string (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20480">GH20480</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.to_dict.html#pandas.DataFrame.to_dict" title="pandas.DataFrame.to_dict"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_dict()</span></code></a> when the resulting dict contains non-Python scalars in the case of numeric data (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23753">GH23753</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.to_string.html#pandas.DataFrame.to_string" title="pandas.DataFrame.to_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code></a>, <a class="reference internal" href="../../generated/pandas.DataFrame.to_html.html#pandas.DataFrame.to_html" title="pandas.DataFrame.to_html"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code></a>, <a class="reference internal" href="../../generated/pandas.DataFrame.to_latex.html#pandas.DataFrame.to_latex" title="pandas.DataFrame.to_latex"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code></a> will correctly format output when a string is passed as the <code class="docutils literal notranslate"><span class="pre">float_format</span></code> argument (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21625">GH21625</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22270">GH22270</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.read_csv.html#pandas.read_csv" title="pandas.read_csv"><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code></a> that caused it to raise <code class="docutils literal notranslate"><span class="pre">OverflowError</span></code> when trying to use ‘inf’ as <code class="docutils literal notranslate"><span class="pre">na_value</span></code> with integer index column (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/17128">GH17128</a>)</li>
</ul>
</div>
<div class="section" id="plotting">
<h3>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.plot.scatter.html#pandas.DataFrame.plot.scatter" title="pandas.DataFrame.plot.scatter"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.plot.scatter()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.plot.hexbin.html#pandas.DataFrame.plot.hexbin" title="pandas.DataFrame.plot.hexbin"><code class="xref py py-func docutils literal notranslate"><span class="pre">DataFrame.plot.hexbin()</span></code></a> caused x-axis label and ticklabels to disappear when colorbar was on in IPython inline backend (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10611">GH10611</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10678">GH10678</a>, and <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20455">GH20455</a>)</li>
<li>Bug in plotting a Series with datetimes using <code class="xref py py-func docutils literal notranslate"><span class="pre">matplotlib.axes.Axes.scatter()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22039">GH22039</a>)</li>
</ul>
</div>
<div class="section" id="groupby-resample-rolling">
<h3>Groupby/Resample/Rolling<a class="headerlink" href="#groupby-resample-rolling" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug in <a class="reference internal" href="../../generated/pandas.core.groupby.GroupBy.first.html#pandas.core.groupby.GroupBy.first" title="pandas.core.groupby.GroupBy.first"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.core.groupby.GroupBy.first()</span></code></a> and <a class="reference internal" href="../../generated/pandas.core.groupby.GroupBy.last.html#pandas.core.groupby.GroupBy.last" title="pandas.core.groupby.GroupBy.last"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.core.groupby.GroupBy.last()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">as_index=False</span></code> leading to the loss of timezone information (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15884">GH15884</a>)</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">DatetimeIndex.resample()</span></code> when downsampling across a DST boundary (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8531">GH8531</a>)</li>
<li>Bug where <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is wrongly raised when calling <code class="xref py py-func docutils literal notranslate"><span class="pre">count()</span></code> method of a
<code class="docutils literal notranslate"><span class="pre">SeriesGroupBy</span></code> when the grouping variable only contains NaNs and numpy version &lt; 1.13 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21956">GH21956</a>).</li>
<li>Multiple bugs in <code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.core.Rolling.min()</span></code> with <code class="docutils literal notranslate"><span class="pre">closed='left'</span></code> and a
datetime-like index leading to incorrect results and also segfault. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21704">GH21704</a>)</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.apply()</span></code> when passing postiional arguments to applied func (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14615">GH14615</a>).</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> when passing <code class="docutils literal notranslate"><span class="pre">numpy.timedelta64</span></code> to <code class="docutils literal notranslate"><span class="pre">loffset</span></code> kwarg (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/7687">GH7687</a>).</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">Resampler.asfreq()</span></code> when frequency of <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> is a subperiod of a new frequency (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13022">GH13022</a>).</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.mean()</span></code> when values were integral but could not fit inside of int64, overflowing instead. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22487">GH22487</a>)</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">RollingGroupby.agg()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">ExpandingGroupby.agg()</span></code> now support multiple aggregation functions as parameters (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15072">GH15072</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> and <a class="reference internal" href="../../generated/pandas.Series.resample.html#pandas.Series.resample" title="pandas.Series.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.resample()</span></code></a> when resampling by a weekly offset (<code class="docutils literal notranslate"><span class="pre">'W'</span></code>) across a DST transition (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9119">GH9119</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21459">GH21459</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.expanding.html#pandas.DataFrame.expanding" title="pandas.DataFrame.expanding"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.expanding()</span></code></a> in which the <code class="docutils literal notranslate"><span class="pre">axis</span></code> argument was not being respected during aggregations (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23372">GH23372</a>)</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.core.groupby.DataFrameGroupBy.transform()</span></code> which caused missing values when the input function can accept a <a class="reference internal" href="../../generated/pandas.DataFrame.html#pandas.DataFrame" title="pandas.DataFrame"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataFrame</span></code></a> but renames it (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23455">GH23455</a>).</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.core.groupby.GroupBy.nth.html#pandas.core.groupby.GroupBy.nth" title="pandas.core.groupby.GroupBy.nth"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.core.groupby.GroupBy.nth()</span></code></a> where column order was not always preserved (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20760">GH20760</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.core.groupby.DataFrameGroupBy.rank.html#pandas.core.groupby.DataFrameGroupBy.rank" title="pandas.core.groupby.DataFrameGroupBy.rank"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pandas.core.groupby.DataFrameGroupBy.rank()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">method='dense'</span></code> and <code class="docutils literal notranslate"><span class="pre">pct=True</span></code> when a group has only one member would raise a <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23666">GH23666</a>).</li>
<li>Calling <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrameGroupBy.rank()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">SeriesGroupBy.rank()</span></code> with empty groups and <code class="docutils literal notranslate"><span class="pre">pct=True</span></code> was raising a <code class="docutils literal notranslate"><span class="pre">ZeroDivisionError</span></code> due to <a class="reference external" href="https://github.com/pandas-dev/pandas/commit/c1068d9d242c22cb2199156f6fb82eb5759178ae">c1068d9</a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22519">GH22519</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.resample.html#pandas.DataFrame.resample" title="pandas.DataFrame.resample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.resample()</span></code></a> when resampling <code class="docutils literal notranslate"><span class="pre">NaT</span></code> in <code class="docutils literal notranslate"><span class="pre">TimeDeltaIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13223">GH13223</a>).</li>
</ul>
</div>
<div class="section" id="reshaping">
<h3>Reshaping<a class="headerlink" href="#reshaping" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bug in <a class="reference internal" href="../../generated/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> when joining resampled DataFrames with timezone aware index (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13783">GH13783</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> when joining only <cite>Series</cite> the <cite>names</cite> argument of <cite>concat</cite> is no longer ignored (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23490">GH23490</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.combine_first.html#pandas.Series.combine_first" title="pandas.Series.combine_first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.combine_first()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> dtype which would return tz-naive result (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21469">GH21469</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.where.html#pandas.Series.where" title="pandas.Series.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.where()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21546">GH21546</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.where.html#pandas.DataFrame.where" title="pandas.DataFrame.where"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.where()</span></code></a> with an empty DataFrame and empty <code class="docutils literal notranslate"><span class="pre">cond</span></code> having non-bool dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21947">GH21947</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.mask.html#pandas.Series.mask" title="pandas.Series.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.mask()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.mask.html#pandas.DataFrame.mask" title="pandas.DataFrame.mask"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.mask()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">list</span></code> conditionals (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21891">GH21891</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code></a> raises RecursionError when converting OutOfBounds <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20380">GH20380</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.core.groupby.GroupBy.rank.html#pandas.core.groupby.GroupBy.rank" title="pandas.core.groupby.GroupBy.rank"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.core.groupby.GroupBy.rank()</span></code></a> now raises a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when an invalid value is passed for argument <code class="docutils literal notranslate"><span class="pre">na_option</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22124">GH22124</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.get_dummies.html#pandas.get_dummies" title="pandas.get_dummies"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_dummies()</span></code></a> with Unicode attributes in Python 2 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22084">GH22084</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.replace.html#pandas.DataFrame.replace" title="pandas.DataFrame.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.replace()</span></code></a> raises <code class="docutils literal notranslate"><span class="pre">RecursionError</span></code> when replacing empty lists (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22083">GH22083</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.replace.html#pandas.Series.replace" title="pandas.Series.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.replace()</span></code></a> and meth:<cite>DataFrame.replace</cite> when dict is used as the <code class="docutils literal notranslate"><span class="pre">to_replace</span></code> value and one key in the dict is is another key’s value, the results were inconsistent between using integer key and using string key (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20656">GH20656</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.drop_duplicates.html#pandas.DataFrame.drop_duplicates" title="pandas.DataFrame.drop_duplicates"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.drop_duplicates()</span></code></a> for empty <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> which incorrectly raises an error (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20516">GH20516</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.wide_to_long.html#pandas.wide_to_long" title="pandas.wide_to_long"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.wide_to_long()</span></code></a> when a string is passed to the stubnames argument and a column name is a substring of that stubname (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22468">GH22468</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.merge.html#pandas.merge" title="pandas.merge"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code></a> when merging <code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code> data that contained a DST transition (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/18885">GH18885</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> when merging on float values within defined tolerance (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22981">GH22981</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> when concatenating a multicolumn DataFrame with tz-aware data against a DataFrame with a different number of columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22796">GH22796</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.merge_asof.html#pandas.merge_asof" title="pandas.merge_asof"><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code></a> where confusing error message raised when attempting to merge with missing values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23189">GH23189</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.nsmallest.html#pandas.DataFrame.nsmallest" title="pandas.DataFrame.nsmallest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nsmallest()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.nlargest.html#pandas.DataFrame.nlargest" title="pandas.DataFrame.nlargest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nlargest()</span></code></a> for dataframes that have a <a class="reference internal" href="../../generated/pandas.MultiIndex.html#pandas.MultiIndex" title="pandas.MultiIndex"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiIndex</span></code></a> for columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23033">GH23033</a>).</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.melt.html#pandas.melt" title="pandas.melt"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.melt()</span></code></a> when passing column names that are not present in <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23575">GH23575</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.append.html#pandas.DataFrame.append" title="pandas.DataFrame.append"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.append()</span></code></a> with a <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> with a dateutil timezone would raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23682">GH23682</a>)</li>
<li>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> construction when passing no data and <code class="docutils literal notranslate"><span class="pre">dtype=str</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22477">GH22477</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.cut.html#pandas.cut" title="pandas.cut"><code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">bins</span></code> as an overlapping <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> where multiple bins were returned per item instead of raising a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23980">GH23980</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.concat.html#pandas.concat" title="pandas.concat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.concat()</span></code></a> when joining <code class="docutils literal notranslate"><span class="pre">Series</span></code> datetimetz with <code class="docutils literal notranslate"><span class="pre">Series</span></code> category would lose timezone (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23816">GH23816</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.join.html#pandas.DataFrame.join" title="pandas.DataFrame.join"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code></a> when joining on partial MultiIndex would drop names (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20452">GH20452</a>).</li>
</ul>
</div>
<div class="section" id="sparse">
<span id="whatsnew-0240-bug-fixes-sparse"></span><h3>Sparse<a class="headerlink" href="#sparse" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Updating a boolean, datetime, or timedelta column to be Sparse now works (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22367">GH22367</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.Series.to_sparse.html#pandas.Series.to_sparse" title="pandas.Series.to_sparse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_sparse()</span></code></a> with Series already holding sparse data not constructing properly (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22389">GH22389</a>)</li>
<li>Providing a <code class="docutils literal notranslate"><span class="pre">sparse_index</span></code> to the SparseArray constructor no longer defaults the na-value to <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> for all dtypes. The correct na_value for <code class="docutils literal notranslate"><span class="pre">data.dtype</span></code> is now used.</li>
<li>Bug in <code class="docutils literal notranslate"><span class="pre">SparseArray.nbytes</span></code> under-reporting its memory usage by not including the size of its sparse index.</li>
<li>Improved performance of <a class="reference internal" href="../../generated/pandas.Series.shift.html#pandas.Series.shift" title="pandas.Series.shift"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.shift()</span></code></a> for non-NA <code class="docutils literal notranslate"><span class="pre">fill_value</span></code>, as values are no longer converted to a dense array.</li>
<li>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.groupby</span></code> not including <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> in the groups for non-NA <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> when grouping by a sparse column (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/5078">GH5078</a>)</li>
<li>Bug in unary inversion operator (<code class="docutils literal notranslate"><span class="pre">~</span></code>) on a <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> with boolean values. The performance of this has also been improved (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22835">GH22835</a>)</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArary.unique()</span></code> not returning the unique values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/19595">GH19595</a>)</li>
<li>Bug in <code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseArray.nonzero()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">SparseDataFrame.dropna()</span></code> returning shifted/incorrect results (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21172">GH21172</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.apply.html#pandas.DataFrame.apply" title="pandas.DataFrame.apply"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.apply()</span></code></a> where dtypes would lose sparseness (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/23744">GH23744</a>)</li>
</ul>
</div>
<div class="section" id="build-changes">
<h3>Build Changes<a class="headerlink" href="#build-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Building pandas for development now requires <code class="docutils literal notranslate"><span class="pre">cython</span> <span class="pre">&gt;=</span> <span class="pre">0.28.2</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21688">GH21688</a>)</li>
<li>Testing pandas now requires <code class="docutils literal notranslate"><span class="pre">hypothesis&gt;=3.58</span></code>.  You can find <a class="reference external" href="https://hypothesis.readthedocs.io/en/latest/index.html">the Hypothesis docs here</a>, and a pandas-specific introduction <a class="reference internal" href="../../developers/contributing.html#using-hypothesis"><span class="std std-ref">in the contributing guide</span></a>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22280">GH22280</a>)</li>
<li></li>
</ul>
</div>
<div class="section" id="other">
<h3>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../generated/pandas.io.formats.style.Styler.background_gradient.html#pandas.io.formats.style.Styler.background_gradient" title="pandas.io.formats.style.Styler.background_gradient"><code class="xref py py-meth docutils literal notranslate"><span class="pre">background_gradient()</span></code></a> now takes a <code class="docutils literal notranslate"><span class="pre">text_color_threshold</span></code> parameter to automatically lighten the text color based on the luminance of the background color. This improves readability with dark background colors without the need to limit the background colormap range. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21258">GH21258</a>)</li>
<li>Require at least 0.28.2 version of <code class="docutils literal notranslate"><span class="pre">cython</span></code> to support read-only memoryviews (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21688">GH21688</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.io.formats.style.Styler.background_gradient.html#pandas.io.formats.style.Styler.background_gradient" title="pandas.io.formats.style.Styler.background_gradient"><code class="xref py py-meth docutils literal notranslate"><span class="pre">background_gradient()</span></code></a> now also supports tablewise application (in addition to rowwise and columnwise) with <code class="docutils literal notranslate"><span class="pre">axis=None</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15204">GH15204</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.DataFrame.nlargest.html#pandas.DataFrame.nlargest" title="pandas.DataFrame.nlargest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nlargest()</span></code></a> and <a class="reference internal" href="../../generated/pandas.DataFrame.nsmallest.html#pandas.DataFrame.nsmallest" title="pandas.DataFrame.nsmallest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.nsmallest()</span></code></a> now returns the correct n values when keep != ‘all’ also when tied on the first columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22752">GH22752</a>)</li>
<li><a class="reference internal" href="../../generated/pandas.io.formats.style.Styler.bar.html#pandas.io.formats.style.Styler.bar" title="pandas.io.formats.style.Styler.bar"><code class="xref py py-meth docutils literal notranslate"><span class="pre">bar()</span></code></a> now also supports tablewise application (in addition to rowwise and columnwise) with <code class="docutils literal notranslate"><span class="pre">axis=None</span></code> and setting clipping range with <code class="docutils literal notranslate"><span class="pre">vmin</span></code> and <code class="docutils literal notranslate"><span class="pre">vmax</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21548">GH21548</a> and <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/21526">GH21526</a>). <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values are also handled properly.</li>
<li>Logical operations <code class="docutils literal notranslate"><span class="pre">&amp;,</span> <span class="pre">|,</span> <span class="pre">^</span></code> between <a class="reference internal" href="../../generated/pandas.Series.html#pandas.Series" title="pandas.Series"><code class="xref py py-class docutils literal notranslate"><span class="pre">Series</span></code></a> and <a class="reference internal" href="../../generated/pandas.Index.html#pandas.Index" title="pandas.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> will no longer raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22092">GH22092</a>)</li>
<li>Checking PEP 3141 numbers in <a class="reference internal" href="../../generated/pandas.api.types.is_scalar.html#pandas.api.types.is_scalar" title="pandas.api.types.is_scalar"><code class="xref py py-func docutils literal notranslate"><span class="pre">is_scalar()</span></code></a> function returns <code class="docutils literal notranslate"><span class="pre">True</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22903">GH22903</a>)</li>
<li>Bug in <a class="reference internal" href="../../generated/pandas.DataFrame.combine_first.html#pandas.DataFrame.combine_first" title="pandas.DataFrame.combine_first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.combine_first()</span></code></a> in which column types were unexpectedly converted to float (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/20699">GH20699</a>)</li>
<li>Bug where C variables were declared with external linkage causing import errors if certain other C libraries were imported before Pandas. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/24113">GH24113</a>)</li>
<li>Constructing a DataFrame with an index argument that wasn’t already an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code> was broken in <a class="reference external" href="https://github.com/pandas-dev/pandas/commit/4efb39f01f5880122fa38d91e12d217ef70fad9e">4efb39f</a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/22227">GH22227</a>).</li>
</ul>
</div>
</div>
<div class="section" id="contributors">
<span id="whatsnew-0-24-0-contributors"></span><h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/release/whatsnew/v0.24.0.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2008-2014, the pandas development team.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>